window.__require=function t(e,o,n){function r(a,i){if(!o[a]){if(!e[a]){var p=a.split("/");if(p=p[p.length-1],!e[p]){var l="function"==typeof __require&&__require;if(!i&&l)return l(p,!0);if(c)return c(p,!0);throw new Error("Cannot find module '"+a+"'")}a=p}var s=o[a]={exports:{}};e[a][0].call(s.exports,function(t){return r(e[a][1][t]||t)},s,s.exports,t,e,o,n)}return o[a].exports}for(var c="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({CameraManager:[function(t,e,o){"use strict";cc._RF.push(e,"7f2b8VzN41KSbvuuFItUlc+","CameraManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../data/GameData"),i=cc._decorator,p=i.ccclass,l=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=null,e.camera=null,e}return r(e,t),e.prototype.start=function(){a.default.start()},e.prototype.update=function(){var t=this.player.convertToWorldSpaceAR(cc.v2(0,0)),e=this.node.parent.convertToNodeSpaceAR(t);e.x>0&&e.x<a.default.tiledMapWidth*a.default.tiledMapScaleVal-a.default.width&&(this.node.x=e.x)},c([l(cc.Node)],e.prototype,"player",void 0),c([l(cc.Camera)],e.prototype,"camera",void 0),c([p],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../data/GameData":"GameData"}],CheckWebPageHide:[function(t,e,o){"use strict";cc._RF.push(e,"12512jv5eVIHpuhbyr6LPLS","CheckWebPageHide");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../util/SoundManager"),i=cc._decorator,p=i.ccclass,l=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sdm=null,e}return r(e,t),e.prototype.onLoad=function(){console.log("start game check hide")},e.prototype.startCheck=function(){cc.game.on(cc.game.EVENT_HIDE,this.gameHideHandler,this),cc.game.on(cc.game.EVENT_SHOW,this.gameShowHandler,this)},e.prototype.start=function(){},e.prototype.gameShowHandler=function(){console.log("game show"),a.default.getInstance().playBgm()},e.prototype.gameHideHandler=function(){console.log("game hide"),a.default.getInstance().pauseBgm()},c([p],e)}(cc.Component));o.default=l,cc._RF.pop()},{"../util/SoundManager":"SoundManager"}],CommonAudioManger:[function(t,e,o){"use strict";cc._RF.push(e,"e2723obN1lH7qeIwHbcLfbw","CommonAudioManger");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.CAManager=void 0;var a=t("../data/GameData"),i=cc._decorator,p=i.ccclass,l=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioClips=[],e._clipDict={},e}var o;return r(e,t),o=e,e.getInstance=function(){return this.instance||(this.instance=new o),this.instance},e.prototype.onLoad=function(){cc.log("CA manager init",this.audioClips);for(var t=0;t<this.audioClips.length;t++){var e=this.audioClips[t];this._clipDict[e.name]=e}a.default.clipDict=this._clipDict},e.prototype.play=function(t){var e=a.default.clipDict[t];void 0!==e&&cc.audioEngine.playEffect(e,!1)},c([l([cc.AudioClip])],e.prototype,"audioClips",void 0),o=c([p],e)}(cc.Component);o.default=s,o.CAManager=s.getInstance(),cc._RF.pop()},{"../data/GameData":"GameData"}],Demo:[function(t,e,o){"use strict";cc._RF.push(e,"b29cdxd4XJPtKg7CFlZkAzG","Demo");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./user-ctrl/UserCtrlEvt"),i=cc._decorator,p=i.ccclass,l=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text="hello",e}return r(e,t),e.prototype.start=function(){a.default.getInstance().on(a.default.TYPE_EVT.leftBtn,this.userLeftHandler,this),a.default.getInstance().on(a.default.TYPE_EVT.rightBtn,this.userLeftHandler,this),a.default.getInstance().on(a.default.TYPE_EVT.jumpBtn,this.userLeftHandler,this)},e.prototype.userLeftHandler=function(t){cc.log(t)},c([l],e.prototype,"text",void 0),c([p],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./user-ctrl/UserCtrlEvt":"UserCtrlEvt"}],Enemy:[function(t,e,o){"use strict";cc._RF.push(e,"5b19cTecwdIOJgaS/MvtaMQ","Enemy");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enemyName="",e.attackVal=0,e.heathVal=0,e}return r(e,t),e.prototype.start=function(){},e.prototype.test=function(){cc.log("kill by self")},e.prototype.death=function(){},e.STATE_DEATH="death",c([p],e.prototype,"enemyName",void 0),c([p],e.prototype,"attackVal",void 0),c([p],e.prototype,"heathVal",void 0),c([i],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FallState:[function(t,e,o){"use strict";cc._RF.push(e,"5a056AXp6lJmrTdSVM1Huek","FallState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.FallState=void 0;var c=t("../Player"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.enter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.player=t[1],this.player.switchAnimation("fall")},e.prototype.execute=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=t[0];this.lv=this.player.node.getComponent(cc.RigidBody).linearVelocity;var n=Math.abs(this.player.node.scaleX);o[cc.macro.KEY.left]||o[cc.macro.KEY.a]?(this.player.node.scaleX=-n,this.player.sp.x=-1):(o[cc.macro.KEY.right]||o[cc.macro.KEY.d])&&(this.player.sp.x=1,this.player.node.scaleX=n),o[cc.macro.KEY.space]&&!this.player.useDoubleJump&&(this.player.useDoubleJump=!0,this.stateMachine.transition(c.AllPlayerState.jump)),this.player.sp.x?this.lv.x=this.player.sp.x*this.player.currSpeed:this.lv.x=0,this.player.node.getComponent(cc.RigidBody).linearVelocity=this.lv,0==this.lv.y&&this.stateMachine.transition(c.AllPlayerState.idle)},e}(t("./StateBase").StateBase);o.FallState=a,cc._RF.pop()},{"../Player":"Player","./StateBase":"StateBase"}],Follow:[function(t,e,o){"use strict";cc._RF.push(e,"f27ebZZsuVAErikpeeLSwrf","Follow");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e}return r(e,t),e.prototype.onLoad=function(){if(this.target){var t=cc.follow(this.target,cc.rect(0,0,2e3,200));this.node.runAction(t)}},e.prototype.start=function(){},c([p(cc.Node)],e.prototype,"target",void 0),c([i],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Frog:[function(t,e,o){"use strict";cc._RF.push(e,"89c0eHtIYxE94a9BiEWZvEh","Frog");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Enemy"),i=cc._decorator,p=i.ccclass,l=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isMoive=!1,e.jumpVal=300,e.speedVal=150,e.interval=4,e.frogJumpSide="",e.currSide="",e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){this.animtion=this.node.getComponent(cc.Animation)},e.prototype.start=function(){this.attackVal=1,this.frogJumpSide=o.JUMP_SIDE_RIGHT,this.currSide=o.JUMP_SIDE_LEFT,this.isMoive&&cc.director.getScheduler().schedule(this.startJump,this,this.interval)},e.prototype.update=function(){if(this.isMoive){var t=this.node.getComponent(cc.RigidBody).linearVelocity;t.y>10?this.animtion.play(o.STATE_JUMP):t.y<0&&this.animtion.play(o.STATE_FALL)}},e.prototype.jump=function(){var t=this.node.getComponent(cc.RigidBody).linearVelocity;t.y=this.jumpVal,this.frogJumpSide==o.JUMP_SIDE_LEFT?(this.node.scaleX=1,t.x=-this.speedVal):this.frogJumpSide==o.JUMP_SIDE_RIGHT&&(this.node.scaleX=-1,t.x=this.speedVal),this.node.getComponent(cc.RigidBody).linearVelocity=t},e.prototype.startJump=function(){this.switchFrogJump(),this.jump()},e.prototype.onBeginContact=function(){this.animtion.play(o.STATE_IDLE),this.isOnFloor=!0},e.prototype.switchFrogJump=function(){this.frogJumpSide=this.frogJumpSide==o.JUMP_SIDE_LEFT?o.JUMP_SIDE_RIGHT:o.JUMP_SIDE_LEFT},e.prototype.death=function(){cc.director.getScheduler().unscheduleAllForTarget(this),this.animtion.play(o.STATE_DEATH)},e.prototype.animationDateOver=function(){this.node.destroy()},e.STATE_IDLE="idle",e.STATE_DEATH="death",e.STATE_JUMP="jump",e.STATE_FALL="fall",e.JUMP_SIDE_LEFT="left",e.JUMP_SIDE_RIGHT="right",c([l],e.prototype,"isMoive",void 0),o=c([p],e)}(a.default);o.default=s,cc._RF.pop()},{"./Enemy":"Enemy"}],GameData:[function(t,e,o){"use strict";cc._RF.push(e,"9cc82AMh2FGtoEY1VDbyWnB","GameData"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.start=function(){},t.tagEnemys=[1,2,3,98],t.tagItems=[11,22,33],t.tagFinalCheckPoint=[111],t.TYPE_ITEM_CHERRY="cherry",t.TYPE_ITEM_GEM="gem",t.EVT_GET_ITEM="evt_get_item",t.GAME_OVER="game_over",t.GAME_FAIL="game_fail",t.ITEM_FEED_BACK_ANIMATION_OVER="item_feed_back_animation_over",t.DEBUG=!1,t.TEST_ANI_OVER_NUMS=0,t.SFX_jump="jump",t.SFX_pickup="pickup",t.SFX_step="step",t}();o.default=n,cc._RF.pop()},{}],GameScene:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","GameScene");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./data/GameData"),i=t("./manager/CommonAudioManger"),p=t("./Player"),l=t("./ui/item/ItemFeedBack"),s=cc._decorator,u=s.ccclass,f=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tiledMap=null,e.scoreLabel=null,e.player=null,e.joyCtrl=null,e.temp=null,e.reloadSceneName="",e.currScoreVal=0,e.test_put_nums=0,e}return r(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,cc.game.canvas.focus(),a.default.width=this.node.width,a.default.height=this.node.height,a.default.tiledMapScaleVal=3,this.tempNodeFeddBkArray=new Array},e.prototype.isPC=function(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=0;o<e.length;o++)if(t.indexOf(e[o])>-1)return!1;return!0},e.prototype.frogCompleteHandler=function(){},e.prototype.start=function(){this.temp&&this.temp.getComponent(cc.Widget),cc.view.enableAutoFullScreen(!0),this.initMapNode(this.tiledMap),a.default.tiledMapWidth=this.tiledMap.width,a.default.tiledMapHeight=this.tiledMap.height,this.scoreLabel.string="\u5206\u6570\uff1a"+this.currScoreVal,this.playerScript=this.player.getComponent(p.default),this.playerScript.node.on(a.default.EVT_GET_ITEM,this.playerScriptHandler,this),this.playerScript.node.once(a.default.GAME_OVER,this.gameOverHandler,this),this.playerScript.node.once(a.default.GAME_FAIL,this.gameFailHandler,this)},e.prototype.gameFailHandler=function(){cc.director.loadScene("gameFail")},e.prototype.gameOverHandler=function(){cc.director.loadScene("gameWin")},e.prototype.playerScriptHandler=function(t,e,o){this.currScoreVal+=t,this.scoreLabel.string="\u5206\u6570\uff1a"+this.currScoreVal;var n,r=this.tiledMap.getChildByName("items"),c=this.convertPosOtherToSelf(e,r);this.tempNodeFeddBkArray.push(o),n=o.getComponent(l.default),i.CAManager.play(a.default.SFX_pickup),n.playAnimation(),o.scale=1,r.addChild(o),o.x=c.x,o.y=c.y,e.destroy()},e.prototype.itemFeedbackAnimationOverHandler=function(){this.test_put_nums++;var t=this.tempNodeFeddBkArray[this.tempNodeFeddBkArray.length-1];this.playerScript.putItemToPool(t),this.tempNodeFeddBkArray.pop()},e.prototype.convertPosOtherToSelf=function(t,e){var o=t.convertToWorldSpaceAR(cc.v2(0,0));return e.convertToNodeSpaceAR(o)},e.prototype.update=function(){},e.prototype.initMapNode=function(t){for(var e=t.getComponent(cc.TiledMap),o=e.getTileSize(),n=e.getLayer("wall"),r=n.getLayerSize(),c=0;c<r.width;c++)for(var a=0;a<r.height;a++){var i=n.getTiledTileAt(c,a,!0);if(0!=i.gid){i.node.group="wall";var p=i.node.addComponent(cc.RigidBody);p.awakeOnLoad=p.fixedRotation=!0,p.allowSleep=!0,p.type=cc.RigidBodyType.Static;var l=i.node.addComponent(cc.PhysicsBoxCollider);l.offset=cc.v2(o.width/2,o.height/2),l.size=o,l.friction=.2,l.density=1,l.restitution=.01,l.apply()}}},c([f(cc.Node)],e.prototype,"tiledMap",void 0),c([f(cc.Label)],e.prototype,"scoreLabel",void 0),c([f(cc.Node)],e.prototype,"player",void 0),c([f(cc.Node)],e.prototype,"joyCtrl",void 0),c([f(cc.Node)],e.prototype,"temp",void 0),c([f],e.prototype,"reloadSceneName",void 0),c([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Player":"Player","./data/GameData":"GameData","./manager/CommonAudioManger":"CommonAudioManger","./ui/item/ItemFeedBack":"ItemFeedBack"}],GameStart:[function(t,e,o){"use strict";cc._RF.push(e,"01020WddlNBurSp70Jbx4Vb","GameStart");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../data/GameData"),i=cc._decorator,p=i.ccclass,l=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startBtn=null,e.titleScreenNd=null,e}return r(e,t),e.prototype.onLoad=function(){this.startBtn.node.on(cc.Node.EventType.TOUCH_END,this.startBtnTouchEndHandler,this),console.log("document.URL:",document.URL),a.default.DEBUG=this.checkIsDebugMode(document.URL)||!1,console.log("\u5f53\u524d\u5904\u4e8ebuild\u6a21\u5f0f")},e.prototype.checkIsDebugMode=function(t){var e;return t.length>0&&t.indexOf("?")>0&&(e=t.split("?")[1].split("=")[1]),"true"===e},e.prototype.startBtnTouchEndHandler=function(){cc.director.loadScene("info")},e.prototype.start=function(){cc.director.preloadScene("info"),cc.tween(this.startBtn.node).repeatForever(cc.tween().to(.6,{opacity:255}).to(.6,{opacity:0})).start(),cc.tween(this.titleScreenNd).repeatForever(cc.tween().to(1.2,{scale:3.1}).to(1.2,{scale:3})).start()},e.prototype.onDestroy=function(){},c([l(cc.Button)],e.prototype,"startBtn",void 0),c([l(cc.Node)],e.prototype,"titleScreenNd",void 0),c([p],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../data/GameData":"GameData"}],GameUtil:[function(t,e,o){"use strict";var n;cc._RF.push(e,"44819uj42dBv6wgg1VNkywR","GameUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.COLOR_LOG=void 0,function(t){t.red="#0f0",t.player="#eeb07e"}(n=o.COLOR_LOG||(o.COLOR_LOG={}));var r=function(){function t(){}return t.log=function(e,o){var r;void 0===o&&(o=n.red),t.logIsOn&&(r="color:"+o+";",console.log("%c "+e,r+"font-size:20px;"))},t.logIsOn=!0,t}();o.default=r,cc._RF.pop()},{}],GlobalEvt:[function(t,e,o){"use strict";cc._RF.push(e,"d0b1drOVYlOsJm5lRgLmgYM","GlobalEvt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GlobalEvtInstance=void 0;var a=cc._decorator,i=a.ccclass,p=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,e.getInstance=function(){return this.instance||(this.instance=new o),this.instance},e.prototype.loadFx=function(t){cc.resources.load(t,cc.AudioClip,function(t,e){if(t)cc.log(t);else{var o=e;cc.audioEngine.play(o,!1,1)}})},e.SFX_JUMP="jump",o=c([i],e)}(cc.Component));o.default=p,o.GlobalEvtInstance=p.getInstance(),cc._RF.pop()},{}],Heart:[function(t,e,o){"use strict";cc._RF.push(e,"cf54bSf/mBD1ZKzBGnP6T08","Heart");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,i=cc._decorator,p=i.ccclass,l=i.property;(function(t){t[t.Full=2]="Full",t[t.Half=1]="Half",t[t.Empty=0]="Empty"})(a||(a={}));var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateVal=a.Full,e.spFrames=[],e}return r(e,t),e.prototype.onLoad=function(){this.spComp=this.node.getComponent(cc.Sprite)},e.prototype.start=function(){},e.prototype.setState=function(t){this.spFrames&&(this.spComp.spriteFrame=this.spFrames[t])},e.HEART_VAL=2,c([l({type:cc.Enum(a)})],e.prototype,"stateVal",void 0),c([l([cc.SpriteFrame])],e.prototype,"spFrames",void 0),c([p],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],HurtState:[function(t,e,o){"use strict";cc._RF.push(e,"63f5d1N1k1Fd5ZxVVJ47LYt","HurtState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.HurtState=void 0;var c=t("../Player"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.recoverTime=600,e}return r(e,t),e.prototype.enter=function(){for(var t=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];this.player=e[1],this.player.switchAnimation("hurt"),this.player.hurt(),this.player.node.runAction(cc.blink(this.recoverTime/1e3,4));var n=setTimeout(function(){cc.log("\u53d6\u6d88  \u53d7\u4f24\u72b6\u6001..."),t.stateMachine.transition(c.AllPlayerState.idle),clearTimeout(n)},this.recoverTime)},e.prototype.execute=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=t[0];o[cc.macro.KEY.right]||o[cc.macro.KEY.d]||o[cc.macro.KEY.left]||o[cc.macro.KEY.a]||o[cc.macro.KEY.space]},e}(t("./StateBase").StateBase);o.HurtState=a,cc._RF.pop()},{"../Player":"Player","./StateBase":"StateBase"}],IdleState:[function(t,e,o){"use strict";cc._RF.push(e,"77d6fGVBvxCdbCXZ5ZHyg9t","IdleState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.IdleState=void 0;var c=t("../Player"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.enter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.player=t[1],this.player.useDoubleJump=!1,this.player.node&&this.player.node.getComponent(cc.RigidBody)&&(this.player.node.getComponent(cc.RigidBody).linearVelocity=new cc.Vec2(0,0),this.player.switchAnimation("idle"))},e.prototype.execute=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=t[0];if(this.player=t[1],o[cc.macro.KEY.right]||o[cc.macro.KEY.d]||o[cc.macro.KEY.left]||o[cc.macro.KEY.a])this.stateMachine.transition(c.AllPlayerState.move);else{var n=this.player.node.getComponent(cc.RigidBody).linearVelocity;o[cc.macro.KEY.space]&&0==n.y&&this.stateMachine.transition(c.AllPlayerState.jump)}},e}(t("./StateBase").StateBase);o.IdleState=a,cc._RF.pop()},{"../Player":"Player","./StateBase":"StateBase"}],ItemFeedBack:[function(t,e,o){"use strict";cc._RF.push(e,"0db91KeaFhNgr1tODbYTmwD","ItemFeedBack");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../data/GameData"),i=cc._decorator,p=i.ccclass,l=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=-1,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.playAnimation=function(){this.ani=this.node.getComponent(cc.Animation),this.ani.setCurrentTime(0),this.aniState=this.ani.play(),this.ani.sample(this.ani.name)},e.prototype.aniStopHandler=function(){},e.prototype.animationOver=function(){a.default.TEST_ANI_OVER_NUMS++,this.node.emit(a.default.ITEM_FEED_BACK_ANIMATION_OVER)},e.prototype.reuse=function(){cc.log("reuse")},e.prototype.unuse=function(){cc.log("unuse")},c([p],e)}(cc.Component));o.default=l,cc._RF.pop()},{"../../data/GameData":"GameData"}],Item:[function(t,e,o){"use strict";cc._RF.push(e,"e7a2bMBdElAz55ZocD7M4t0","Item");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.val=0,e}return r(e,t),e.prototype.start=function(){},c([p({type:cc.Integer,tooltip:"\u7269\u54c1\u7684\u4ef7\u503c"})],e.prototype,"val",void 0),c([i],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],JumpState:[function(t,e,o){"use strict";cc._RF.push(e,"40f10RHmiJCZILaUvmWt/er","JumpState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.JumpState=void 0;var c=t("../data/GameData"),a=t("../manager/CommonAudioManger"),i=t("../Player"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.enter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t[0],this.player=t[1],this.lv=this.player.node.getComponent(cc.RigidBody).linearVelocity,this.lv.y=this.player.jumpVal,this.lv.y>3&&(this.player.sp.x=0,this.player.switchAnimation(i.AllPlayerState.jump),a.CAManager.play(c.default.SFX_jump)),this.player.node.getComponent(cc.RigidBody).linearVelocity=this.lv},e.prototype.execute=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.player=t[1];var o=t[0];this.lv=this.player.node.getComponent(cc.RigidBody).linearVelocity,this.lv=this.player.node.getComponent(cc.RigidBody).linearVelocity;var n=Math.abs(this.player.node.scaleX);o[cc.macro.KEY.left]||o[cc.macro.KEY.a]?(this.player.node.scaleX=-n,this.player.sp.x=-1):(o[cc.macro.KEY.right]||o[cc.macro.KEY.d])&&(this.player.sp.x=1,this.player.node.scaleX=n),this.player.sp.x?this.lv.x=this.player.sp.x*this.player.currSpeed:this.lv.x=0,this.player.node.getComponent(cc.RigidBody).linearVelocity=this.lv,this.lv.y<0&&this.stateMachine.transition(i.AllPlayerState.fall)},e}(t("./StateBase").StateBase);o.JumpState=p,cc._RF.pop()},{"../Player":"Player","../data/GameData":"GameData","../manager/CommonAudioManger":"CommonAudioManger","./StateBase":"StateBase"}],MoveState:[function(t,e,o){"use strict";cc._RF.push(e,"5bc54iyr9RL3bsKqxP4KUKI","MoveState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.MoveState=void 0;var c=t("../Player"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.enter=function(){},e.prototype.execute=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=t[0];if(this.player=t[1],o[cc.macro.KEY.right]||o[cc.macro.KEY.d]||o[cc.macro.KEY.left]||o[cc.macro.KEY.a]){var n=Math.abs(this.player.node.scaleX),r=this.player.node.getComponent(cc.RigidBody).linearVelocity;o[cc.macro.KEY.left]||o[cc.macro.KEY.a]?(this.player.sp.x=-1,this.player.node.scaleX=-n,this.player.switchAnimation("run")):o[cc.macro.KEY.right]||o[cc.macro.KEY.d]?(this.player.sp.x=1,this.player.node.scaleX=n,this.player.switchAnimation("run")):this.stateMachine.transition(c.AllPlayerState.idle),o[cc.macro.KEY.space]&&0==r.y&&this.stateMachine.transition(c.AllPlayerState.jump),this.player.sp.x?r.x=this.player.sp.x*this.player.currSpeed:r.x=0,this.player.node.getComponent(cc.RigidBody).linearVelocity=r}else this.stateMachine.transition(c.AllPlayerState.idle)},e}(t("./StateBase").StateBase);o.MoveState=a,cc._RF.pop()},{"../Player":"Player","./StateBase":"StateBase"}],PlayerCollider:[function(t,e,o){"use strict";cc._RF.push(e,"e2dc89gsEpDILcnbh33TK29","PlayerCollider");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,p=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){},e.prototype.init=function(t,e){this.colliderFun=t,this.player=e},e.prototype.onCollisionEnter=function(t,e){this.colliderFun.call(this.player,t,e)},c([i],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],PlayerLifeManager:[function(t,e,o){"use strict";cc._RF.push(e,"e8c56RtvapOr7LriLW6CSMC","PlayerLifeManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../ui/Heart"),i=t("../evt/UIEvt"),p=t("../Player"),l=cc._decorator,s=l.ccclass,u=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.heartNds=[],e.lifeNum=0,e}return r(e,t),e.prototype.onLoad=function(){i.default.getInstance().once(i.default.PLAYER_LIFE_INIT,this.playerLifeHandler,this),i.default.getInstance().on(i.default.PLAYER_LIFE_CHANGE,this.playerLifeHandler,this)},e.prototype.playerLifeHandler=function(t){this.lifeVal=t},Object.defineProperty(e.prototype,"lifeVal",{get:function(){return this.lifeNum},set:function(t){cc.log("life:",t),t>p.default.LIFE_MAX&&(t=p.default.LIFE_MAX),this.lifeNum=t,this.ctrlLifeUI(t)},enumerable:!1,configurable:!0}),e.prototype.ctrlLifeUI=function(t){var e,o=[0,0,0];e=Math.floor(t/2);for(var n=0;n<3;n++)n<e?(o[n]=a.default.HEART_VAL,t-=a.default.HEART_VAL):t>0?(o[n]=t,t=0):0==t&&(o[n]=0);cc.log("lifeArr:",o),this.heartNds.forEach(function(t,e){var n=t.getComponent(a.default);cc.log(o[e]),n&&n.setState(o[e])})},c([u([cc.Node])],e.prototype,"heartNds",void 0),c([s],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../Player":"Player","../evt/UIEvt":"UIEvt","../ui/Heart":"Heart"}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"f6418Qu7aRKlbiDcDInEIhd","Player");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.AllPlayerState=void 0;var a,i=t("./data/GameData"),p=t("./ui/enemy/Enemy"),l=t("./user-ctrl/UserCtrlEvt"),s=t("./ui/item/ItemFeedBack"),u=t("./fsm/IdleState"),f=t("./fsm/MoveState"),d=t("./fsm/StateMachine"),h=t("./fsm/JumpState"),y=t("./fsm/FallState"),_=t("./fsm/HurtState"),v=t("./evt/UIEvt"),m=t("./PlayerCollider"),g=t("./manager/CommonAudioManger"),O=cc._decorator,S=O.ccclass,E=O.property,b={};(function(t){t.idle="idle",t.move="move",t.jump="jump",t.fall="fall",t.hurt="hurt"})(a=o.AllPlayerState||(o.AllPlayerState={}));var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e.itemFeedbackInstance=null,e.liveNum=6,e.currSpeed=300,e.jumpVal=500,e.sp=new cc.Vec2(0,0),e.useDoubleJump=!1,e}return r(e,t),e.prototype.onEnable=function(){b={}},e.prototype.onLoad=function(){this.heroState="stand",l.default.getInstance().on(l.default.TYPE_EVT.rightBtn,this.rightBtnTouchStartHandler,this),l.default.getInstance().on(l.default.TYPE_EVT.leftBtn,this.leftBtnTouchStartHandler,this),l.default.getInstance().on(l.default.TYPE_EVT.jumpBtn,this.jumpBtnTouchStartHandler,this),l.default.getInstance().on(l.default.TYPE_EVT.reloadBtn,this.reloadBtnTouchStartHandler,this),this.createPoolItemFeedback()},e.prototype.offCtrlHandler=function(){b={},l.default.getInstance().off(l.default.TYPE_EVT.rightBtn,this.rightBtnTouchStartHandler,this),l.default.getInstance().off(l.default.TYPE_EVT.leftBtn,this.leftBtnTouchStartHandler,this),l.default.getInstance().off(l.default.TYPE_EVT.jumpBtn,this.jumpBtnTouchStartHandler,this),l.default.getInstance().off(l.default.TYPE_EVT.reloadBtn,this.reloadBtnTouchStartHandler,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.keyDownHandler),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.keyUpHandler)},e.prototype.start=function(){this.playerCollider=this.node.getChildByName("BoxCollider").getComponent(m.default),this.playerCollider.init(this.playerColliderFun,this),this.animation=this.getComponent(cc.Animation),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.keyDownHandler),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.keyUpHandler),this.isHurt=!1,v.default.getInstance().emit(v.default.PLAYER_LIFE_INIT,this.liveNum),this.stateMachine=new d.StateMachine(a.idle,{idle:new u.IdleState,move:new f.MoveState,jump:new h.JumpState,fall:new y.FallState,hurt:new _.HurtState},b,this)},e.prototype.playerColliderFun=function(t){var e,o,n=this;e=i.default.tagEnemys.indexOf(t.tag)>=0,"fall"==this.stateMachine.currState?e&&(cc.log(t.node.parent),(o=t.node.parent.getComponent(p.default))&&(o.death(),o.test()),this.jump()):e&&(this.stateMachine.transition(a.hurt),this.isHurt=!0,(o=t.node.parent.getComponent(p.default))&&(this.liveNum-=o.attackVal,cc.log("enemyScript attackVal:",o.attackVal,this.liveNum),v.UIEvtIntance.emit(v.default.PLAYER_LIFE_CHANGE,this.liveNum)),this.liveNum<=0?(this.isGameOver=!0,this.offCtrlHandler(),this.scheduleOnce(function(){cc.log("game fail"),n.node.emit(i.default.GAME_FAIL)},1)):cc.director.getScheduler().schedule(this.closeHurt,this,.5))},e.prototype.reloadBtnTouchStartHandler=function(){cc.director.loadScene("TestTiledMap")},e.prototype.jumpBtnTouchStartHandler=function(t){t.currentTarget.name;var e=t.type;if(e==cc.Node.EventType.TOUCH_START){var o=cc.macro.KEY.space;b[o]=1}else e!=cc.Node.EventType.TOUCH_END&&e!=cc.Node.EventType.TOUCH_CANCEL||(o=cc.macro.KEY.space,b[o]=0)},e.prototype.leftBtnTouchStartHandler=function(t){t.currentTarget.name;var e=t.type;if(e==cc.Node.EventType.TOUCH_START){var o=cc.macro.KEY.left;b[o]=1}else e!=cc.Node.EventType.TOUCH_END&&e!=cc.Node.EventType.TOUCH_CANCEL||(o=cc.macro.KEY.left,b[o]=0)},e.prototype.rightBtnTouchStartHandler=function(t){t.currentTarget.name;var e=t.type;if(e==cc.Node.EventType.TOUCH_START){var o=cc.macro.KEY.right;b[o]=1}else e!=cc.Node.EventType.TOUCH_END&&e!=cc.Node.EventType.TOUCH_CANCEL||(o=cc.macro.KEY.right,b[o]=0)},e.prototype.createPoolItemFeedback=function(){this.poolItemFeedback=new cc.NodePool;for(var t=0;t<5;++t){var e=this.createItemFeedback(t+1);this.poolItemFeedback.put(e)}},e.prototype.createItemFeedback=function(t){void 0===t&&(t=-1);var e=cc.instantiate(this.itemFeedbackInstance);return e.setScale(3),e.setAnchorPoint(.5,.5),e.getComponent(s.default).id=t,e},e.prototype.hurtFinshed=function(){},e.prototype.animationFinishedHandler=function(){},e.prototype.keyDownHandler=function(t){var e=t.keyCode;b[e]=1},e.prototype.keyUpHandler=function(t){var e=t.keyCode;b[e]=0},e.prototype.update=function(){this.stateMachine.step()},e.prototype.closeHurt=function(){cc.director.getScheduler().unscheduleAllForTarget(this),this.isHurt=!1},e.prototype.switchAnimation=function(t){this.currAnimationState!=t&&(this.currAnimationState=t,this.animation.play(this.currAnimationState))},e.prototype.playerRunStartHandler=function(){g.CAManager.play(i.default.SFX_step)},e.prototype.move=function(){if(!this.isHurt){var t=Math.abs(this.node.scaleX),e=this.node.getComponent(cc.RigidBody).linearVelocity;"stand"==this.heroState&&(b[cc.macro.KEY.left]||b[cc.macro.KEY.a]?(this.sp.x=-1,this.node.scaleX=-t,this.switchAnimation("run")):b[cc.macro.KEY.right]||b[cc.macro.KEY.d]?(this.sp.x=1,this.node.scaleX=t,this.switchAnimation("run")):(this.sp.x=0,this.switchAnimation("idle")),b[cc.macro.KEY.space]&&0==e.y&&(e.y=this.jumpVal)),this.sp.x?e.x=this.sp.x*this.currSpeed:e.x=0,e.y<0?this.switchAnimation("fall"):e.y>3&&this.switchAnimation("jump"),this.node.getComponent(cc.RigidBody).linearVelocity=e}},e.prototype.jump=function(){var t=this.node.getComponent(cc.RigidBody).linearVelocity;t.y=this.jumpVal,this.node.getComponent(cc.RigidBody).linearVelocity=t},e.prototype.hurt=function(){var t=this.node.getComponent(cc.RigidBody).linearVelocity;t.x=this.node.scaleX>0?-200:200,this.node.getComponent(cc.RigidBody).linearVelocity=t},e.prototype.onCollisionEnter=function(t){var e,o;if(e=i.default.tagItems.indexOf(t.tag)>=0,o=i.default.tagFinalCheckPoint.indexOf(t.tag)>=0,e){var n=void 0;this.poolItemFeedback.size()>0?n=this.poolItemFeedback.get():(console.log("%c pool over","color:#00f;"),n=cc.instantiate(this.createItemFeedback()));var r=t.node.getComponent("Item").val;this.node.emit(i.default.EVT_GET_ITEM,r,t.node,n)}else o&&(t.node.destroy(),this.isGameOver=!0,this.stateMachine.transition(a.idle),this.offCtrlHandler(),cc.log("game over"),this.node.emit(i.default.GAME_OVER))},e.prototype.putItemToPool=function(t){this.poolItemFeedback.put(t)},e.prototype.convertPosOtherToSelf=function(t,e){var o=t.convertToWorldSpace(cc.v2(0,0));return e.convertToNodeSpaceAR(o)},c([E(cc.Label)],e.prototype,"label",void 0),c([E],e.prototype,"text",void 0),c([E(cc.Prefab)],e.prototype,"itemFeedbackInstance",void 0),c([E(cc.Integer)],e.prototype,"liveNum",void 0),c([S],e)}(cc.Component);o.default=P,cc._RF.pop()},{"./PlayerCollider":"PlayerCollider","./data/GameData":"GameData","./evt/UIEvt":"UIEvt","./fsm/FallState":"FallState","./fsm/HurtState":"HurtState","./fsm/IdleState":"IdleState","./fsm/JumpState":"JumpState","./fsm/MoveState":"MoveState","./fsm/StateMachine":"StateMachine","./manager/CommonAudioManger":"CommonAudioManger","./ui/enemy/Enemy":"Enemy","./ui/item/ItemFeedBack":"ItemFeedBack","./user-ctrl/UserCtrlEvt":"UserCtrlEvt"}],SceneInfo:[function(t,e,o){"use strict";cc._RF.push(e,"e12a4aLZrlClqg7BUZ4jgTc","SceneInfo");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nextScene="",e}return r(e,t),e.prototype.start=function(){var t=this;cc.director.preloadScene(this.nextScene),this.scheduleOnce(function(){cc.director.loadScene(t.nextScene)},1)},c([p],e.prototype,"nextScene",void 0),c([i],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],SoundManager:[function(t,e,o){"use strict";cc._RF.push(e,"e53ac0/GtlFm63nLeV+nuHh","SoundManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SdManager=void 0;var a=cc._decorator,i=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgmAc=null,e.sfxArr=[],e.audioClips=[],e._clipDict={},e}var o;return r(e,t),o=e,e.getInstance=function(){return this.instance||(this.instance=new o),this.instance},e.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node),this.sfx=new cc.AudioClip,this.setBgm();for(var t=0;t<this.audioClips.length;t++){var e=this.audioClips[t];this._clipDict[e.name]=e}this.startCheck()},e.prototype.startCheck=function(){cc.game.on(cc.game.EVENT_HIDE,this.gameHideHandler,this),cc.game.on(cc.game.EVENT_SHOW,this.gameShowHandler,this)},e.prototype.gameShowHandler=function(){console.log("game show"),this.playBgm()},e.prototype.gameHideHandler=function(){console.log("game hide"),this.pauseBgm()},e.prototype.setBgm=function(){this.bgmAudioSr=new cc.AudioSource,this.bgmAudioSr.clip=this.bgmAc,this.bgmAudioSr.playOnLoad=!0,this.bgmAudioSr.loop=!0,this.bgmAudioSr.volume=1,this.bgmAudioSr.play()},e.prototype.pauseBgm=function(){this.bgmAudioSr.pause()},e.prototype.start=function(){},e.prototype.playBgm=function(){this.bgmAudioSr.play()},e.prototype.playSfx=function(t){cc.log("sd manager:",this._clipDict);var e=this._clipDict[t];void 0!==e&&cc.audioEngine.playEffect(e,!1)},e.sfx_jump="jump",c([p(cc.AudioClip)],e.prototype,"bgmAc",void 0),c([p([cc.AudioClip])],e.prototype,"sfxArr",void 0),c([p([cc.AudioClip])],e.prototype,"audioClips",void 0),o=c([i],e)}(cc.Component);o.default=l,o.SdManager=l.getInstance(),cc._RF.pop()},{}],StartBtnManager:[function(t,e,o){"use strict";cc._RF.push(e,"0316cSL8QdE+KdySP25pa8o","StartBtnManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nextScene="",e}return r(e,t),e.prototype.start=function(){cc.director.preloadScene(this.nextScene)},e.prototype.switchScene=function(){cc.director.loadScene(this.nextScene)},c([p],e.prototype,"nextScene",void 0),c([i],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],StateBase:[function(t,e,o){"use strict";cc._RF.push(e,"a28bbz+IK9MsaTtFAgqLZpG","StateBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.StateBase=void 0;var n=function(){function t(){}return t.prototype.enter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.execute=function(){},t}();o.StateBase=n,cc._RF.pop()},{}],StateMachine:[function(t,e,o){"use strict";cc._RF.push(e,"ae79054CrRM0bMSP55NS2EC","StateMachine");var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var c=arguments[e],a=0,i=c.length;a<i;a++,r++)n[r]=c[a];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.StateMachine=void 0;var r=function(){function t(t,e){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];this.stateArgs=[],this.currState=null,this.initialState=t,this.possibleStates=e,this.stateArgs=o;for(var r=0,c=Object.values(this.possibleStates);r<c.length;r++)c[r].stateMachine=this}return t.prototype.step=function(){var t,e;null===this.currState&&(this.currState=this.initialState,(t=this.possibleStates[this.currState]).enter.apply(t,this.stateArgs)),(e=this.possibleStates[this.currState]).execute.apply(e,this.stateArgs)},t.prototype.transition=function(t){for(var e,o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];this.currState=t,(e=this.possibleStates[this.currState]).enter.apply(e,n(this.stateArgs,o))},t}();o.StateMachine=r,cc._RF.pop()},{}],UIEvt:[function(t,e,o){"use strict";cc._RF.push(e,"24504kB2k5F4LniRDdXL2cz","UIEvt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.UIEvtIntance=void 0;var a=cc._decorator,i=a.ccclass,p=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,e.getInstance=function(){return this.instance||(this.instance=new o),this.instance},e.PLAYER_LIFE_INIT="player_life_init",e.PLAYER_LIFE_CHANGE="player_life_change",o=c([i],e)}(cc.EventTarget));o.default=p,o.UIEvtIntance=p.getInstance(),cc._RF.pop()},{}],UserCtrlEvt:[function(t,e,o){"use strict";cc._RF.push(e,"730f27diP9KxpxE4qDtY6PK","UserCtrlEvt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,p=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,e.prototype.start=function(){},e.getInstance=function(){return this.instance||(this.instance=new o),this.instance},e.TYPE_EVT={leftBtn:"left",rightBtn:"right",jumpBtn:"jump",reloadBtn:"reload"},o=c([i],e)}(cc.EventTarget));o.default=p,cc._RF.pop()},{}],UserCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"e968fwXfStOIZplrPqVacUB","UserCtrl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(a=(c<3?r(a):c>3?r(e,o,a):r(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./UserCtrlEvt"),i=cc._decorator,p=i.ccclass,l=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftBtn=null,e.rightBtn=null,e.jumpBtn=null,e.reloadBtn=null,e}return r(e,t),e.prototype.onLoad=function(){this.reloadBtn.node.active=!1},e.prototype.initEvt=function(){},e.prototype.start=function(){this.leftBtn.node.on(cc.Node.EventType.TOUCH_START,this.btnTouchStartHandler,this),this.leftBtn.node.on(cc.Node.EventType.TOUCH_END,this.btnTouchEndHandler,this),this.leftBtn.node.on(cc.Node.EventType.TOUCH_CANCEL,this.btnTouchEndHandler,this),this.rightBtn.node.on(cc.Node.EventType.TOUCH_START,this.btnTouchStartHandler,this),this.rightBtn.node.on(cc.Node.EventType.TOUCH_END,this.btnTouchEndHandler,this),this.rightBtn.node.on(cc.Node.EventType.TOUCH_CANCEL,this.btnTouchEndHandler,this),this.jumpBtn.node.on(cc.Node.EventType.TOUCH_START,this.btnTouchStartHandler,this),this.jumpBtn.node.on(cc.Node.EventType.TOUCH_END,this.btnTouchEndHandler,this),this.jumpBtn.node.on(cc.Node.EventType.TOUCH_CANCEL,this.btnTouchEndHandler,this),this.reloadBtn.node.on(cc.Node.EventType.TOUCH_START,this.btnTouchStartHandler,this),this.reloadBtn.node.on(cc.Node.EventType.TOUCH_END,this.btnTouchEndHandler,this),this.reloadBtn.node.on(cc.Node.EventType.TOUCH_CANCEL,this.btnTouchEndHandler,this)},e.prototype.btnTouchStartHandler=function(t){var e=t.currentTarget.name;a.default.getInstance().emit(a.default.TYPE_EVT[e],t)},e.prototype.btnTouchEndHandler=function(t){var e=t.currentTarget.name;a.default.getInstance().emit(a.default.TYPE_EVT[e],t)},c([l(cc.Button)],e.prototype,"leftBtn",void 0),c([l(cc.Button)],e.prototype,"rightBtn",void 0),c([l(cc.Button)],e.prototype,"jumpBtn",void 0),c([l(cc.Button)],e.prototype,"reloadBtn",void 0),c([p],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./UserCtrlEvt":"UserCtrlEvt"}],use_reversed_rotateBy:[function(t,e){"use strict";cc._RF.push(e,"9ca018z4FJPxYOZY9ZBd4Xj","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}]},{},["Demo","GameScene","Player","PlayerCollider","GameData","GlobalEvt","UIEvt","FallState","HurtState","IdleState","JumpState","MoveState","StateBase","StateMachine","CameraManager","CheckWebPageHide","CommonAudioManger","PlayerLifeManager","StartBtnManager","GameStart","SceneInfo","Heart","Enemy","Frog","Item","ItemFeedBack","UserCtrl","UserCtrlEvt","Follow","GameUtil","SoundManager","use_reversed_rotateBy"]);