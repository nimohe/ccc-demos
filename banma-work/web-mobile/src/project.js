window.__require=function e(t,o,n){function r(i,s){if(!o[i]){if(!t[i]){var c=i.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+i+"'")}i=c}var l=o[i]={exports:{}};t[i][0].call(l.exports,function(e){return r(t[i][1][e]||e)},l,l.exports,e,t,o,n)}return o[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e,t,o){t.exports={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGSYS:12,SSL_OP_ALL:2147486719,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:32,SSL_OP_MICROSOFT_SESS_ID_BUG:1,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:536870912,SSL_OP_NETSCAPE_CHALLENGE_BUG:2,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:1073741824,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:8,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:16777216,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_SINGLE_DH_USE:1048576,SSL_OP_SINGLE_ECDH_USE:524288,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:128,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:512,SSL_OP_TLS_D5_BUG:256,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_ECDH:16,ENGINE_METHOD_ECDSA:32,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_STORE:256,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_UDP_REUSEADDR:4}},{}],2:[function(e,t,o){var n,r,a=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function u(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}})();var l,d=[],p=!1,g=-1;function m(){p&&l&&(p=!1,l.length?d=l.concat(d):g=-1,d.length&&h())}function h(){if(!p){var e=c(m);p=!0;for(var t=d.length;t;){for(l=d,d=[];++g<t;)l&&l[g].run();g=-1,t=d.length}l=null,p=!1,u(e)}}function f(e,t){this.fun=e,this.array=t}function _(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];d.push(new f(e,t)),1!==d.length||p||c(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=_,a.addListener=_,a.once=_,a.off=_,a.removeListener=_,a.removeAllListeners=_,a.emit=_,a.prependListener=_,a.prependOnceListener=_,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],CgMessageFramework:[function(e,t,o){"use strict";cc._RF.push(t,"f2a5diAMV9HfoTIMXJIRUCK","CgMessageFramework"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/data/GlobalData"),r=e("../network/socket/CgSocketFrameWork"),a=e("../../plugin/tuoKeYun/TuoKeYunFramework"),i=e("../../utils/GameUtil"),s=e("../../common/log/Log"),c=e("../model/UserModel"),u=e("../model/RoomModel"),l=function(){function e(){this._messageSender=null}return Object.defineProperty(e.prototype,"messageSender",{get:function(){return this._messageSender||(n.GLOBAL.env_debug?this._messageSender=r.default.getInstance():this._messageSender=a.default.getInstance()),this._messageSender},set:function(e){this._messageSender=e},enumerable:!0,configurable:!0}),e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.teacherStart=function(e){void 0===e&&(e={}),this.checkIsCanSendMessage()&&this.messageSender.sendCustomMessage("nova.teacher.start",e)},e.prototype.teacherEndGame=function(e){void 0===e&&(e={}),this.checkIsCanSendMessage()&&(c.UserMgr.userInfo.setGameEndTime(),c.UserMgr.userInfo.uploadAnswer({moved:c.UserMgr.userInfo.answerInfo.moved,isAnswer:c.UserMgr.userInfo.answerInfo.isAnswer}),this.messageSender.sendCustomMessage("",e))},e.prototype.teacherClickBase=function(e){void 0===e&&(e={}),this.checkIsCanSendMessage()&&this.messageSender.sendCustomMessage("nova.teacher.clickBase",e)},e.prototype.checkIsCanSendMessage=function(){return i.GameUtil.isTeacher()||n.GLOBAL.env_debug},e.prototype.studentAnswer=function(e){i.GameUtil.isTeacher()||(c.UserMgr.userInfo.uploadRankDataWhenFinish(),c.UserMgr.userInfo.setGameStatus({status:1,currTryPage:u.RoomMgr.roomInfo.tryPageNumObj["page"+u.RoomMgr.roomInfo.curPageIndex]}))},e.prototype.studentWrongAnswer=function(){s.default.debug("\u5b66\u751f\u7b54\u9898\u5931\u8d25"),i.GameUtil.isTeacher()||c.UserMgr.userInfo.uploadRankDataWhenWrongAnswer()},e._instance=null,e}();o.default=l,o.MessageSender=l.getInstance(),cc._RF.pop()},{"../../common/log/Log":"Log","../../game/data/GlobalData":"GlobalData","../../plugin/tuoKeYun/TuoKeYunFramework":"TuoKeYunFramework","../../utils/GameUtil":"GameUtil","../model/RoomModel":"RoomModel","../model/UserModel":"UserModel","../network/socket/CgSocketFrameWork":"CgSocketFrameWork"}],CgSocketFrameWork:[function(e,t,o){"use strict";cc._RF.push(t,"d6654C8QbZCBZmZP3NveJRD","CgSocketFrameWork"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../model/UserModel"),r=e("./SocketManager"),a=e("../../constant/GameConstant"),i=e("../../model/RoomModel"),s=e("../../../utils/GameUtil"),c=e("../../../game/data/GlobalData"),u=e("../../../plugin/tuoKeYun/SdkMessageType"),l=function(){function e(){}return e.prototype.sendCustomMessage=function(t,o){e.sendMsg2Group(t,o)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.sendMsg2Server=function(e,t,o){void 0===t&&(t={}),void 0===o&&(o=0),this.sendMsg2Group(e,t,null,o)},e.getGroupNumbers=function(e){void 0===e&&(e=n.UserMgr.userInfo.groupId);var t={groupId:n.UserMgr.userInfo.groupId};r.SocketMgr.sendJson("getGroupMember",t)},e.sendMsg2SingleOrMultiple=function(e,t,o,n){void 0===o&&(o={}),void 0===n&&(n=0);for(var a=0,i=t;a<i.length;a++){var s=i[a];s.role=this.clientRoleType2Server(s.role)}var c={toUidData:t,msg:JSON.stringify({msgType:e,params:o,scope:n})};r.SocketMgr.sendJson("sendMsg",c)},e.getGroupCommon=function(){var e={groupId:n.UserMgr.userInfo.groupId};r.SocketMgr.sendJson("getGroupCommon",e)},e.syncSelfInfoInGroup=function(e,t){void 0===e&&(e="");var o=n.UserMgr.userInfo;o.curGameInfo=e;var a={groupId:n.UserMgr.userInfo.groupId,msg:o.toString()};r.SocketMgr.sendJson("setCommon",a)},e.getSelfInfoInGroup=function(e,t){t||0===t||(t=n.UserMgr.userInfo.roleType);var o={groupId:i.RoomMgr.roomInfo.groupId,role:this.clientRoleType2Server(t),uid:e};r.SocketMgr.sendJson("getCommon",o)},e.clearSelfInfoInGrouop=function(){n.UserMgr.userInfo.curGameInfo="";var e={groupId:i.RoomMgr.roomInfo.groupId,msg:n.UserMgr.userInfo.toString()};r.SocketMgr.sendJson("setCommon",e)},e.setGroupCommon=function(){if(c.GLOBAL.isLoginFinish){if(s.GameUtil.isTeacher()){var e={groupId:i.RoomMgr.roomInfo.groupId,msg:i.RoomMgr.roomInfo.toString()};r.SocketMgr.sendJson("setGroupCommon",e)}}else console.warn("\u767b\u5f55\u5b8c\u6210\u4e86\uff0c\u8001\u5e08\u8fd8\u5728\u52a0\u8f7d\u4e2d")},e.prototype.sendPageChange=function(e){this.sendCustomMessage(u.SdkMessageType.ON_PAGE_CHANGE,{toPage:e})},e.prototype.sendPageChangeSuccess=function(e){},e.sendMsg2Group=function(e,t,o,a){void 0===t&&(t={}),void 0===a&&(a=0),t.senderId=n.UserMgr.userInfo.uid,t.role=this.clientRoleType2Server(n.UserMgr.userInfo.roleType);var i={groupId:n.UserMgr.userInfo.groupId,msg:JSON.stringify({msgType:e,params:t,scope:a})};o&&(i.roleType=o),r.SocketMgr.sendJson("sendGroupMsg",i)},e.clientRoleType2Server=function(e){return e||0===e||(e=n.UserMgr.userInfo.roleType),e==a.H5RoleType.TEACHER?2:e==a.H5RoleType.STUDENT||e==a.H5RoleType.AIStudent?1:0},e.serverRoleType2Client=function(e){return 2==e?a.H5RoleType.TEACHER:1==e?a.H5RoleType.STUDENT:-1},e._instance=null,e}();o.default=l,cc._RF.pop()},{"../../../game/data/GlobalData":"GlobalData","../../../plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../../../utils/GameUtil":"GameUtil","../../constant/GameConstant":"GameConstant","../../model/RoomModel":"RoomModel","../../model/UserModel":"UserModel","./SocketManager":"SocketManager"}],CgSocketMessageType:[function(e,t,o){"use strict";cc._RF.push(t,"da62ar+wcRLm7guRwK8w/ZB","CgSocketMessageType"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.CG_JOIN_GROUP_SUCCESS="JOIN_GROUP_SUCCESS",e.CG_CHANGE_PAGE="CG_CHANGE_PAGE",e.CG_TEACHER_START_GAME="CG_TEACHER_START_GAME",e.CG_UPDATE_GAME_STATE="CG_UPDATE_GAME_STATE",e.CG_ITEM_DRAG_START="CG_ITEM_DRAG_START",e.CG_ITEM_DRAG_MOVE="CG_ITEM_DRAG_MOVE",e.CG_ITEM_DRAG_END="CG_ITEM_DRAG_END",e.CG_USER_LEAVE="CG_USER_LEAVE",e.CG_LOGIN_SUCCESS="CG_LOGIN_SUCCESS",e.CG_SEND_KE_JIAN_MESSAGE="CG_SEND_KE_JIAN_MESSAGE",e.CG_ANSWER_STATUS="CG_ANSWER_STATUS"}(o.CG_Socket_Message_Type||(o.CG_Socket_Message_Type={})),cc._RF.pop()},{}],ClassOver:[function(e,t,o){"use strict";cc._RF.push(t,"b4df5Po++ZDur2/nrTdGqiQ","ClassOver"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Script/ui/PanelBase"),r=cc._decorator,a=r.ccclass,i=r.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.classOverAnimation=null,t}return __extends(t,e),t.prototype.start=function(){var e=this;this.classOverAnimation.setCompleteListener(function(t){"nextclass"==t.animation.name&&e.classOverAnimation.setAnimation(0,"idle",!0)}),this.classOverAnimation.setAnimation(0,"nextclass",!1)},__decorate([i(sp.Skeleton)],t.prototype,"classOverAnimation",void 0),t=__decorate([a],t)}(n.default);o.default=s,cc._RF.pop()},{"../../../Script/ui/PanelBase":"PanelBase"}],CocosMessageHandler:[function(e,t,o){"use strict";cc._RF.push(t,"8b647D0raJJHKqa57pxbh0o","CocosMessageHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../event/EventCenter"),r=e("../../../utils/GameUtil"),a=e("../../../common/log/Log"),i=e("../../model/RoomModel"),s=e("../../../manager/PanelManager"),c=e("../../../plugin/tuoKeYun/TuoKeYunFramework"),u=e("../../../plugin/tuoKeYun/SdkMessageType"),l=e("../../model/UserModel"),d=e("../../constant/GameConstant"),p=e("../../../game/data/GlobalData"),g=function(){function t(){}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.onHandleTeacherStart=function(t){var o=!0;if(s.PanelManager.getInstance().curPanelBase&&s.PanelManager.getInstance().curPanelBase.gameData){var a=s.PanelManager.getInstance().curPanelBase.gameData.name;o=!!JSON.parse(JSON.stringify(e(a))).crossCutDown}if(i.RoomMgr.roomInfo.gameState=d.GameState.BEGIN,l.UserMgr.userInfo.setStartTime(),p.GLOBAL.isLoginFinish&&!s.PanelManager.getInstance().isLoadingPage){var g=r.GameUtil.getStore("gamestatus")?JSON.parse(r.GameUtil.getStore("gamestatus")):null;console.debug("wuqd----- \u5904\u7406\u8001\u5e08\u70b9\u51fb\u5f00\u59cb\u6e38\u620f \u672c\u5730\u4fe1\u606f "+JSON.stringify(g));var m=i.RoomMgr.roomInfo.tryPageNumObj,h=i.RoomMgr.roomInfo.curPageIndex;console.debug("wuqd----- \u5904\u7406\u8001\u5e08\u70b9\u51fb\u5f00\u59cb\u6e38\u620f \u8001\u5e08\u4fe1\u606f "+JSON.stringify(m)),console.debug("\u5f53\u524d\u9875 \uff1a"+h),g&&m["page"+h]?m["page"+h]!=g.currTryPage?(console.debug("\u5f00\u59cb\u65f6\u5b66\u751f\u4e0a\u4f20\u4e00\u6b21\u6570\u636e\uff0c\u8868\u793a\u5b66\u751f\u6ca1\u6709\u64cd\u4f5c\u8bfe\u4ef6"),l.UserMgr.userInfo.uploadAnswer({tryTime:0,moved:!1,isAnswer:!1}),console.debug("111111"),l.UserMgr.userInfo.setGameStatus({status:0,currTryPage:i.RoomMgr.roomInfo.tryPageNumObj["page"+i.RoomMgr.roomInfo.curPageIndex]})):0==g.status&&(console.debug("22222222222222"),l.UserMgr.userInfo.uploadAnswer({tryTime:0,moved:!1,isAnswer:!1}),l.UserMgr.userInfo.setGameStatus({status:0,currTryPage:i.RoomMgr.roomInfo.tryPageNumObj["page"+i.RoomMgr.roomInfo.curPageIndex]})):(console.debug("33333333333333"),l.UserMgr.userInfo.setGameStatus({status:0,currTryPage:i.RoomMgr.roomInfo.tryPageNumObj["page"+i.RoomMgr.roomInfo.curPageIndex]})),o?setTimeout(function(){n.EVT.emit("gameBegin")},1800):r.GameUtil.showTimeOut(null),l.UserMgr.userInfo.roleType!=d.H5RoleType.STUDENT&&l.UserMgr.userInfo.roleType!=d.H5RoleType.AIStudent||s.PanelManager.getInstance().isLoadingPage||c.SdkFramework.sendCocosMessage2Client(u.SdkMessageType.REQUEST_MASK_AUTHORIZE_PRIVILEGE,{show:!1})}},t.prototype.onHandleTeacherEndGame=function(){l.UserMgr.userInfo.roleType!=d.H5RoleType.STUDENT&&l.UserMgr.userInfo.roleType!=d.H5RoleType.AIStudent||c.SdkFramework.sendCocosMessage2Client(u.SdkMessageType.REQUEST_MASK_AUTHORIZE_PRIVILEGE,{show:!0}),i.RoomMgr.roomInfo.gameState=d.GameState.OVER,n.EVT.emit("teacher_click_game_end")},t.prototype.handlerTeacherClickBase=function(e){a.default.debug("handlerTeacherClickBase :"+JSON.stringify(e)),n.EVT.emit("baseClick",e.cmds.name),e.name.msgType&&(console.debug("wuqd------  msg.name.msgType "+e.cmds.name),n.EVT.emit(e.name.msgType,e.cmds.name))},t.prototype.handlerTeacherChangeTryPage=function(e){l.UserMgr.userInfo.roleType!=d.H5RoleType.STUDENT&&l.UserMgr.userInfo.roleType!=d.H5RoleType.AIStudent||(i.RoomMgr.roomInfo.tryPageNumObj=e.value)},t.prototype.handlerTeacherFlopDrag=function(e){n.EVT.emit(e.name.name,e.cmds)},t.prototype.onHandleJumpPage=function(e){if(!p.GLOBAL.isLoginFinish)return a.default.warning("\u6536\u5230\u5207\u9875\u7684\u65f6\u5019: \u8fd8\u6ca1\u6709\u8d70\u5b8c\u767b\u5f55"),void(i.RoomMgr.roomInfo.curPageIndex=e.toPage);var t=e.toPage,o=s.PanelManager.getInstance();if(o.isLoadingPage)i.RoomMgr.roomInfo.curPageIndex=e.toPage;else{if(o.curPanelBase&&o.curPanelBase.pageIndex==t)return void a.default.debug("\u6ca1\u6709\u518d\u52a0\u8f7d\u8d44\u6e90\u4e2d \u5f53\u524d\u9875\u7801\u76f8\u540c panelMgr.curPanelBase.pageIndex  "+o.curPanelBase.pageIndex);this._upLoadAnswerInfoWhenChangePage(),i.RoomMgr.roomInfo.curPageIndex=e.toPage,o.changeGameByPageIndex(i.RoomMgr.roomInfo.curPageIndex,null,function e(t){a.default.warning("\u8bfe\u4ef6\u52a0\u8f7d\u5b8c\u6210\u56de\u8c03 pageIndex "+t+"  RoomMgr.roomInfo.curPageIndex "+i.RoomMgr.roomInfo.curPageIndex),t!=i.RoomMgr.roomInfo.curPageIndex?(a.default.warning("\u53d1\u73b0\u4e0d\u662f\u6700\u65b0\u7684\u9875\u7801 \u6267\u884c\u52a0\u8f7d "+i.RoomMgr.roomInfo.curPageIndex),o.changeGameByPageIndex(i.RoomMgr.roomInfo.curPageIndex,null,e)):p.GLOBAL.isLoginFinish=!0,r.GameUtil.sendChangePageSuccess(t)})}},t.prototype._upLoadAnswerInfoWhenChangePage=function(){var t=e("_games").games[i.RoomMgr.roomInfo.curPageIndex-1];t.type&&t.type==d.GameSyncTypeEnum.DISTRIBUTE&&(l.UserMgr.userInfo.setGameEndTime(),l.UserMgr.userInfo.uploadAnswer({moved:l.UserMgr.userInfo.answerInfo.moved,isAnswer:l.UserMgr.userInfo.answerInfo.isAnswer})),l.UserMgr.userInfo.clearAnswerInfo()},t.prototype.registerEvent=function(){n.EVT.on("nova.teacher.start",this.onHandleTeacherStart,this),n.EVT.on("nova.teacher.endGame",this.onHandleTeacherEndGame,this),n.EVT.on("nova.teacher.clickBase",this.handlerTeacherClickBase,this),n.EVT.on("nova.teacher.flopDrag",this.handlerTeacherFlopDrag,this),n.EVT.on("onJumpPage",this.onHandleJumpPage,this),n.EVT.on("changeTryPage",this.handlerTeacherChangeTryPage,this)},t._instance=null,t}();o.CocosMessageHandler=g,cc._RF.pop()},{"../../../common/log/Log":"Log","../../../event/EventCenter":"EventCenter","../../../game/data/GlobalData":"GlobalData","../../../manager/PanelManager":"PanelManager","../../../plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../../../plugin/tuoKeYun/TuoKeYunFramework":"TuoKeYunFramework","../../../utils/GameUtil":"GameUtil","../../constant/GameConstant":"GameConstant","../../model/RoomModel":"RoomModel","../../model/UserModel":"UserModel",_games:"_games"}],CocosMessageType:[function(e,t,o){"use strict";cc._RF.push(t,"cfdbexGMLpLcYokovfCh9Jd","CocosMessageType"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.on_handle_base_info="on_handle_base_info",e.on_login_finish="on_login_finish",e.on_teacher_click_func_btn="on_teacher_click_func_btn"}(o.CocosMessageType||(o.CocosMessageType={})),cc._RF.pop()},{}],CompA:[function(e,t,o){"use strict";cc._RF.push(t,"4fa1701zEVI9J2CSdLKPUgo","CompA"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property,i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.x=0,t.y=0,t.w=0,t.h=0,t}return __extends(t,e),__decorate([a()],t.prototype,"x",void 0),__decorate([a()],t.prototype,"y",void 0),__decorate([a()],t.prototype,"w",void 0),__decorate([a()],t.prototype,"h",void 0),t=__decorate([r],t)}(cc.Component);o.default=i,cc._RF.pop()},{}],CompB:[function(e,t,o){"use strict";cc._RF.push(t,"11b59UyizZLBJGV3eJxYEqt","CompB"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modifyCo=!1,t.coustorDetail=null,t}return __extends(t,e),t=__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],EventCenter:[function(e,t,o){"use strict";cc._RF.push(t,"037460pU3RJDbChH482RiDB","EventCenter"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t._instance=null,t}(cc.EventTarget);o.EventCenter=n,o.EVT=n.getInstance(),cc._RF.pop()},{}],FirstPageButton:[function(e,t,o){"use strict";cc._RF.push(t,"84b6eHs1rFA6qlUjK3nNMIA","FirstPageButton"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../TeacherButton"),r=cc._decorator.ccclass,a=e("../../../Script/framework/model/RoomModel"),i=e("../../../Script/framework/message/CgMessageFramework"),s=e("../../../Script/utils/GameUtil"),c=e("../../../Script/manager/PanelManager"),u=e("../../../Script/event/EventCenter"),l=e("../../../Script/plugin/tuoKeYun/SdkMessageType"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),1==a.RoomMgr.roomInfo.curPageIndex?this.disBtn():this.bindBtnEvent()},t.prototype.onBtnClick=function(){e.prototype.onBtnClick.call(this),a.RoomMgr.roomInfo.curPageIndex<=1||s.GameUtil.isTeacher()&&(a.RoomMgr.roomInfo.curPageIndex=1,a.RoomMgr.roomInfo.answerRecord="",i.MessageSender.messageSender.sendPageChange(a.RoomMgr.roomInfo.curPageIndex),c.PanelManager.getInstance().changeGameByPageIndex(a.RoomMgr.roomInfo.curPageIndex),u.EVT.emit(l.SdkMessageType.ON_PAGE_CHANGE,{toPage:a.RoomMgr.roomInfo.curPageIndex}))},t=__decorate([r],t)}(n.TeacherButton);o.FirstPageButton=d,cc._RF.pop()},{"../../../Script/event/EventCenter":"EventCenter","../../../Script/framework/message/CgMessageFramework":"CgMessageFramework","../../../Script/framework/model/RoomModel":"RoomModel","../../../Script/manager/PanelManager":"PanelManager","../../../Script/plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../../../Script/utils/GameUtil":"GameUtil","../TeacherButton":"TeacherButton"}],FoGuangComp:[function(e,t,o){"use strict";cc._RF.push(t,"98d59X+e89IeYLwFIa8Xc51","FoGuangComp"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property,i=n.executeInEditMode,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initPos=cc.v3(),t.endPos=cc.v3(),t.iconInitScale=1,t.icon2Scale=1,t.iconSpriteFrame=null,t.audioEffect=null,t._playing=!1,t._speed=30,t._foGuangNode=null,t._iconSprite=null,t}return __extends(t,e),t.prototype.onLoad=function(){this._foGuangNode=cc.find("fouguang",this.node),this._iconSprite=cc.find("fouguang/icon",this.node).getComponent(cc.Sprite),this.initPos&&(this._foGuangNode.position=this.initPos)},t.prototype.onEnable=function(){this.iconSpriteFrame&&(this._iconSprite.spriteFrame=this.iconSpriteFrame),this._playing=!0},t.prototype.update=function(e){this._playing&&(this._foGuangNode.angle+=this._speed*e,this._iconSprite.node.angle=-this._foGuangNode.angle)},t.prototype.playAnimation=function(){cc.tween(this._foGuangNode).to(.5,{position:this.endPos}).start(),cc.tween(this._iconSprite.node).to(.5,{scale:this.icon2Scale}).start(),this.audioEffect&&cc.audioEngine.playEffect(this.audioEffect,!1)},__decorate([a({tooltip:"\u56fe\u6807\u521a\u5f00\u59cb\u51fa\u73b0\u7684\u4f4d\u7f6e"})],t.prototype,"initPos",void 0),__decorate([a({tooltip:"\u56fe\u6807\u521a\u5f00\u59cb\u51fa\u73b0\u7684\u4f4d\u7f6e"})],t.prototype,"endPos",void 0),__decorate([a({tooltip:"\u56fe\u6807\u521d\u59cb\u7684\u5927\u5c0f"})],t.prototype,"iconInitScale",void 0),__decorate([a({tooltip:"\u56fe\u6807\u521d\u59cb\u7684\u5927\u5c0f"})],t.prototype,"icon2Scale",void 0),__decorate([a(cc.SpriteFrame)],t.prototype,"iconSpriteFrame",void 0),__decorate([a({type:cc.AudioClip,tooltip:"\u6210\u529f\u7684\u97f3\u6548"})],t.prototype,"audioEffect",void 0),t=__decorate([r,i],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],GameBeginButton:[function(e,t,o){"use strict";cc._RF.push(t,"a93c0SpRkBE7pFn5exllT1C","GameBeginButton"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../TeacherButton"),r=e("../../../Script/manager/PanelManager"),a=e("../../../Script/utils/GameUtil"),i=e("../../../Script/framework/model/RoomModel"),s=e("../../../Script/framework/constant/GameConstant"),c=e("../../../Script/framework/message/CgMessageFramework"),u=cc._decorator.ccclass,l=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.prototype.onBtnClick=function(){t.prototype.onBtnClick.call(this);var o=r.PanelManager.getInstance().curPanelBase.gameData.name,n=JSON.parse(JSON.stringify(e(o)));n&&!n.crossCutDown?a.GameUtil.showTimeOut(!1):a.GameUtil.showTimeOut(!0),i.RoomMgr.roomInfo.gameState=s.GameState.BEGIN,i.RoomMgr.roomInfo.settryPageNumObj().then(function(e){c.MessageSender.teacherStart()}),this.disBtn(),this.activeOtherBtns(),this.disBtn()},o.prototype.activeOtherBtns=function(){var e=this.node.parent.getComponentInChildren("GameEndButton");e&&e.active()},o=__decorate([u],o)}(n.TeacherButton);o.GameBeginButton=l,cc._RF.pop()},{"../../../Script/framework/constant/GameConstant":"GameConstant","../../../Script/framework/message/CgMessageFramework":"CgMessageFramework","../../../Script/framework/model/RoomModel":"RoomModel","../../../Script/manager/PanelManager":"PanelManager","../../../Script/utils/GameUtil":"GameUtil","../TeacherButton":"TeacherButton"}],GameConstant:[function(e,t,o){"use strict";var n,r,a,i,s,c,u,l;cc._RF.push(t,"fecdaw1TqJMRIxZfATAZC0N","GameConstant"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.TEST=0]="TEST",e[e.ON_LINE=1]="ON_LINE",e[e.RELEASE=2]="RELEASE"}(n||(n={})),o.OperatingEnvironment=n,function(e){e[e.Test=-10]="Test",e[e.PAD=1]="PAD",e[e.PC=2]="PC",e[e.ANDROID=3]="ANDROID",e[e.IPHONE=4]="IPHONE"}(r||(r={})),o.ClientType=r,function(e){e[e.UNDEFINED=-1e4]="UNDEFINED",e[e.REVIEW=-1]="REVIEW",e[e.AIStudent=-2]="AIStudent",e[e.TEACHER=0]="TEACHER",e[e.ASSISTANT=1]="ASSISTANT",e[e.STUDENT=2]="STUDENT",e[e.LIVE=3]="LIVE",e[e.PATROL=4]="PATROL",e[e.EDITOR=1e4]="EDITOR",e[e.EDITOR_PREVIEW=10001]="EDITOR_PREVIEW"}(a||(a={})),o.H5RoleType=a,function(e){e[e.INIT=0]="INIT",e[e.MATCH=1]="MATCH",e[e.BEGIN=2]="BEGIN",e[e.OVER=3]="OVER"}(i||(i={})),o.GameState=i,function(e){e[e.SYNC=0]="SYNC",e[e.DISTRIBUTE=1]="DISTRIBUTE"}(s||(s={})),o.GameSyncTypeEnum=s,function(e){e[e.NORMLAL=20]="NORMLAL",e[e.FORWARD_CONCENTRATION=10]="FORWARD_CONCENTRATION",e[e.AFTER_CONCENTRATION=30]="AFTER_CONCENTRATION",e[e.BIG_GAME=40]="BIG_GAME"}(c||(c={})),o.CourseStepEnum=c,function(e){e[e.NOT=0]="NOT",e[e.HAVE=1]="HAVE"}(u||(u={})),o.AnswerTypeEnum=u,function(e){e[e.NOT_RELEVANT=0]="NOT_RELEVANT",e[e.RELEVANT=1]="RELEVANT"}(l||(l={})),o.KnowledgeTypeEnum=l,function(e){e[e.NORMLAL=0]="NORMLAL",e[e.NO_SUCCESS=1]="NO_SUCCESS",e[e.FIGHTING=2]="FIGHTING",e[e.GOOD=3]="GOOD",e[e.UU_NI_ZHEN_BANG=4]="UU_NI_ZHEN_BANG",e[e.ZAI_ZAI_SHUAI_DAI_LE=5]="ZAI_ZAI_SHUAI_DAI_LE",e[e.FEI_ER_HAO_LI_HAI=6]="FEI_ER_HAO_LI_HAI"}(o.SettlementAnimationType||(o.SettlementAnimationType={})),cc._RF.pop()},{}],GameCoreEvent:[function(e,t,o){"use strict";cc._RF.push(t,"c9d8bbqa9JDY7vekVS0A+mL","GameCoreEvent"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(t,o,n){void 0===o&&(o=null),void 0===n&&(n=!1);var r=e.call(this,t,n)||this;return r._data=null,r._data=o,r}return __extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.LOADING="LOADING",t.LOADING_PROGRESS="LOADING_PROGRESS",t.LOADING_COMPLETE="LOADING_COMPLETE",t.LOADING_FAIL="LOADING_FAIL",t.LOAD_RELOAD="GAME_LOAD_RELOAD",t.REPLACE_SCENE="REPLACE_SCENE",t}(cc.Event);o.default=n,cc._RF.pop()},{}],GameEndButton:[function(e,t,o){"use strict";cc._RF.push(t,"d142fiXSOBGgoDpBHP56ym8","GameEndButton"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../TeacherButton"),r=e("../../../Script/framework/model/RoomModel"),a=e("../../../Script/framework/constant/GameConstant"),i=cc._decorator.ccclass,s=e("../../../Script/utils/GameUtil"),c=e("../../../Script/framework/message/CgMessageFramework"),u=e("../../../Script/event/EventCenter"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.disBtn()},t.prototype.onBtnClick=function(){e.prototype.onBtnClick.call(this),r.RoomMgr.roomInfo.gameState=a.GameState.OVER,s.GameUtil.isTeacher()&&(c.MessageSender.messageSender.sendCustomMessage("nova.teacher.endGame",{}),u.EVT.emit("nova.teacher.endGame",{})),this.disBtn()},t.prototype.active=function(){},t=__decorate([i],t)}(n.TeacherButton);o.GameEndButton=l,cc._RF.pop()},{"../../../Script/event/EventCenter":"EventCenter","../../../Script/framework/constant/GameConstant":"GameConstant","../../../Script/framework/message/CgMessageFramework":"CgMessageFramework","../../../Script/framework/model/RoomModel":"RoomModel","../../../Script/utils/GameUtil":"GameUtil","../TeacherButton":"TeacherButton"}],GameInitComponent:[function(e,t,o){"use strict";cc._RF.push(t,"a33b9BJ+WNATp34Khwj6zJ5","GameInitComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator.ccclass,r=e("../loader/GameLoader"),a=e("../loader/GameLoadResDownloadStep"),i=e("../../event/GameCoreEvent"),s=e("../../event/EventCenter"),c=e("../loader/GameLoadHttpDataStep"),u=e("../../game/data/GlobalData"),l=e("../loader/GameLoadTestInitDataStep"),d=e("../log/Log"),p=e("../../manager/PanelManager"),g=e("../../framework/model/RoomModel"),m=e("../loader/GameLoadConnectSocket"),h=e("../../utils/GameUtil"),f=e("../../framework/model/UserModel"),_=e("../../framework/constant/GameConstant"),y=e("../loader/GameLoadInitDataStep"),S=e("../../framework/message/CgMessageFramework"),v=e("../../plugin/tuoKeYun/SdkMessageType"),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._gameLoader=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.onGameLoaderComplete()},t.prototype.setUp=function(){this._gameLoader||(this._gameLoader=new r.GameLoader,this._gameLoader.on(r.GameLoader.LOAD_PROGRESS,this.onGameLoaderProgress,this),this._gameLoader.on(r.GameLoader.LOAD_COMPLETE,this.onGameLoaderComplete,this),this._gameLoader.on(r.GameLoader.LOAD_ERROR,this.onGameLoaderError,this)),this.startLoader()},t.prototype.startLoader=function(){this.addLoaders(),this._gameLoader.start()},t.prototype.addLoaders=function(){this._gameLoader.removeSteps();var e=h.GameUtil.checkIsTeacherOrStudent();u.GLOBAL.env_debug?this._gameLoader.addStep(new l.GameLoadTestInitDataStep(20)):(this._gameLoader.addStep(new y.GameLoadInitDataStep(10)),e&&this._gameLoader.addStep(new c.GameLoadHttpDataStep(20))),this._gameLoader.addStep(new a.GameLoadResDownloadStep(70)),e&&f.UserMgr.userInfo.roleType!=_.H5RoleType.AIStudent&&this._gameLoader.addStep(new m.GameLoadConnectSocket(80))},t.prototype.onGameLoaderProgress=function(e){s.EVT.emit(i.default.LOADING_PROGRESS,e)},t.prototype.onGameLoaderComplete=function(){s.EVT.emit(i.default.LOADING_COMPLETE),this.enterGame()},t.prototype.onGameLoaderError=function(e){s.EVT.emit(i.default.LOADING_FAIL,e)},t.prototype.enterGame=function(){cc.director.loadScene("GameScene",function(){d.default.debug("\u5207\u6362\u573a\u666f\u6210\u529f "),S.MessageSender.messageSender.sendPageChange(g.RoomMgr.roomInfo.curPageIndex),p.PanelManager.getInstance().changeGameByPageIndex(g.RoomMgr.roomInfo.curPageIndex),s.EVT.emit(v.SdkMessageType.ON_PAGE_CHANGE,{toPage:g.RoomMgr.roomInfo.curPageIndex}),u.GLOBAL.isLoginFinish=!0})},t=__decorate([n],t)}(cc.Component);o.default=I,cc._RF.pop()},{"../../event/EventCenter":"EventCenter","../../event/GameCoreEvent":"GameCoreEvent","../../framework/constant/GameConstant":"GameConstant","../../framework/message/CgMessageFramework":"CgMessageFramework","../../framework/model/RoomModel":"RoomModel","../../framework/model/UserModel":"UserModel","../../game/data/GlobalData":"GlobalData","../../manager/PanelManager":"PanelManager","../../plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../../utils/GameUtil":"GameUtil","../loader/GameLoadConnectSocket":"GameLoadConnectSocket","../loader/GameLoadHttpDataStep":"GameLoadHttpDataStep","../loader/GameLoadInitDataStep":"GameLoadInitDataStep","../loader/GameLoadResDownloadStep":"GameLoadResDownloadStep","../loader/GameLoadTestInitDataStep":"GameLoadTestInitDataStep","../loader/GameLoader":"GameLoader","../log/Log":"Log"}],GameLoadConfigDownloadStep:[function(e,t,o){"use strict";cc._RF.push(t,"b8263gVH+FOy5HFxErIJQ/K","GameLoadConfigDownloadStep"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./GameLoadStep"),r=e("../../manager/ResourceManager"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(){r.RES.once(r.RES.DOWNLOAD_COMPLETE,this.onDownloadComplete,this),r.RES.once(r.RES.DOWNLOAD_FAIL,this.onDownloadFail,this),r.RES.on(r.RES.DOWNLOAD_PROGRESS,this.onDownloadProgress,this),r.RES.loadArr([])},t.prototype.onDownloadFail=function(e){this.onStepFail(e)},t.prototype.onDownloadComplete=function(e){var t=e;for(var o in t){var n=t[o];n instanceof Object&&(n=n.url);r.RES.get(n)}r.RES.off(r.RES.DOWNLOAD_PROGRESS,this.onDownloadProgress,this),this.onStepCompleted()},t.prototype.onDownloadProgress=function(e){var t=e;r.RES.get(t.url);this.onStepProgress(t.progress)},t}(n.GameLoadStep);o.GameLoadConfigDownloadStep=a,cc._RF.pop()},{"../../manager/ResourceManager":"ResourceManager","./GameLoadStep":"GameLoadStep"}],GameLoadConnectSocket:[function(e,t,o){"use strict";cc._RF.push(t,"b751dC/aFRKT4jngJlw5kgO","GameLoadConnectSocket"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./GameLoadStep"),r=e("../component/SocketComponent"),a=e("../../event/EventCenter"),i=e("../../framework/message/CocosMessageType"),s=function(e){function t(t){var o=e.call(this,t)||this;return a.EVT.on(i.CocosMessageType.on_login_finish,o.onLoginFinish,o),o}return __extends(t,e),t.prototype.execute=function(){e.prototype.execute.call(this);var t=cc.find("UICanvas"),o=t.getComponent(r.SocketComponent);o||(o=t.addComponent(r.SocketComponent)),o.connect2GameServer()},t.prototype.onLoginFinish=function(){this.onStepCompleted()},t}(n.GameLoadStep);o.GameLoadConnectSocket=s,cc._RF.pop()},{"../../event/EventCenter":"EventCenter","../../framework/message/CocosMessageType":"CocosMessageType","../component/SocketComponent":"SocketComponent","./GameLoadStep":"GameLoadStep"}],GameLoadHttpDataStep:[function(e,t,o){"use strict";cc._RF.push(t,"883cedjbB1MWrZk8sVP2ddb","GameLoadHttpDataStep"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./GameLoadStep"),r=e("../log/Log"),a=e("../../framework/http/api"),i=e("../../framework/model/UserModel"),s=e("../../game/data/GlobalData"),c=e("../../framework/constant/GameConstant"),u=e("../../framework/model/RoomModel"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._tryCount=1,t}return __extends(t,e),t.prototype.execute=function(){this.getServerConfig()},t.prototype.getServerConfig=function(){return __awaiter(this,void 0,void 0,function(){var e,t,o=this;return __generator(this,function(n){switch(n.label){case 0:return[4,a.getIsAlignWareFromDeviceType().catch(function(t){r.default.fatal("\u83b7\u53d6\u670d\u52a1\u5668\u914d\u7f6e\u4fe1\u606f\u7b2c "+o._tryCount+" \u6b21\u5931\u8d25: "+t+" "),o._tryCount<5&&(o._tryCount++,e=t,setTimeout(function(){o.getServerConfig()},500))})];case 1:return(t=n.sent())&&t.success?(r.default.debug("\u83b7\u53d6\u670d\u52a1\u5668\u7684\u914d\u7f6e\u4fe1\u606f "+JSON.stringify(t.data)),s.GLOBAL.serverConfig.isAlignware=!!t.data.alignWare,this.onStepProgress(30),this._tryCount=1,this.getUserDetailInfo()):this._tryCount>=5&&this.onStepFail("\u83b7\u53d6\u670d\u52a1\u5668\u7684\u914d\u7f6e\u4fe1\u606f \u7b2c "+this._tryCount+" \u6b21\u5931\u8d25 "+t+"  info : "+e),[2]}})})},t.prototype.getUserDetailInfo=function(){return __awaiter(this,void 0,void 0,function(){var e,t,o,n=this;return __generator(this,function(l){switch(l.label){case 0:return e=null,i.UserMgr.userInfo.roleType!=c.H5RoleType.TEACHER?[3,2]:[4,a.getTeacherInfo({teaId:i.UserMgr.userInfo.uid,lessonId:+s.GLOBAL.baseInfo.lessonId}).catch(function(e){r.default.fatal("\u83b7\u53d6\u8001\u5e08\u4e2a\u4eba\u4fe1\u606f\u7b2c "+n._tryCount+" \u6b21\u5931\u8d25: "+e+" "),t=e,n._tryCount<5&&(n._tryCount++,setTimeout(function(){n.getUserDetailInfo()},500))})];case 1:return e=l.sent(),[3,4];case 2:return[4,a.getStudentInfo({stuId:i.UserMgr.userInfo.uid,lessonId:+s.GLOBAL.baseInfo.lessonId}).catch(function(e){r.default.fatal("\u83b7\u53d6\u5b66\u751f\u4e2a\u4eba\u4fe1\u606f\u7b2c "+n._tryCount+" \u6b21\u5931\u8d25: "+e+" "),t=e,n._tryCount<5&&(n._tryCount++,setTimeout(function(){n.getUserDetailInfo()},500))})];case 3:e=l.sent(),l.label=4;case 4:return e&&e.success?(this.onStepProgress(60),o=e.data,i.UserMgr.userInfo.name=o.stuName||o.teaName,i.UserMgr.userInfo.avatar=o.stuAvatar||o.teaAvatar,i.UserMgr.userInfo.classId=o.classId,i.UserMgr.userInfo.classType=i.UserMgr.userInfo.classType,u.RoomMgr.roomInfo.classId=o.classId,u.RoomMgr.roomInfo.classType=o.classType,u.RoomMgr.roomInfo.groupId=u.RoomMgr.roomInfo.classId+"-"+s.GLOBAL.baseInfo.lessonId+s.GLOBAL.fileid,this._tryCount=1,this.onStepProgress(100),this.onStepCompleted()):this._tryCount>=5&&this.onStepFail("\u83b7\u53d6\u4e2a\u4eba\u4fe1\u606f \u7b2c "+this._tryCount+" \u6b21 \u5931\u8d25 httpResult "+e+"  erroInfo : "+t),[2]}})})},t.prototype.getStudentList=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,a.getStudentList({lessonId:+s.GLOBAL.baseInfo.lessonId})];case 1:return(e=t.sent()).success&&(u.RoomMgr.roomInfo.studentList=e.data.list,this.onStepProgress(100),this.onStepCompleted()),[2]}})})},t.prototype.onStepFail=function(t){void 0===t&&(t=null),e.prototype.onStepFail.call(this,t),this.onStepProgress(100),this.onStepCompleted()},t}(n.GameLoadStep);o.GameLoadHttpDataStep=l,cc._RF.pop()},{"../../framework/constant/GameConstant":"GameConstant","../../framework/http/api":"api","../../framework/model/RoomModel":"RoomModel","../../framework/model/UserModel":"UserModel","../../game/data/GlobalData":"GlobalData","../log/Log":"Log","./GameLoadStep":"GameLoadStep"}],GameLoadInitDataStep:[function(e,t,o){"use strict";cc._RF.push(t,"cd7bb1+uuVEMYWouhfvi1z5","GameLoadInitDataStep"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./GameLoadStep"),r=e("../../plugin/tuoKeYun/TuoKeYunFramework"),a=e("../../plugin/tuoKeYun/SdkMessageType"),i=e("../../game/data/GlobalData"),s=e("../../event/EventCenter"),c=e("../../framework/message/CocosMessageType"),u=e("../../framework/http/request"),l=e("../log/Log"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasReceivedBaseInfo=!1,t._tryCount=1,t}return __extends(t,e),t.prototype.execute=function(){var e=this;r.SdkFramework.sendCocosMessage2Client(a.SdkMessageType.REQUEST_BASE_INFO,{h5Version:i.GLOBAL.version}),s.EVT.once(c.CocosMessageType.on_handle_base_info,this.onHandleBaseInfo,this),this._timeId=setTimeout(function(){e.hasReceivedBaseInfo||i.GLOBAL.baseInfoComplete||(e._tryCount<3?(l.default.fatal("\u83b7\u53d6baseInfo \u4fe1\u606f\u7b2c "+e._tryCount+" \u6b21\u5931\u8d25 "),e._tryCount++,e.execute()):e.onStepFail("\u83b7\u53d6baseInfo \u4fe1\u606f\u7b2c "+e._tryCount+" \u6b21\u5931\u8d25 ")),i.GLOBAL.baseInfoComplete&&(clearTimeout(e._timeId),e.onStepCompleted())},1e3),i.GLOBAL.baseInfoComplete&&(clearTimeout(this._timeId),this.onStepCompleted())},t.prototype.onStepCompleted=function(){e.prototype.onStepCompleted.call(this),u.setBaseURL()},t.prototype.onHandleBaseInfo=function(e){this.hasReceivedBaseInfo=!0,clearTimeout(this._timeId),this.onStepCompleted()},t}(n.GameLoadStep);o.GameLoadInitDataStep=d,cc._RF.pop()},{"../../event/EventCenter":"EventCenter","../../framework/http/request":"request","../../framework/message/CocosMessageType":"CocosMessageType","../../game/data/GlobalData":"GlobalData","../../plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../../plugin/tuoKeYun/TuoKeYunFramework":"TuoKeYunFramework","../log/Log":"Log","./GameLoadStep":"GameLoadStep"}],GameLoadResDownloadStep:[function(e,t,o){"use strict";cc._RF.push(t,"01143aUeepC3phPJ5Z7wvLm","GameLoadResDownloadStep"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./GameLoadStep"),r=e("../../manager/ResourceManager"),a=e("../log/Log"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(){r.RES.once(r.RES.DOWNLOAD_COMPLETE,this.onDownloadComplete,this),r.RES.once(r.RES.DOWNLOAD_FAIL,this.onDownloadFail,this),r.RES.on(r.RES.DOWNLOAD_PROGRESS,this.onDownloadProgress,this),r.RES.loadResArray(["gameLogic/game_01/game_01Pre.prefab"],cc.Prefab)},t.prototype.onDownloadFail=function(e){a.default.error("\u4e0b\u8f7d\u8d44\u6e90\u9519\u8bef "+e),this.onDownloadComplete(e)},t.prototype.onDownloadComplete=function(e){r.RES.off(r.RES.DOWNLOAD_PROGRESS,this.onDownloadProgress,this),this.onStepCompleted()},t.prototype.onDownloadProgress=function(e){this.onStepProgress(e.progress)},t}(n.GameLoadStep);o.GameLoadResDownloadStep=i,cc._RF.pop()},{"../../manager/ResourceManager":"ResourceManager","../log/Log":"Log","./GameLoadStep":"GameLoadStep"}],GameLoadStep:[function(e,t,o){"use strict";cc._RF.push(t,"b7b756/hftFPo6z4uwhwdaE","GameLoadStep"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){this._gameLoader=null,this._loaderType=-1,this._loadIndex=-1,this._proportion=10,this._proportion=e}return Object.defineProperty(e.prototype,"gameLoader",{get:function(){return this._gameLoader},set:function(e){this._gameLoader=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loaderType",{get:function(){return this._loaderType},set:function(e){this._loaderType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadIndex",{get:function(){return this._loadIndex},set:function(e){this._loadIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proportion",{get:function(){return this._proportion},set:function(e){this._proportion=e},enumerable:!0,configurable:!0}),e.prototype.execute=function(){},e.prototype.onStepProgress=function(e){if(null!=this._gameLoader){var t=parseInt(e)/100;this._gameLoader.onStepProgress(this._proportion*t)}},e.prototype.onStepCompleted=function(){null!=this._gameLoader&&this._gameLoader.onStepCompleted(this._proportion)},e.prototype.onStepFail=function(e){void 0===e&&(e=null),null!=this._gameLoader&&this._gameLoader.onStepFail(e)},e}();o.GameLoadStep=n,cc._RF.pop()},{}],GameLoadTestInitDataStep:[function(e,t,o){"use strict";cc._RF.push(t,"31f33z3zz9GX6BrUj5h2Uv2","GameLoadTestInitDataStep"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./GameLoadStep"),r=(e("../log/Log"),e("../../framework/model/UserModel")),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(){r.UserMgr.userInfo.uid="wertgfds23765",r.UserMgr.userInfo.roleType=0,this.onStepCompleted()},t}(n.GameLoadStep);o.GameLoadTestInitDataStep=a,cc._RF.pop()},{"../../framework/model/UserModel":"UserModel","../log/Log":"Log","./GameLoadStep":"GameLoadStep"}],GameLoader:[function(e,t,o){"use strict";cc._RF.push(t,"cc6c62u2vpBJ65krZjYMcrg","GameLoader"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../log/Log"),r=function(e){function t(){var t=e.call(this)||this;return t._loadQueue=[],t._loadIndex=0,t._progress=0,t}return __extends(t,e),t.prototype.start=function(){this._loadQueue.length>0?this.executeNextStep():this.emit(t.LOAD_COMPLETE)},t.prototype.addStep=function(e){null!=e&&this._loadQueue.push(e)},t.prototype.removeSteps=function(){this._loadQueue.splice(0,this._loadQueue.length),this._loadIndex=0,this._loadIndex=0},t.prototype.onStepProgress=function(e){this._progress=this.calculateRealProgress(e),this.emit(t.LOAD_PROGRESS,this._progress)},t.prototype.calculateRealProgress=function(e){var t=0;this._loadIndex>0&&(t=this._loadQueue[this._loadIndex-1].proportion);var o=(this._loadQueue[this._loadIndex].proportion-t)*e/100+t;return cc.log("wuqd--------  calculateRealProgress "+o+" "),o},t.prototype.onStepCompleted=function(e){this._progress=e,this.emit(t.LOAD_PROGRESS,this._progress),this._loadIndex+=1,this._loadIndex>=this._loadQueue.length?this.emit(t.LOAD_COMPLETE):this.executeNextStep()},t.prototype.onStepFail=function(e){this.emit(t.LOAD_ERROR,e)},t.prototype.executeNextStep=function(){n.default.info("GameLoader: step = "+this._loadIndex);var e=this._loadQueue[this._loadIndex];e.loadIndex=this._loadIndex,e.gameLoader=this,e.execute()},t.LOAD_COMPLETE="GAME_LOAD_COMPLETE",t.LOAD_PROGRESS="GAME_LOAD_PROGRESS",t.LOAD_ERROR="GAME_LOAD_ERROR",t}(cc.EventTarget);o.GameLoader=r,cc._RF.pop()},{"../log/Log":"Log"}],GamePanel01:[function(e,t,o){"use strict";cc._RF.push(t,"1b82bxmUMBFHqlIVU3KA9oo","GamePanel01"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Script/ui/PanelBase"),r=cc._decorator,a=r.ccclass,i=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){},t=__decorate([a],t)}(n.default));o.default=i,cc._RF.pop()},{"../../../Script/ui/PanelBase":"PanelBase"}],GamePanel_monsterWithRoad:[function(e,t,o){"use strict";cc._RF.push(t,"2bd61JXa5BE3KhxR2hmgtKe","GamePanel_monsterWithRoad"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Script/ui/PanelBase"),r=e("../../../Script/utils/GameUtil"),a=e("../../../Script/common/component/TheItem"),i=e("../../../Script/framework/constant/GameConstant"),s=e("./script/MonsterManager_panel4"),c=cc._decorator,u=c.ccclass,l=c.property,d=function(){function e(){this.choiceItem=[]}return __decorate([l([cc.Node])],e.prototype,"choiceItem",void 0),e=__decorate([u("CanChoiceItem")],e)}(),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panel=null,t.monster=null,t.pathNodeGp=null,t.donutGp=null,t.rightTurnNum=[],t.choiceItems=[],t.pathData=[],t.currChoiceDonutId=0,t.currChoiceDonutName="",t.currRightDonutId=0,t.currChoieNum=0,t.id=0,t}return __extends(t,e),t.prototype.start=function(){var e=this;this.pathNodeGp.getChildByName("path").children.forEach(function(t){e.pathData[t.name]=t.getPosition()}),this.monsterManager=this.monster.getComponent(s.default),this.currRightDonutId=this.rightTurnNum[this.currChoieNum],this.updateCanChoiceItem(this.currChoieNum)},t.prototype.updateCanChoiceItem=function(e){var t=this.choiceItems[e].choiceItem;for(var o in this.choiceItems){var n=this.choiceItems[o];cc.log(n.choiceItem),n.choiceItem.forEach(function(e){e.getComponent(a.default).interactable=!1})}t.forEach(function(e){e.getComponent(a.default).interactable=!0})},t.prototype.itemClickHandler=function(e){r.GameUtil.toggleBlockNode(!0),r.GameUtil.playAudioEffect("sound/sfx_catch");var t=e.name,o=Number(e.name.split("-")[1]);e.getComponent(a.default).interactable=!1,this.currChoiceDonutName=t,this.currChoiceDonutId=o,this.id=0,this.moveMonster(t),"node-4"==t&&(this.monster.zIndex=30)},t.prototype.moveMonster=function(e){var t,o,n=this;t=this.gameData.mapData[e],o=this.pathData["node-"+t[this.id]],this.moveToPoint(o,function(){n.id++,n.id<t.length?n.moveMonster(e):(cc.log("move over"),n.checkCurrMoveRight())})},t.prototype.letMonsterBack=function(e){var t,o,n=this;t=this.gameData.mapData[e],o=this.pathData["node-"+t[this.id]],this.moveToPoint(o,function(){n.id++,n.id<t.length?n.letMonsterBack(e):(cc.log("monster is back"),n.setMonsterFace(!0),r.GameUtil.toggleBlockNode(!1))})},t.prototype.checkCurrMoveRight=function(){var e,t,o=this;e=this.currChoiceDonutId==this.currRightDonutId;var n=(t=this.donutGp.getChildByName(this.currChoiceDonutName)).getChildByName("shitou"),a=t.getChildByName("donut");if(e){if(this.monsterManager.playEat(function(){cc.log("donut remove"),cc.tween(a).delay(.2).to(.6,{x:-100,scale:0},{easing:cc.easing.sineIn}).start()},function(){r.GameUtil.toggleBlockNode(!1)}),this.currChoieNum++,this.currChoieNum==this.rightTurnNum.length)return r.GameUtil.toggleBlockNode(!0),void this.scheduleOnce(function(){o._rightFinishAnswer(i.SettlementAnimationType.UU_NI_ZHEN_BANG)},2);this.currRightDonutId=this.rightTurnNum[this.currChoieNum],this.updateCanChoiceItem(this.currChoieNum)}else{this._wrongAnswer();var s=t.getChildByName("texiao"),c=s.getComponent(sp.Skeleton);setTimeout(function(){n.active=!0,a.active=!1},200),s.active=!0,c.setCompleteListener(function(){c.setCompleteListener=null,s.active=!1,o.monsterManager.playAngry(function(){o.setMonsterFace(!1,function(){o.id=0,o.letMonsterBack(o.currChoiceDonutName+"-back")})})})}},t.prototype.setMonsterFace=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=null);var o;o=1==e?-1:1,cc.tween(this.monster).delay(.2).to(.2,{scaleX:o},{easing:cc.easing.sineIn}).call(t).start()},t.prototype.moveToPoint=function(e,t){cc.tween(this.monster).to(.5,{x:e.x,y:e.y}).call(t).start()},t.prototype.clickPanelHandler=function(){var e,t=this;(e=this.panel.getChildByName("bg")).active?cc.tween(e).to(.5,{opacity:0},{easing:cc.easing.sineIn}).call(function(){e.active=!1,cc.tween(t.panel).to(.6,{x:795.534,y:-444.221,scale:1},{easing:cc.easing.sineIn}).call(function(){}).start()}).start():cc.tween(this.panel).to(.6,{x:0,y:100,scale:1.4},{easing:cc.easing.sineIn}).call(function(){e.active=!0,e.opacity=0,cc.tween(e).to(.5,{opacity:200},{easing:cc.easing.sineIn}).start()}).start()},__decorate([l(cc.Node)],t.prototype,"panel",void 0),__decorate([l(cc.Node)],t.prototype,"monster",void 0),__decorate([l(cc.Node)],t.prototype,"pathNodeGp",void 0),__decorate([l(cc.Node)],t.prototype,"donutGp",void 0),__decorate([l({type:[cc.Integer],tooltip:"\u6b63\u786e\u7684\u70b9\u51fb\u751c\u751c\u5708\ud83c\udf69\u7684\u987a\u5e8f"})],t.prototype,"rightTurnNum",void 0),__decorate([l({type:d,tooltip:"\u5f53\u524d\u53ef\u9009\u62e9\u7684\u9009\u9879"})],t.prototype,"choiceItems",void 0),t=__decorate([u],t)}(n.default);o.default=p,cc._RF.pop()},{"../../../Script/common/component/TheItem":"TheItem","../../../Script/framework/constant/GameConstant":"GameConstant","../../../Script/ui/PanelBase":"PanelBase","../../../Script/utils/GameUtil":"GameUtil","./script/MonsterManager_panel4":"MonsterManager_panel4"}],GameUtil:[function(e,t,o){"use strict";cc._RF.push(t,"a7d60egVOhL7q3DMgQkiID9","GameUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../framework/model/UserModel"),r=e("../framework/constant/GameConstant"),a=e("../manager/PanelManager"),i=e("../event/EventCenter"),s=e("../framework/message/CgMessageFramework"),c=e("../plugin/tuoKeYun/SdkMessageType"),u=e("../game/data/GlobalData"),l=e("../../Prefab/settlementAni/script/SettlementBaseComp"),d=e("./StringUtil"),p=e("../common/log/Log"),g=function(){function e(){}return e.isTeacher=function(){return n.UserMgr.userInfo.roleType==r.H5RoleType.TEACHER},e.playAudioEffect=function(e,t,o){void 0===t&&(t=!1);var n=-1;return e instanceof cc.AudioClip?(n=cc.audioEngine.playEffect(e,t),console.debug("sound url : "+e.nativeUrl)):cc.loader.loadRes(e,cc.AudioClip,function(e,r){!e&&r?(n=cc.audioEngine.playEffect(r,t),cc.audioEngine.setFinishCallback(n,function(){o&&o()})):cc.error(e)}),cc.audioEngine.setEffectsVolume(1),cc.audioEngine.setMusicVolume(1),n},e.showTimeOut=function(e){void 0===e&&(e=!0),e?i.EVT.emit("gameBegin"):this.playTimeoutAni()},e.stopTimeoutAni=function(){cc.find("prefab_06_timeout",a.PanelManager.getInstance().HUDLayer).active=!1,this.timeoutCBcanDo=!1,cc.audioEngine.stopAllEffects(),clearTimeout(this.timeOut2audioId),clearTimeout(this.timeOutbeginId)},e.playTimeoutAni=function(){var t=this,o=cc.find("prefab_06_timeout",a.PanelManager.getInstance().HUDLayer);if(o){this.timeoutCBcanDo=!0;var n=cc.find("zhezhao",o);n&&n.on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation()}),o.opacity=255,o.active=!0,e.playAudioEffect("sound/timeDown/sfx_cntd01",!1),this.timeOut2audioId=setTimeout(function(){e.playAudioEffect("sound/timeDown/sfx_cntd02",!1)},666),o.getComponentInChildren(dragonBones.ArmatureDisplay).playAnimation("newAnimation",1),this.timeOutbeginId=setTimeout(function(){t.timeoutCBcanDo&&(o.active=!1,i.EVT.emit("gameBegin"))},1500)}else setTimeout(function(){i.EVT.emit("gameBegin")},1800)},e.getPrefabUrlByPageName=function(e){return"gameLogic/"+e+"/"+e+"Pre"},e.toObject=function(e){var t={};for(var o in e)if("function"!=typeof e[o]){if("object"==typeof e[o]&&e[o].hasOwnProperty("toString")){t[o]=e[o].toString();continue}t[o]=e[o]}return t},e.object2Json=function(e){return JSON.stringify(this.toObject(e))},e.convertFormStringValue=function(e,t){if(e&&t)for(var o in"string"==typeof e&&(e=JSON.parse(e)),e)(t.hasOwnProperty(o)||t.hasOwnProperty("_"+o))&&("object"==typeof t[o]&&"string"==typeof e[o]?t[o].convertFromServerData&&"function"==typeof t[o].convertFromServerData?t[o].convertFromServerData(e[o]):t[o]=JSON.parse(e[o]):t[o]=e[o])},e.showSuccess=function(){var e=cc.find("rightAnswereffect",a.PanelManager.getInstance().HUDLayer);e.active=!0;var t=e.getComponentInChildren(dragonBones.ArmatureDisplay);t.playAnimation("in",1),t.addEventListener(dragonBones.EventObject.COMPLETE,function(t){e.active=!1})},e.stopShowSuccess=function(){cc.find("rightAnswereffect",a.PanelManager.getInstance().HUDLayer).active=!1,cc.find("settlementPre",a.PanelManager.getInstance().HUDLayer).active=!1},e.sendChangePageSuccess=function(e){n.UserMgr.userInfo.roleType!=r.H5RoleType.STUDENT&&n.UserMgr.userInfo.roleType!=r.H5RoleType.AIStudent||(s.MessageSender.messageSender.sendCustomMessage(c.SdkMessageType.CHANGE_PAGE_SUCCESS,{pageIndex:e,senderId:n.UserMgr.userInfo.uid}),s.MessageSender.messageSender.sendPageChangeSuccess(e))},e.teacherClickBase=function(e,t){(this.isTeacher()||u.GLOBAL.env_debug)&&s.MessageSender.messageSender.sendCustomMessage("nova.teacher.clickBase",{name:e.name,cmds:t})},e.runShakeAction=function(e,t){e.runAction(cc.sequence(cc.moveBy(.1,cc.v2(10,0)),cc.moveBy(.1,cc.v2(-20,0)),cc.moveBy(.1,cc.v2(20,0)),cc.moveBy(.1,cc.v2(-20,0)),cc.moveBy(.1,cc.v2(20,0)),cc.moveBy(.1,cc.v2(-10,0)),cc.callFunc(function(){t&&t()})))},e.inputLblDoWrongAni=function(e,t,o){var n=e.node.color;e.node.color=cc.color(225,114,45),setTimeout(function(){e.string="",e.node.color=t||n,e.node.opacity=255,o&&o()},600),e.node.runAction(cc.blink(.5,2))},e.playBgMusic=function(e,t,o){void 0===t&&(t=!1);var n=-1;return e instanceof cc.AudioClip?n=cc.audioEngine.playEffect(e,t):cc.loader.loadRes(e,cc.AudioClip,function(e,r){!e&&r?(n=cc.audioEngine.playMusic(r,t),cc.audioEngine.setFinishCallback(n,function(){o&&o()})):cc.error(e)}),cc.audioEngine.setEffectsVolume(1),cc.audioEngine.setMusicVolume(1),n},e.toggleBlockNode=function(e){void 0===e&&(e=!0);var t=cc.find("UICanvas/PanelLayer").children[0],o=function(){var e=cc.find("block",t);return e?e.active=!0:e=new cc.Node("block"),e.addComponent(cc.BlockInputEvents),e.parent=t,e.zIndex=999999,e.width=2048,e.height=1152,e.setPosition(0,0),e};1==e?function(){var e=cc.find("block",t);e||(e=o()),e.active=!0}():function(){var e=cc.find("block",t);e||(e=o()),e.active=!1}()},e.addNumAni=function(e,t,o,n){void 0===t&&(t=0),void 0===o&&(o=.4);var r=(e-t)/(10*o);if(0!=r){var a=e>t,i=setInterval(function(){t+=r,a?t<=e?n(t):(n(e),clearInterval(i)):t>=e?n(t):(n(e),clearInterval(i))},100);return i}},e.aBezierToB=function(e,t,o,n,r,a){void 0===r&&(r=.7),void 0===a&&(a=!0);var i=e.getPosition(),s=e.parent.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.getPosition())),c=[i,cc.v2(i.x/2+s.x/2+0,i.y/2+s.y/2+240),s],u=cc.bezierTo(r,c);a&&(u=cc.spawn(cc.bezierTo(r,c),cc.rotateBy(.8*r,-90))),e.runAction(cc.sequence(cc.callFunc(function(){o&&o()}.bind(this)),u,cc.callFunc(function(){n&&n()}.bind(this))))},e.runScaleAction=function(e,t,o,n,r,a){void 0===o&&(o=1.2),void 0===n&&(n=1),void 0===r&&(r=.4),void 0===a&&(a=2);for(var i=r/a,s=[],c=0;c<a;c++)s.push(cc.scaleTo(i,o)),s.push(cc.scaleTo(i,n));e.runAction(cc.sequence(s,cc.callFunc(function(){t&&t()},this)))},e.stopBgMusic=function(){cc.audioEngine.stopAll(),cc.audioEngine.stopMusic()},e.convertNodeSpace=function(e,t){var o=e.getPosition(),n=e.parent.convertToWorldSpaceAR(o);return t.convertToNodeSpaceAR(n)},e.checkIsTeacherOrStudent=function(){var e=n.UserMgr.userInfo.roleType;return e==r.H5RoleType.STUDENT||e==r.H5RoleType.TEACHER||e==r.H5RoleType.AIStudent},e.indexLoopOfArrayLength=function(e,t){return(e+=1)==t&&(e=0),e<0&&(e=0),e},e.showUnusualSuccessAnimation=function(e){var t="";switch(e){case r.SettlementAnimationType.NORMLAL:t="";break;case r.SettlementAnimationType.NO_SUCCESS:t="noSuccess";break;case r.SettlementAnimationType.FIGHTING:t="fightingAni";break;case r.SettlementAnimationType.GOOD:t="goodAni";break;case r.SettlementAnimationType.UU_NI_ZHEN_BANG:t="youyouAni";break;case r.SettlementAnimationType.ZAI_ZAI_SHUAI_DAI_LE:t="zaizaiAni";break;case r.SettlementAnimationType.FEI_ER_HAO_LI_HAI:t="feierAni"}var o=cc.find("settlementPre",a.PanelManager.getInstance().HUDLayer);o.active=!0,o.children.forEach(function(e){e.active="shadow"==e.name||e.name==t}),cc.find(t,o).getComponent(l.default).playAnimation()},e.setStore=function(e,t){if(e){"string"!=typeof t&&(t=JSON.stringify(t));var o=d.default.getUrlParam("fileid")||"";p.default.debug("fileId :  "+o),window.localStorage.setItem(e+o,t)}},e.getStore=function(e){if(e){var t=d.default.getUrlParam("fileid")||"";return p.default.debug("fileId :  "+t),window.localStorage.getItem(e+t)}},e.removeStore=function(e){if(e){var t=d.default.getUrlParam("fileid")||"";p.default.debug("fileId :  "+t),window.localStorage.removeItem(e+t)}},e._bgmMusicTimeId=0,e._bgmAudioClip=null,e._bgmAudioId=0,e.addNumAniId=0,e.timeOut2audioId=0,e.timeOutbeginId=0,e.timeoutCBcanDo=!1,e}();o.GameUtil=g,cc._RF.pop()},{"../../Prefab/settlementAni/script/SettlementBaseComp":"SettlementBaseComp","../common/log/Log":"Log","../event/EventCenter":"EventCenter","../framework/constant/GameConstant":"GameConstant","../framework/message/CgMessageFramework":"CgMessageFramework","../framework/model/UserModel":"UserModel","../game/data/GlobalData":"GlobalData","../manager/PanelManager":"PanelManager","../plugin/tuoKeYun/SdkMessageType":"SdkMessageType","./StringUtil":"StringUtil"}],GlobalData:[function(e,t,o){"use strict";cc._RF.push(t,"b21a1+UQCFE4Zl075mlt8+s","GlobalData"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../framework/constant/GameConstant"),r=e("../../plugin/tuoKeYun/IBaseInfo"),a=e("../../utils/StringUtil");o.FPS=30;var i=function(){function e(){this.env_debug=!1,this.operatingEnvironment=0,this.clientId=n.ClientType.Test,this.token="",this.version="",this.fileid=a.default.getUrlParam("fileid"),this.baseInfo={clientId:"",cv:"",env:0,lessonId:"wu222qd",role:0,token:"",userId:"",business:r.businessEnum.yyclass},this.serverConfig={isAlignware:!1},this.isLoginFinish=!1,this._game_ip="socket-dev.100daishu.com",this.gamePort="8282",this.baseInfoComplete=!1}return e.getInstance=function(){return this._inst||(this._inst=new e)},Object.defineProperty(e.prototype,"game_ip",{get:function(){return o.GLOBAL.operatingEnvironment==n.OperatingEnvironment.TEST?this.game_ip="socket.100daishu.com":o.GLOBAL.operatingEnvironment==n.OperatingEnvironment.ON_LINE&&(this.game_ip="socket-dev.100daishu.com"),this._game_ip},set:function(e){this._game_ip=e},enumerable:!0,configurable:!0}),e}();o.GlobalData=i,o.GLOBAL=i.getInstance(),cc._RF.pop()},{"../../framework/constant/GameConstant":"GameConstant","../../plugin/tuoKeYun/IBaseInfo":"IBaseInfo","../../utils/StringUtil":"StringUtil"}],HidleForStudentComponent:[function(e,t,o){"use strict";cc._RF.push(t,"cc4caPYDyJJB7VVR8ZW8hS/","HidleForStudentComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../framework/constant/GameConstant"),r=e("../../framework/model/UserModel"),a=cc._decorator,i=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){if(r.UserMgr.userInfo.roleType==n.H5RoleType.STUDENT||r.UserMgr.userInfo.roleType==n.H5RoleType.AIStudent){this.node.opacity=0;var e=this.node.getComponent("item");e&&(e.pauseSystemEvents=!0)}},t=__decorate([i],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../../framework/constant/GameConstant":"GameConstant","../../framework/model/UserModel":"UserModel"}],HttpMgr:[function(e,t,o){"use strict";cc._RF.push(t,"4997eLUXK9FN6Q1dl58lqZZ","HttpMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/data/GlobalData"),r=e("../constant/GameConstant"),a=e("../../common/log/Log"),i=function(){function e(){this._httpDomain=""}return Object.defineProperty(e.prototype,"httpDomain",{get:function(){switch(n.GLOBAL.operatingEnvironment){case r.OperatingEnvironment.TEST:this._httpDomain="http://api-test.100daishu.com/";break;case r.OperatingEnvironment.ON_LINE:this._httpDomain="http://api.100daishu.com/"}return this._httpDomain},enumerable:!0,configurable:!0}),e.getInst=function(){return this._inst||(this._inst=new e)},e.prototype.post=function(e,t){e.method="post",this.quest(e,t)},e.prototype.get=function(e,t){e.method="get",this.quest(e,t)},e.prototype.quest=function(e,t){var o=e.url,r=e.method,i=e.data,s=i.clinetid||n.GLOBAL.clientId,c=this.httpDomain;o.indexOf("http")<0&&(o=c+o);var u="";if(i)for(var l in i)"?"!==u&&(u+="&"),u+=l+"="+i[l];var d=new XMLHttpRequest;d.timeout=15e3,d.onreadystatechange=function(){if(4==d.readyState)if(d.status>=200&&d.status<400){var e=d.responseText;try{(e=JSON.parse(d.responseText))&&0===e.code?t&&t(null,e.data):t&&t(e.code,null)}catch(n){return a.default.error("http "+o+" status : "+d.status+" errorMsg: "+JSON.stringify(e)),void(t&&t("http \u6570\u636e\u89e3\u6790\u5f02\u5e38 "+n.toString(),null))}}else console.error("http "+o+" status : "+d.status+"errorMsg: "+d.responseText),t&&t({state:d.status},null)}.bind(this),d.open(r,o,!0);var p=n.GLOBAL.token;d.setRequestHeader("Authorization",p),d.setRequestHeader("clientid",s),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),d.send(u),d.ontimeout=function(){t&&t({state:-1},null),a.default.debug("\u94fe\u63a5\u8d85\u65f6")}},e}();o.HttpMgr=i,cc._RF.pop()},{"../../common/log/Log":"Log","../../game/data/GlobalData":"GlobalData","../constant/GameConstant":"GameConstant"}],IBaseInfo:[function(e,t,o){"use strict";cc._RF.push(t,"05cd4YJxA9BEKo5ojsmxhMC","IBaseInfo"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.yyclass="yyclass",e.rooclass="rooclass"}(o.businessEnum||(o.businessEnum={})),cc._RF.pop()},{}],IItem:[function(e,t,o){"use strict";cc._RF.push(t,"ac901SrTh9EHq7fB1wjMi0f","IItem"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ISettlementComp:[function(e,t,o){"use strict";cc._RF.push(t,"e404a6Oz91EB6hLG1T5DMru","ISettlementComp"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],InitTeacher:[function(e,t,o){"use strict";cc._RF.push(t,"17519i32ohDnrMqGYby+Aiy","InitTeacher"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Script/game/data/GlobalData"),r=e("../../Script/framework/model/UserModel"),a=cc._decorator,i=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.version="2.0.1",t.teacherPrefab=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.initFPS()},t.prototype.start=function(){(n.GLOBAL.env_debug||4!=r.UserMgr.userInfo.getToolPart())&&this.initTch()},t.prototype.initFPS=function(){cc.game.setFrameRate(n.FPS)},t.prototype.initTch=function(){if(this.teacherPrefab){cc.director.getScene();var e=cc.find("UICanvas/CommonLayer"),t=cc.instantiate(this.teacherPrefab);t.opacity=255,t.parent=e,t.setSiblingIndex(0)}},__decorate([s()],t.prototype,"version",void 0),__decorate([s(cc.Prefab)],t.prototype,"teacherPrefab",void 0),t=__decorate([i],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../Script/framework/model/UserModel":"UserModel","../../Script/game/data/GlobalData":"GlobalData"}],InputBoxComponent:[function(e,t,o){"use strict";cc._RF.push(t,"b784cXdpaVDLoIR36FcLAGA","InputBoxComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property,i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.strLength=1,t.idx=0,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.getValue=function(){cc.find("lable",this.node).getComponent(cc.Label).string},__decorate([a({tooltip:"\u8f93\u5165\u6846\u7684\u6700\u5927\u8f93\u5165\u957f\u5ea6"})],t.prototype,"strLength",void 0),t=__decorate([r],t)}(cc.Component);o.default=i,cc._RF.pop()},{}],LastPageButton:[function(e,t,o){"use strict";cc._RF.push(t,"c7900OrJ+BBLIA3s8FEAoQr","LastPageButton"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../TeacherButton"),r=cc._decorator.ccclass,a=e("../../../Script/framework/model/RoomModel"),i=e("../../../Script/framework/message/CgMessageFramework"),s=e("../../../Script/utils/GameUtil"),c=e("../../../Script/manager/PanelManager"),u=e("../../../Script/event/EventCenter"),l=e("../../../Script/plugin/tuoKeYun/SdkMessageType"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),a.RoomMgr.roomInfo.curPageIndex==a.RoomMgr.roomInfo.totalPage?this.disBtn():this.bindBtnEvent()},t.prototype.onBtnClick=function(){e.prototype.onBtnClick.call(this),a.RoomMgr.roomInfo.curPageIndex>=a.RoomMgr.roomInfo.totalPage||s.GameUtil.isTeacher()&&(a.RoomMgr.roomInfo.curPageIndex=a.RoomMgr.roomInfo.totalPage,a.RoomMgr.roomInfo.answerRecord="",i.MessageSender.messageSender.sendPageChange(a.RoomMgr.roomInfo.curPageIndex),c.PanelManager.getInstance().changeGameByPageIndex(a.RoomMgr.roomInfo.curPageIndex),u.EVT.emit(l.SdkMessageType.ON_PAGE_CHANGE,{toPage:a.RoomMgr.roomInfo.totalPage}))},t=__decorate([r],t)}(n.TeacherButton);o.FirstPageButton=d,cc._RF.pop()},{"../../../Script/event/EventCenter":"EventCenter","../../../Script/framework/message/CgMessageFramework":"CgMessageFramework","../../../Script/framework/model/RoomModel":"RoomModel","../../../Script/manager/PanelManager":"PanelManager","../../../Script/plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../../../Script/utils/GameUtil":"GameUtil","../TeacherButton":"TeacherButton"}],LoadingScene:[function(e,t,o){"use strict";cc._RF.push(t,"63b75JqXJpPmLCJNNylrQc2","LoadingScene"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../framework/network/handler/LoginHandler"),r=e("../../framework/network/handler/CocosMessageHandler"),a=e("../../framework/network/handler/TuoKeYunSdkMessageHandler"),i=e("../../framework/model/UserModel"),s=e("../../framework/model/RoomModel"),c=e("../../utils/StringUtil"),u=e("../../plugin/tuoKeYun/TuoKeYunFramework"),l=e("../../plugin/tuoKeYun/SdkMessageType"),d=e("../data/GlobalData"),p=e("../../common/component/GameInitComponent"),g=e("../../manager/PanelManager"),m=e("../../../Prefab/teacher/InitTeacher"),h=e("../../common/log/Log"),f=e("../../../Script/framework/http/api"),_=cc._decorator,y=_.ccclass,S=_.property,v=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingBar=null,e.lblProgress=null,e.teacherPrefab=null,e._isExecute=!1,e}return __extends(o,t),o.prototype.onLoad=function(){this.onGameComplete(1)},o.prototype.regsterManager=function(){n.LoginHandler.getInstance().registerEvent(),r.CocosMessageHandler.getInstance().registerEvent(),a.TuoKeYunSdkMessageHandler.getInstance(),i.default.getInstance(),s.default.getInstance(),u.SdkFramework.sendCocosMessage2Client(l.SdkMessageType.REQUEST_BASE_INFO,{h5Version:d.GLOBAL.version})},o.prototype.onHandleBaseInfo=function(){this._isExecute||(this._isExecute=!0,this.launch()),d.GLOBAL.baseInfoComplete=!0},o.prototype.start=function(){var t=cc.find("UICanvas");cc.game.addPersistRootNode(t);var o=c.default.getUrlParam("roleType");i.UserMgr.userInfo.roleType=+o,s.RoomMgr.roomInfo.totalPage=e("_games").games.length,h.default.debug("\u53d1\u9001\u591a\u5c11\u9875 "+s.RoomMgr.roomInfo.totalPage),u.SdkFramework.sendTotalPageNum(s.RoomMgr.roomInfo.totalPage),h.default.debug("\u53d1\u9001\u52a0\u8f7d\u5b8c\u6210\u9875 "+s.RoomMgr.roomInfo.totalPage),u.SdkFramework.sendLoadComplete(),d.GLOBAL.env_debug&&this.launch()},o.prototype.updateProgress=function(e){e<5&&(e=5),this.loadingBar.progress=e/100,this.lblProgress.string=String(e)+"%"},o.prototype.launch=function(){this.node.getComponent(p.default).setUp()},o.prototype.onGameLoadingProgress=function(e){var t=parseInt(e);this.updateProgress(t)},o.prototype.onGameComplete=function(t){h.default.debug("\u51c6\u5907\u5de5\u4f5c\u5b8c\u6210\u51c6\u5907\u52a0\u8f7d\u573a\u666f"),s.RoomMgr.roomInfo.answerRecord="";var o=g.PanelManager.getInstance().commonLayer.getComponent(m.default);o||(o=g.PanelManager.getInstance().commonLayer.addComponent(m.default)),o.teacherPrefab=this.teacherPrefab,s.RoomMgr.roomInfo.totalPage=e("_games").games.length,u.SdkFramework.sendTotalPageNum(s.RoomMgr.roomInfo.totalPage),u.SdkFramework.sendLoadComplete(),this.sendPageConfig2Service()},o.prototype.sendPageConfig2Service=function(){f.upLoadPageConfig()},o.prototype.onGameFaile=function(e){h.default.error("\u8fdb\u5ea6\u6761\u52a0\u8f7d\u5931\u8d25 e: "+JSON.stringify(e)),d.GLOBAL.env_debug||u.SdkFramework.sendCocosException2Client("\u8fdb\u5ea6\u6761\u52a0\u8f7d\u5931\u8d25 e: ",JSON.stringify(e))},__decorate([S(cc.ProgressBar)],o.prototype,"loadingBar",void 0),__decorate([S(cc.Label)],o.prototype,"lblProgress",void 0),__decorate([S(cc.Prefab)],o.prototype,"teacherPrefab",void 0),o=__decorate([y],o)}(cc.Component);o.default=v,cc._RF.pop()},{"../../../Prefab/teacher/InitTeacher":"InitTeacher","../../../Script/framework/http/api":"api","../../common/component/GameInitComponent":"GameInitComponent","../../common/log/Log":"Log","../../framework/model/RoomModel":"RoomModel","../../framework/model/UserModel":"UserModel","../../framework/network/handler/CocosMessageHandler":"CocosMessageHandler","../../framework/network/handler/LoginHandler":"LoginHandler","../../framework/network/handler/TuoKeYunSdkMessageHandler":"TuoKeYunSdkMessageHandler","../../manager/PanelManager":"PanelManager","../../plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../../plugin/tuoKeYun/TuoKeYunFramework":"TuoKeYunFramework","../../utils/StringUtil":"StringUtil","../data/GlobalData":"GlobalData",_games:"_games"}],LogAppender:[function(e,t,o){"use strict";cc._RF.push(t,"cb1aaNUrl5BXbVt5LQt/K+U","LogAppender"),Object.defineProperty(o,"__esModule",{value:!0});var n,r=e("./Log"),a=e("../../framework/http/api"),i=e("../../game/data/GlobalData"),s=function(){function e(){}return e.prototype.write=function(e){if(Object.keys(e).length>0){if(i.GLOBAL.env_debug)return;var t=null;switch(e.log_level){case"Debug":t=console.debug;break;case"Info":t=console.log;break;case"Warning":t=console.warn;break;case"Error":t=console.error;break;default:t=console.log}t(u(e))}},e}();o.ConsoleAppender=s,function(e){e[e.Json=1]="Json",e[e.URL=2]="URL",e[e.Text=3]="Text"}(n=o.HTTPMsgType||(o.HTTPMsgType={}));var c=function(){function e(e,t){void 0===t&&(t=n.Json),this.url=e,this.type=t}return e.prototype.write=function(e){if(Object.keys(e).length>0)switch(this.type){case n.Json:this.write_json(e);break;case n.URL:this.write_url(e);break;case n.Text:this.write_text(e)}},e.prototype.write_json=function(e){var t=this;fetch(this.url,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then(function(e){e.ok||r.default.error("\u53d1\u9001\u65e5\u5fd7\u5230 ",this.url," \u5931\u8d25 a")}).catch(function(){return console.log("\u53d1\u9001\u65e5\u5fd7\u5230 ",t.url," \u5931\u8d25 b")})},e.prototype.write_url=function(e){var t="";for(var o in e)t+="&"+o+"="+e[o];if(t.length>0){var n=this.url+"?"+t.substr(1);fetch(n)}},e.prototype.write_text=function(e){var t=u(e);switch(e.log_level){case"Debug":case"Warning":case"Error":a.sendLogs("{detail:"+t+"}")}},e}();function u(e){var t="";for(var o in void 0!==e.log_time&&(t+=e.log_time+" "),void 0!==e.log_name&&(t+=e.log_name+" "),void 0!==e.log_level&&(t+=e.log_level+" "),0===t.length&&(t="Log "),t+="-",e)"log_time"!==o&&"log_name"!==o&&"log_level"!==o&&(t+=" "+o+"="+e[o]);return t}o.HttpAppender=c,cc._RF.pop()},{"../../framework/http/api":"api","../../game/data/GlobalData":"GlobalData","./Log":"Log"}],Logger:[function(e,t,o){"use strict";cc._RF.push(t,"0cdc65bImxEuZJLOl3Iv5/U","Logger"),Object.defineProperty(o,"__esModule",{value:!0});var n,r=e("../../utils/StringUtil");(function(e){e[e.All=0]="All",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error",e[e.Fatal=6]="Fatal",e[e.Off=7]="Off"})(n=o.LogLevel||(o.LogLevel={}));var a=function(){function e(){this.name="\u672a\u547d\u540d",this.appenders=[]}return e.prototype.addAppender=function(e){return this.appenders.push(e),this},e.prototype.setName=function(e){return this.name=e,this},e.prototype.setLevel=function(e){return this.level=e,this},e.prototype.levelName=function(e){return n[e]},e.prototype.write=function(e,t){return void 0===t&&(t=null),e<this.level||null===t?this:(void 0===t.log_level&&(t.log_level=this.levelName(e)),this.write_to_appender(t),this)},e.prototype.get_time_string=function(){return r.default.formatDate(Date.now(),"Y-M-D h:m:s")},e.prototype.write_to_appender=function(e){for(var t=0,o=this.appenders;t<o.length;t++){var n=o[t];void 0===e.log_time&&(e.log_time=this.get_time_string()),void 0===e.log_name&&(e.log_name=this.name),n.write(e)}},e}();o.Logger=a,cc._RF.pop()},{"../../utils/StringUtil":"StringUtil"}],LoginHandler:[function(e,t,o){"use strict";cc._RF.push(t,"9221bMSWwtGd5c2nMcf3Xot","LoginHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../event/EventCenter"),r=e("../../../common/log/Log"),a=e("../socket/SocketManager"),i=e("../../model/UserModel"),s=e("../socket/CgSocketFrameWork"),c=e("../../model/RoomModel"),u=e("../../message/CocosMessageType"),l=function(){function e(){}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.onHandleVerify=function(e){r.default.debug("\u9a8c\u8bc1\u6210\u529f\uff1a "+JSON.stringify(e)),a.SocketMgr.sendJson("joinGroup",{groupId:i.UserMgr.userInfo.groupId},function(e){r.default.debug("\u52a0\u5165\u7fa4\u7ec4\u6210\u529f "+i.UserMgr.userInfo.groupId),s.default.getGroupCommon(),s.default.getGroupNumbers(i.UserMgr.userInfo.groupId),s.default.sendMsg2Group("JOIN_GROUP_SUCCESS",{uid:i.UserMgr.userInfo.uid,role:s.default.clientRoleType2Server(i.UserMgr.userInfo.roleType),name:i.UserMgr.userInfo.name})})},e.prototype.onHandleGetCommon=function(e){r.default.debug("\u83b7\u53d6\u4e2a\u4eba\u5728\u5c0f\u7ec4\u91cc\u9762\u7684\u6570\u636e\uff1a "+JSON.stringify(e)),e.uid&&e.uid==i.UserMgr.userInfo.uid?(i.UserMgr.userInfo.convertFromServerData(e),n.EVT.emit(u.CocosMessageType.on_login_finish,{}),s.default.syncSelfInfoInGroup(i.UserMgr.userInfo.curGameInfo)):n.EVT.emit(u.CocosMessageType.on_login_finish,{})},e.prototype.onHandleGetGroupCommon=function(e){r.default.debug("\u5c0f\u7ec4\u5185\u7684\u901a\u7528\u4fe1\u606f\uff1a "+JSON.stringify(e)),c.RoomMgr.roomInfo.convertFromServerData(e),s.default.getSelfInfoInGroup(i.UserMgr.userInfo.uid,i.UserMgr.userInfo.roleType)},e.prototype.onHandleGetGroupMember=function(e){r.default.debug("\u5c0f\u7ec4\u5185\u7684\u6210\u5458\u5217\u8868 "+JSON.stringify(e)),c.RoomMgr.roomInfo.userList=e.members;for(var t=0,o=c.RoomMgr.roomInfo.userList;t<o.length;t++){var n=o[t];n.role=s.default.serverRoleType2Client(n.role),n.uname&&(n.name=n.uname,delete n.uname),n.isOnline=!0}},e.prototype.onHandleJoinGroupSuccess=function(e){r.default.debug("\u7528\u6237\u52a0\u5165\u7fa4\u7ec4\u6210\u529f: "+JSON.stringify(e)),c.RoomMgr.roomInfo.onUserJoinSuccess(e)},e.prototype.onHandleUserLevel=function(e){r.default.debug("\u7528\u6237\u79bb\u7ebf\u4e86\uff1a "+JSON.stringify(e)),c.RoomMgr.roomInfo.onUserLevel(e)},e.prototype.registerEvent=function(){n.EVT.on("verify",this.onHandleVerify,this),n.EVT.on("getCommon",this.onHandleGetCommon,this),n.EVT.on("getGroupCommon",this.onHandleGetGroupCommon,this),n.EVT.on("CG_USER_LEAVE",this.onHandleUserLevel,this),n.EVT.on("getGroupMember",this.onHandleGetGroupMember,this),n.EVT.on("JOIN_GROUP_SUCCESS",this.onHandleJoinGroupSuccess,this)},e._instance=null,e}();o.LoginHandler=l,cc._RF.pop()},{"../../../common/log/Log":"Log","../../../event/EventCenter":"EventCenter","../../message/CocosMessageType":"CocosMessageType","../../model/RoomModel":"RoomModel","../../model/UserModel":"UserModel","../socket/CgSocketFrameWork":"CgSocketFrameWork","../socket/SocketManager":"SocketManager"}],Log:[function(e,t,o){"use strict";cc._RF.push(t,"cf03aIdVyZDlKidcmpwBYyX","Log"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Logger"),r=e("./LogAppender"),a=e("../../framework/http/api"),i=function(){function e(){this.logger=null,this.consist={},this.logger=new n.Logger,this.logger.setName("\u901a\u7528debug:"),this.logger.addAppender(new r.ConsoleAppender),this.logger.addAppender(new r.HttpAppender("",r.HTTPMsgType.Text)),setInterval(function(){a.sendLogs("",!0)},12e4)}return e.getLogger=function(){return null===e.instance&&(e.instance=new e),e.instance},e.prototype.addAppender=function(e){return this.logger.addAppender(e),this},e.prototype.setLevel=function(e){return this.logger.setLevel(e),this},e.prototype.setDeviceID=function(e){return this.addConsist("device_id",e),this},e.prototype.setVersion=function(e){return this.addConsist("version",e),this},e.prototype.addConsist=function(e,t){return this.consist[e]=t,this},e.prototype.write=function(e,t){if(void 0===t||null===t)return this;for(var o in this.consist)void 0===t[o]&&(t[o]=this.consist[o]);return this.logger.write(e,t),this},e.instance=null,e}();function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length>0&&o.ElexTrace({msg:e.join("")})}function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length>0&&o.ElexDebug({msg:e.join("")})}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length>0&&o.ElexInfo({msg:e.join("")})}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length>0&&o.ElexWarning({msg:e.join("")})}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length>0&&o.ElexError({msg:e.join("")})}function p(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length>0&&o.ElexFatal({msg:e.join("")})}o.ElexLogger=i,o.ElexTrace=i.getLogger().write.bind(i.getLogger(),n.LogLevel.Trace),o.ElexDebug=i.getLogger().write.bind(i.getLogger(),n.LogLevel.Debug),o.ElexInfo=i.getLogger().write.bind(i.getLogger(),n.LogLevel.Info),o.ElexWarning=i.getLogger().write.bind(i.getLogger(),n.LogLevel.Warning),o.ElexError=i.getLogger().write.bind(i.getLogger(),n.LogLevel.Error),o.ElexFatal=i.getLogger().write.bind(i.getLogger(),n.LogLevel.Fatal),o.TRACE=s,o.DEBUG=c,o.INFO=u,o.WARNING=l,o.ERROR=d,o.FATAL=p,o.default={debug:c,info:u,error:d,warning:l,fatal:p,trace:s},cc._RF.pop()},{"../../framework/http/api":"api","./LogAppender":"LogAppender","./Logger":"Logger"}],MonsterManager_panel4:[function(e,t,o){"use strict";cc._RF.push(t,"d1db9dumL5MJIznC+LJLQE/","MonsterManager_panel4"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property,i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.body=null,t.body2=null,t.xiru=null,t.eatAd=null,t.angryAd=null,t.xiAd=null,t}var o;return __extends(t,e),o=t,t.prototype.start=function(){},t.prototype.playAngry=function(e){this.body.active=!0,this.body2.active=!1,cc.audioEngine.playEffect(this.angryAd,!1);var t=this.body.getComponent(sp.Skeleton);t.setAnimation(0,o.BODY_STATE_WRONG,!1),t.setCompleteListener(function(){cc.log("angry over"),t.setCompleteListener(null),t.setAnimation(0,o.BODY_STATE_DAIJI,!0),e()})},t.prototype.playEat=function(e,t){var n=this;this.body.active=!0,this.body2.active=!1;var r=this.body.getComponent(sp.Skeleton),a=this.body2.getComponent(sp.Skeleton);e(),cc.audioEngine.playEffect(this.xiAd,!1),r.setAnimation(0,o.BODY_STATE_XI,!1),r.setCompleteListener(function(){r.setCompleteListener(null)}),this.xiru.active=!0;var i=this.xiru.getComponent(sp.Skeleton);i.setAnimation(0,o.XIRU_STATE_XI,!1),i.setCompleteListener(function(){i.setCompleteListener(null),n.xiru.active=!1,n.body.active=!1,n.body2.active=!0,cc.audioEngine.playEffect(n.eatAd,!1),a.setAnimation(0,o.BODY_2_STATE_CHENG_GONG_2,!0),n.scheduleOnce(function(){n.body.active=!0,n.body2.active=!1,r.setAnimation(0,o.BODY_STATE_DAIJI,!0),t()},1.5)})},t.prototype.playEatAndStayEAt=function(e,t){var n=this;this.body.active=!0,this.body2.active=!1;var r=this.body.getComponent(sp.Skeleton),a=this.body2.getComponent(sp.Skeleton);e(),cc.audioEngine.playEffect(this.xiAd,!1),r.setAnimation(0,o.BODY_STATE_XI,!1),r.setCompleteListener(function(){r.setCompleteListener(null)}),this.xiru.active=!0;var i=this.xiru.getComponent(sp.Skeleton);i.setAnimation(0,o.XIRU_STATE_XI,!1),i.setCompleteListener(function(){i.setCompleteListener(null),n.xiru.active=!1,n.body.active=!1,n.body2.active=!0,cc.audioEngine.playEffect(n.eatAd,!1),a.setAnimation(0,o.BODY_2_STATE_CHENG_GONG_2,!0)})},t.BODY_STATE_DAIJI="daiji1",t.BODY_STATE_WRONG="wrong",t.BODY_STATE_XI="xi",t.BODY_2_STATE_CHENG_GONG_2="chenggong2",t.XIRU_STATE_XI="daiji",__decorate([a(cc.Node)],t.prototype,"body",void 0),__decorate([a(cc.Node)],t.prototype,"body2",void 0),__decorate([a(cc.Node)],t.prototype,"xiru",void 0),__decorate([a({type:cc.AudioClip})],t.prototype,"eatAd",void 0),__decorate([a({type:cc.AudioClip})],t.prototype,"angryAd",void 0),__decorate([a({type:cc.AudioClip})],t.prototype,"xiAd",void 0),t=o=__decorate([r],t)}(cc.Component);o.default=i,cc._RF.pop()},{}],NextPageButton:[function(e,t,o){"use strict";cc._RF.push(t,"ada68Tnt4VCTarBMw3fuUTs","NextPageButton"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../TeacherButton"),r=cc._decorator.ccclass,a=e("../../../Script/framework/message/CgMessageFramework"),i=e("../../../Script/framework/model/RoomModel"),s=e("../../../Script/utils/GameUtil"),c=e("../../../Script/manager/PanelManager"),u=e("../../../Script/event/EventCenter"),l=e("../../../Script/common/log/Log"),d=e("../../../Script/plugin/tuoKeYun/SdkMessageType"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),i.RoomMgr.roomInfo.curPageIndex>=i.RoomMgr.roomInfo.totalPage?this.disBtn():this.bindBtnEvent()},t.prototype.onBtnClick=function(){e.prototype.onBtnClick.call(this),i.RoomMgr.roomInfo.curPageIndex>=i.RoomMgr.roomInfo.totalPage||s.GameUtil.isTeacher()&&(i.RoomMgr.roomInfo.curPageIndex+=1,i.RoomMgr.roomInfo.answerRecord="",a.MessageSender.messageSender.sendPageChange(i.RoomMgr.roomInfo.curPageIndex),l.default.info("-------   \u70b9\u51fb\u4e0b\u4e00\u9875 "+i.RoomMgr.roomInfo.curPageIndex),c.PanelManager.getInstance().changeGameByPageIndex(i.RoomMgr.roomInfo.curPageIndex),u.EVT.emit(d.SdkMessageType.ON_PAGE_CHANGE,{toPage:i.RoomMgr.roomInfo.curPageIndex}))},t=__decorate([r],t)}(n.TeacherButton);o.NextPageButton=p,cc._RF.pop()},{"../../../Script/common/log/Log":"Log","../../../Script/event/EventCenter":"EventCenter","../../../Script/framework/message/CgMessageFramework":"CgMessageFramework","../../../Script/framework/model/RoomModel":"RoomModel","../../../Script/manager/PanelManager":"PanelManager","../../../Script/plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../../../Script/utils/GameUtil":"GameUtil","../TeacherButton":"TeacherButton"}],NormalButtonClickAudioComponent:[function(e,t,o){"use strict";cc._RF.push(t,"281a6tBD41AZ5tEWQQspeZL","NormalButtonClickAudioComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator.ccclass,r=e("../../manager/PanelManager"),a=e("../../event/EventCenter"),i=e("../../utils/GameUtil"),s=e("../log/Log"),c=null,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameType="",t._effective=!0,t}return __extends(t,e),t.prototype.onLoad=function(){a.EVT.on("normal_button_toggleEffect",this.onHandleToggleEffect,this)},t.prototype.onEnable=function(){this.gameType=r.PanelManager.getInstance().curPanelBase.gameData.type,s.default.info("NormalButtonClickAudioComponent gameType "+this.gameType),this.gameType&&""!=this.gameType||a.EVT.on("baseClick",this.onHandleBaseClick,this),a.EVT.on(cc.Node.EventType.TOUCH_END,this.onHandleBaseClick,this),a.EVT.on("click",this.onHandleBaseClick,this),c=cc.Button.prototype._onTouchEnded;var e=this;cc.Button.prototype._onTouchEnded=function(t){c.call(t.target.getComponent(cc.Button),t),e.onHandleBaseClick(null)}},t.prototype.toggleOff=function(){r.PanelManager.getInstance().curPanelBase._sendBaseClickSocketMsg("normal_button_toggleEffect",{effective:!1}),this._effective=!1},t.prototype.toggleOn=function(){r.PanelManager.getInstance().curPanelBase._sendBaseClickSocketMsg("normal_button_toggleEffect",{effective:!0}),this._effective=!0},t.prototype.onHandleToggleEffect=function(e){this._effective=e.effective},t.prototype.onDisable=function(){c&&(cc.Button.prototype._onTouchEnded=c),a.EVT.targetOff(this)},t.prototype.onHandleBaseClick=function(e){this._effective&&i.GameUtil.playAudioEffect("sound/sfx_click")},t.prototype.onDestroy=function(){a.EVT.targetOff(this)},t=__decorate([n()],t)}(cc.Component);o.NormalButtonClickAudioComponent=u,cc._RF.pop()},{"../../event/EventCenter":"EventCenter","../../manager/PanelManager":"PanelManager","../../utils/GameUtil":"GameUtil","../log/Log":"Log"}],NumberUtil:[function(e,t,o){"use strict";cc._RF.push(t,"95b298kJt9CdJRfZrPOnf/u","NumberUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={DEGTORAD:Math.PI/180,RADTODEG:180/Math.PI,toInt:function(e,t){if(void 0===t&&(t=0),void 0===e)return t;if(e==1/0)return t;var o=parseInt(e,0);return!0===isNaN(o)?t:o},toFloat:function(e,t){if(void 0===t&&(t=0),void 0==e)return t;if(e==1/0)return t;var o=parseFloat(e);return!0===isNaN(o)?t:o},random:function(e,t,o){return void 0===o&&(o=!0),o?Math.floor(Math.random()*(t-e+1))+e:Math.floor(Math.random()*(t-e))+e},isNumber:function(e){return!(!/^\d+(\.\d+)?$/.test(e)&&!/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/.test(e))}},cc._RF.pop()},{}],NumerocKeypad:[function(e,t,o){"use strict";cc._RF.push(t,"8d8b2i+xztClpF92yDPNvuf","NumerocKeypad"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Script/ui/PanelBase"),r=e("../../Script/event/EventCenter"),a=e("../../Script/utils/GameUtil"),i=e("./InputBoxComponent"),s=e("../../Script/framework/constant/GameConstant"),c=cc._decorator,u=c.ccclass,l=c.property;function d(e){return!(!/^\d+(\.\d+)?$/.test(e)&&!/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/.test(e))}var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cursorPrefab=null,t.needCursorRotation=!1,t.maxNumberLen=2,t.isPolynomial=!1,t.PolynomialInputBoxLenArray=[],t.isDelSingleChar=!1,t.isNumberCanDrag=!0,t.isInputNeedInTurn=!0,t.isAutoMove2Next=!0,t.outPutLabelNodes=[],t.cursorScaleX=1,t.cursorScaleY=1,t.isNeedCheckAnswer=!0,t.cursorNode=null,t.isAllInput=!1,t.curInputBoxNode=null,t.blankDeltaX=0,t.blankDeltaY=0,t.blankWidth=0,t.blankHeight=0,t.customLight=!1,t.customSF1=null,t.customSF2=null,t.sfx_bttn=null,t.sfx_deny=null,t.sfx_wrngwrn=null,t._isCanTouch=!0,t.inputBoxInitInfos=[],t.isAnswerRight=!1,t.isGameBegin=!1,t.drageItems=[],t.curInputBoxIndex=0,t.errorInputBoxIds=[],t.originalColor=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"isCanTouch",{get:function(){return this._isCanTouch},set:function(e){this._isCanTouch=e},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),r.EVT.on("numerocKeypad_error_number",this.onResultError,this),r.EVT.on("numerocKeypad_anwer_right",this.onResultRight,this),r.EVT.on("numerocKeypad_input_error",this.onInputError,this),r.EVT.on("gameBegin",this._onHandleGameBegin,this),r.EVT.on("numerocKeypad_submit",this.onHandleSubmit,this),r.EVT.on("baseClick",this.onHandleBaseClick,this),this.checkNeedShowCursor(),this.isNumberCanDrag&&(r.EVT.on("drop",this._onHandleDrop,this),r.EVT.on("cancel",this._onHandleDropWrong,this),r.EVT.on("dropWrong",this._onHandleDropWrong,this),r.EVT.on("dragItem_click",this._dragItemClick,this)),this.setInputBoxRootNode(),this.curInputBoxNode=this.outPutLabelNodes[0]},t.prototype.start=function(){this.addTouchEventForNumberBtn()},t.prototype.onDisable=function(){r.EVT.targetOff(this)},t.prototype.initBoard=function(){if(this.outPutLabelNodes[0]&&this.cursorPrefab){this.cursorNode||(this.cursorNode=cc.instantiate(this.cursorPrefab)),this.cursorNode.parent=this.outPutLabelNodes[0].parent,this.cursorNode.x=5e3,this.cursorNode.scaleX=this.cursorScaleX,this.cursorNode.scaleY=this.cursorScaleY,this.needCursorRotation&&(this.cursorNode.rotation=90);var e=new cc.Event.EventTouch([],!1);e.target=this.outPutLabelNodes[0],this.onInputBoxClick(e,!1)}},t.prototype.addTouchEventForNumberBtn=function(){for(var e=0,t=this.node.children;e<t.length;e++){var o=t[e],n=o.getComponentInChildren(cc.Button);if(this.isNumberCanDrag){var r=n.getComponentInChildren(cc.Label).string;if(console.log("shuru: ",r),d(r)||"+"==r||"-"==r||"\u4e0a"==r||"\u4e0b"==r||"\u5de6"==r||"\u53f3"==r){n&&n.destroy();var a=o.getComponent("item");a||(a=o.addComponent("item")),a.retain=!0,a.dropIn=!1,a.revertOnCancel=!0,this.drageItems.push(a),a.async=this.gameData.type!=s.GameSyncTypeEnum.DISTRIBUTE,this.isInputNeedInTurn||(a.items=this.outPutLabelNodes)}}if(n){var i=new cc.Component.EventHandler;i.target=this.node,i.component="NumerocKeypad",i.handler="onBtnClick",i.customEventData=n.node.getComponentInChildren(cc.Label).string,n.clickEvents.push(i)}}this.updateNumberDragItemTargets()},t.prototype.updateNumberDragItemTargets=function(){if(this.isNumberCanDrag)for(var e=0,t=this.node.children;e<t.length;e++){var o=t[e].getComponent("item");o&&this.getCurInputBoxLabel()&&(this.isInputNeedInTurn?o.items[0]=this.getCurInputBoxLabel().node.parent:o.items=this.outPutLabelNodes)}},t.prototype.onBtnClick=function(e,t){cc.log("onBtnClick "+t),this.doInputStr(t),this._sendBaseClickSocketMsg("keypadClick",{inputStr:t,curInputBoxId:this.curInputBoxNode.increaseId})},t.prototype.doInputStr=function(e){if(console.log("doInputStr",e),!this.checkInputIsLegal(e)||!this._isCanTouch)return cc.warn("\u8f93\u5165\u7684\u975e\u6cd5\u5b57\u7b26"),void console.log("\u975e\u6cd5");if(a.GameUtil.playAudioEffect(this.sfx_bttn),this.isAnswerRight)for(var t=0;t<this.outPutLabelNodes.length;t++){(this.outPutLabelNodes[t].getComponentInChildren(cc.Label)||this.outPutLabelNodes[t].getComponent(cc.Label)).node.color=this.inputBoxInitInfos[t].color,this.outPutLabelNodes[t].scale=this.inputBoxInitInfos[t].scale,this.outPutLabelNodes[t].opacity=255}var o=["+","-","=","*","/"],n=this.getCurInputBoxLabel();if(d(e)||"\u4e0a"==e||"\u4e0b"==e||"\u5de6"==e||"\u53f3"==e||"."==e){var r=this.maxNumberLen;this.curInputBoxNode.getComponent(i.default)&&(r=this.curInputBoxNode.getComponent(i.default).strLength),console.log("inputStr.length",e.length),r*=e.length,n.string.length<r&&-1==o.indexOf(n.string)?n.string+=e:n.string=e,n.string=n.string.slice(-r),n.string.length==r&&this.isAutoMove2Next&&this.curInputBoxIndex!=this.outPutLabelNodes.length-1&&this.doInputStr("next")}else if(-1!=o.indexOf(e))console.log("\u52a0\u51cf\u4e58\u9664",e),n.string=e,console.log("",this.isAutoMove2Next,this.curInputBoxIndex,this.outPutLabelNodes.length-1),this.isAutoMove2Next&&this.curInputBoxIndex!=this.outPutLabelNodes.length-1&&this.doInputStr("next");else if("back"==e)if(this.isDelSingleChar){var s=this.getCurInputBoxLabel(),c=s.string;c=c.substr(0,c.length-1),s.string=c}else this.getCurInputBoxLabel().string="";else if("ok"==e){var u=new Array;for(t=0;t<this.outPutLabelNodes.length;t++)this.outPutLabelNodes[t].getComponentInChildren(cc.Label)?u.push(this.outPutLabelNodes[t].getComponentInChildren(cc.Label).string):this.outPutLabelNodes[t].getComponent(cc.Label)&&u.push(this.outPutLabelNodes[t].getComponent(cc.Label).string);this.checkResultDelegateFunc?this.isAnswerRight=this.checkResultDelegateFunc(u,this.PolynomialInputBoxLenArray):this.isAnswerRight=!0}else if("next"==e){if(this.getCurInputBoxLabel())if(!this.getCurInputBoxLabel().string)return void a.GameUtil.playAudioEffect(this.sfx_deny);this.curInputBoxNode=this.getNextInputBox(),this.cursorNode&&(this.cursorNode.x=this.curInputBoxNode.x+this.blankDeltaX,this.cursorNode.y=this.curInputBoxNode.y+this.blankDeltaY),this.checkNeedShowCursor()}else console.log("ssssss");this.checkIsAllInput(),this.checkNeedShowCursor()},t.prototype.checkInputIsLegal=function(e){var t=!0;if(-1!=this.curInputBoxNode.name.search("digitalNode"))try{parseInt(e)}catch(e){t=!1}else-1!=this.curInputBoxNode.name.search("symbolNode")&&"+"!=e&&"-"!=e&&"="!=e&&"*"!=e&&"\\"!=e&&(t=!1);return t},t.prototype.onInputBoxClick=function(e,t){if(void 0===t&&(t=!0),cc.log("onInputBoxClick "+e.target.increaseId),this.getCurInputBoxLabel())this.getCurInputBoxLabel(),e.target.getComponentInChildren(cc.Label).string;this.curInputBoxNode=e.target;for(var o=this.outPutLabelNodes.length,n=0;n<o;n++)this.outPutLabelNodes[n].increaseId==this.curInputBoxNode.increaseId&&(this.curInputBoxIndex=n);this.cursorNode&&(this.cursorNode.x=this.curInputBoxNode.x+this.blankDeltaX,this.cursorNode.y=this.curInputBoxNode.y+this.blankDeltaY),t&&a.GameUtil.playAudioEffect(this.sfx_bttn),this._sendBaseClickSocketMsg("inputBoxClick",{increaseId:this.curInputBoxNode.increaseId}),this.checkNeedShowCursor()},t.prototype.checkIsAllInput=function(){for(var e=!0,t=0,o=this.outPutLabelNodes;t<o.length;t++){var n=o[t];if(""==(n.getComponentInChildren(cc.Label)||n.getComponent(cc.Label)).string){e=!1;break}}var a=this.node.getChildByName("num_btnRight"),i=this.node.getChildByName("num_btnNext");e?(i&&(i.active=!1),a&&(a.active=!0)):(a&&!i&&(a.active=!0),i&&a&&(i.active=!0,a.active=!1)),this.isAllInput=e,r.EVT.emit("numerocKeypad_is_allInput",{isAllInput:e})},t.prototype.checkNeedShowCursor=function(){if(cc.log("isAnswerRight  "+this.isAnswerRight),this.curInputBoxNode){this.cursorNode.x=this.curInputBoxNode.x+this.blankDeltaX+0,this.cursorNode.y=this.curInputBoxNode.y+this.blankDeltaY,this.gameData&&this.gameData.type==s.GameSyncTypeEnum.DISTRIBUTE?this.cursorNode.active=this.isGameBegin:this.cursorNode.active=!0,console.log("name===",this.curInputBoxNode.name),this.customLight&&("customNode1"==this.curInputBoxNode.name?this.cursorNode.getComponent(cc.Sprite).spriteFrame=this.customSF1:"customNode2"==this.curInputBoxNode.name&&(this.cursorNode.getComponent(cc.Sprite).spriteFrame=this.customSF2)),this.cursorNode.width=this.curInputBoxNode.width+this.blankWidth,this.cursorNode.height=this.curInputBoxNode.height+this.blankHeight,this.isAnswerRight&&(this.cursorNode.active=!1),this.cursorNode.getComponent("xuanzhong").showAni(this.cursorNode.active),this.isInputNeedInTurn&&this.updateNumberDragItemTargets()}},t.prototype.setInputBoxRootNode=function(){this.outPutLabelNodes=[],this.isAnswerRight=!1,this.curInputBoxIndex=0;var e=this.node.parent.getChildByName("inputBoxNode").getChildByName("textBoxs");if(e instanceof cc.Node)for(var t=void 0,o=0;o<e.childrenCount;o++)"xuanzhong"!=(t=e.children[o]).name&&(this.outPutLabelNodes.push(t),t.on(cc.Node.EventType.TOUCH_END,this.onInputBoxClick,this));this.curInputBoxNode=null,this.initBoard();for(o=0;o<this.outPutLabelNodes.length;o++){var n=this.outPutLabelNodes[o].getComponentInChildren(cc.Label)||this.outPutLabelNodes[o].getComponent(cc.Label);n&&(this.inputBoxInitInfos[o]={color:n.node.color,scale:this.outPutLabelNodes[o].scale})}this.originalColor=this.inputBoxInitInfos[0].color,this.errorInputBoxIds=[]},t.prototype.reset=function(){for(var e=0,t=this.outPutLabelNodes;e<t.length;e++){var o=t[e];o.getComponentInChildren(cc.Label)&&(o.getComponentInChildren(cc.Label).string=""),o.getComponent(cc.Label)&&(o.getComponent(cc.Label).string="")}var n=new cc.Event.EventTouch([],!1);n.target=this.outPutLabelNodes[0],this.onInputBoxClick(n),this._isCanTouch=!0,this.errorInputBoxIds=[]},t.prototype.onHandleBaseClick=function(e){switch(console.log("onHandleBaseClick",e),e.msgType){case"inputBoxClick":cc.log("111111111  params.increaseId  "+e.increaseId);try{this.curInputBoxNode=this.getNodeByIncreaseId(e.increaseId)}catch(e){cc.error(e.toString())}this.cursorNode&&(this.cursorNode.x=this.curInputBoxNode.x+this.blankDeltaX,this.cursorNode.y=this.curInputBoxNode.y+this.blankDeltaY),this.checkNeedShowCursor();break;case"keypadClick":"next"!=e.inputStr&&this.doInputStr(e.inputStr),console.log("",this.curInputBoxNode.increaseId,"    ",e.curInputBoxId),this.curInputBoxNode.increaseId!=e.curInputBoxId&&(this.curInputBoxNode=this._getNodeByIncreaseId(e.curInputBoxId),this.cursorNode&&(this.cursorNode.x=this.curInputBoxNode.x+this.blankDeltaX,this.cursorNode.y=this.curInputBoxNode.y+this.blankDeltaY),this.checkNeedShowCursor())}},t.prototype.getCurInputBoxLabel=function(){return this.curInputBoxNode?this.curInputBoxNode.getComponentInChildren(cc.Label)||this.curInputBoxNode.getComponent(cc.Label):null},t.prototype.getCurInputBoxSprite=function(){return this.curInputBoxNode?this.curInputBoxNode.getComponentInChildren(cc.Sprite)||this.curInputBoxNode.getComponent(cc.Sprite):null},t.prototype.onResultError=function(e){var t=this,o=e;void 0===o.unit&&(o.unit=1);var n=o.idx*o.unit;this._isCanTouch=!1;for(var r=function(e){a.outPutLabelNodes[e].childrenCount>0?a.outPutLabelNodes[e].children[0].runAction(cc.blink(1,3)):a.outPutLabelNodes[e].runAction(cc.blink(1,3));var o=a.outPutLabelNodes[e].getComponentInChildren(cc.Label)||a.outPutLabelNodes[e].getComponent(cc.Label),n=o.node.color;o.node.color=cc.color(225,114,45),setTimeout(function(){o.string="",o.node.color=n,t.checkNeedShowCursor(),t._isCanTouch=!0},1100)},a=this,i=n;i<n+o.unit;i++)r(i)},t.prototype.onInputError=function(e){var t=this;cc.log("onInputError  "+JSON.stringify(e));var o=[];this._isCanTouch=!1;for(var n=0,r=e.errorInfo;n<r.length;n++)for(var i=r[n],s=parseInt(i.idx);s<parseInt(i.idx)+e.unit;s++)o.push(s);var c=function(e){var n=o[e];u.outPutLabelNodes[n].childrenCount>0?u.outPutLabelNodes[n].children[0].runAction(cc.blink(1,3)):u.outPutLabelNodes[n].runAction(cc.blink(1,3));var r=u.outPutLabelNodes[n].getComponentInChildren(cc.Label)||u.outPutLabelNodes[n].getComponent(cc.Label);u.outPutLabelNodes[n].getComponentInChildren(cc.Sprite)||u.outPutLabelNodes[n].getComponent(cc.Sprite);r.node.color=cc.color(225,114,45),setTimeout(function(){r.string="",r.node.color=t.originalColor,t.outPutLabelNodes[n].opacity=255,t.checkNeedShowCursor()},1100)},u=this;for(s=0;s<o.length;s++)c(s);setTimeout(function(){for(var e=0;e<t.outPutLabelNodes.length;e++){t.outPutLabelNodes[e].opacity=255;var o=t.outPutLabelNodes[e].getComponentInChildren(cc.Label)||t.outPutLabelNodes[e].getComponent(cc.Label);o&&(o.node.color=t.originalColor,t._isCanTouch=!0)}},1200);var l=new cc.Event.EventTouch([],!1);l.target=this.outPutLabelNodes[o[0]],this.curInputBoxIndex=o[0].idx,this.onInputBoxClick(l),this.errorInputBoxIds=o,a.GameUtil.playAudioEffect(this.sfx_wrngwrn)},t.prototype.onHandleSubmit=function(){this.doInputStr("ok")},t.prototype.onResultRight=function(e){var t=this;if(!this.isPolynomial)for(var o=function(e){n.outPutLabelNodes[e].runAction(cc.scaleTo(1,1.1));var o=n.outPutLabelNodes[e].scale,r=n.outPutLabelNodes[e].getComponentInChildren(cc.Label)||n.outPutLabelNodes[e].getComponent(cc.Label);r.node.color;r.node.color=cc.color(0,255,48),setTimeout(function(){t.outPutLabelNodes[e].scale=o},1100)},n=this,r=this.outPutLabelNodes.length-e.unit;r<this.outPutLabelNodes.length;r++)o(r)},t.prototype.getNextInputBox=function(){var e=0,t=this.outPutLabelNodes.length;if(this.errorInputBoxIds.length){var o=0;t=this.errorInputBoxIds.length;for(r=0;r<this.errorInputBoxIds.length;r++)if(this.curInputBoxIndex==this.errorInputBoxIds[r]){o=r;break}var n=(o+1)%t;this.curInputBoxIndex=this.errorInputBoxIds[n]}else{for(var r=0;r<t;r++)this.outPutLabelNodes[r].increaseId==this.curInputBoxNode.increaseId&&(e=r);this.curInputBoxIndex=(e+1)%t}return this.outPutLabelNodes[this.curInputBoxIndex]},t.prototype._onHandleGameBegin=function(){this.isGameBegin=!0,this.checkNeedShowCursor()},t.prototype._dragItemClick=function(e){var t;t=e instanceof cc.Node?e:e.originNode||e.dragNode,this.doInputStr(t.getComponentInChildren(cc.Label).string)},t.prototype._onHandleDrop=function(e){var t;if(t=e instanceof cc.Node?e:e.originNode||e.dragNode,e.dragNode&&e.originNode){e.dragNode.parent=t.parent,e.dragNode.position=t.position;var o=e.dragNode.getComponent("item");o&&o.retain&&(o.cloneNode.active=!1)}t.active=!1,this.doInputStr(t.getComponentInChildren(cc.Label).string)},t.prototype._onHandleDropWrong=function(e){var t=e.originNode||e.dragNode;t.active=!1;var o=e.dragNode.getComponent("item");o&&o.retain&&(o.cloneNode.active=!1),t.isDropSuccess=!1},__decorate([l({type:cc.Prefab})],t.prototype,"cursorPrefab",void 0),__decorate([l({tooltip:"\u662f\u5426\u5149\u6807\u9700\u8981\u65cb\u8f6c"})],t.prototype,"needCursorRotation",void 0),__decorate([l],t.prototype,"maxNumberLen",void 0),__decorate([l({tooltip:"\u662f\u5426\u662f\u591a\u9879\u5f0f"})],t.prototype,"isPolynomial",void 0),__decorate([l({type:[cc.Integer],tooltip:"\u6bcf\u4e2a\u591a\u9879\u5f0f\u7684\u8f93\u5165\u6846\u4e2a\u6570"})],t.prototype,"PolynomialInputBoxLenArray",void 0),__decorate([l({tooltip:"\u662f\u5426\u4e00\u6b21\u6e05\u7a7a\u4e00\u4e2a\u5b57\u7b26"})],t.prototype,"isDelSingleChar",void 0),__decorate([l({tooltip:"\u6309\u952e\u662f\u5426\u652f\u6301\u53ef\u70b9\u53ef\u62d6"})],t.prototype,"isNumberCanDrag",void 0),__decorate([l({tooltip:"\u662f\u5426\u9700\u8981\u4f9d\u6b21\u8f93\u5165"})],t.prototype,"isInputNeedInTurn",void 0),__decorate([l],t.prototype,"isAutoMove2Next",void 0),__decorate([l()],t.prototype,"blankDeltaX",void 0),__decorate([l()],t.prototype,"blankDeltaY",void 0),__decorate([l()],t.prototype,"blankWidth",void 0),__decorate([l()],t.prototype,"blankHeight",void 0),__decorate([l({tooltip:"\u662f\u5426\u9700\u8981\u81ea\u5b9a\u4e49\u5149\u5708\u5916\u5f62\uff0c\u6bd4\u5982\u5706\u5f62\uff0c\u65b9\u5f62\uff0c\u6843\u5b50\u578b"})],t.prototype,"customLight",void 0),__decorate([l({type:cc.SpriteFrame,tooltip:"\u5149\u5708\u5916\u5f621",visible:function(){return this.customLight}})],t.prototype,"customSF1",void 0),__decorate([l({type:cc.SpriteFrame,tooltip:"\u5149\u5708\u5916\u5f622",visible:function(){return this.customLight}})],t.prototype,"customSF2",void 0),__decorate([l({type:cc.AudioClip})],t.prototype,"sfx_bttn",void 0),__decorate([l({type:cc.AudioClip})],t.prototype,"sfx_deny",void 0),__decorate([l({type:cc.AudioClip})],t.prototype,"sfx_wrngwrn",void 0),t=__decorate([u],t)}(n.default);o.default=p,cc._RF.pop()},{"../../Script/event/EventCenter":"EventCenter","../../Script/framework/constant/GameConstant":"GameConstant","../../Script/ui/PanelBase":"PanelBase","../../Script/utils/GameUtil":"GameUtil","./InputBoxComponent":"InputBoxComponent"}],PanelBase:[function(e,t,o){"use strict";cc._RF.push(t,"e32fa+KgG9PiJyzTnydaYNh","PanelBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../framework/constant/GameConstant"),r=e("../utils/GameUtil"),a=e("../plugin/tuoKeYun/TuoKeYunFramework"),i=e("../plugin/tuoKeYun/SdkMessageType"),s=e("../event/EventCenter"),c=e("../framework/message/CgMessageFramework"),u=e("../framework/model/UserModel"),l=e("../framework/model/RoomModel"),d=e("../manager/PanelManager"),p=e("../utils/NumberUtil"),g=e("../common/log/Log"),m=cc._decorator,h=m.ccclass,f=m.property,_=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.isNeedSetNodeIncreaseId=!0,e.rightAudio="",e.wrongAudio="",e.gameData=null,e.pageIndex=0,e._data=null,e._curSubTitleIndex=0,e}return __extends(o,t),o.prototype.onLoad=function(){this.isNeedSetNodeIncreaseId&&this._setIncreaseId(),this.gameData||(this.gameData=e("_games").games[l.RoomMgr.roomInfo.curPageIndex-1]),this._registerEvent()},o.prototype.reset=function(){},o.prototype._onShow=function(){if(g.default.debug("wuqd ----------  \u8fdb\u5165onshow pageIndex "+this.pageIndex),u.UserMgr.userInfo.roleType==n.H5RoleType.STUDENT||u.UserMgr.userInfo.roleType==n.H5RoleType.AIStudent)if(console.log("\u8eab\u4efd\u662f\u5b66\u751f"),u.UserMgr.userInfo.setShowTime(),l.RoomMgr.roomInfo.gameState>=n.GameState.BEGIN){console.log("\u6e38\u620f\u5f00\u59cb\u4e86"),u.UserMgr.userInfo.setStartTime();var e=r.GameUtil.getStore("gamestatus");e&&(e=JSON.parse(e));var t=l.RoomMgr.roomInfo.tryPageNumObj,o=l.RoomMgr.roomInfo.curPageIndex;g.default.debug("userData :  "+e+"  teacherData :   "+t),e&&t["page"+o]?t["page"+o]!=e.currTryPage?(a.SdkFramework.sendCocosMessage2Client(i.SdkMessageType.REQUEST_MASK_AUTHORIZE_PRIVILEGE,{show:!1}),u.UserMgr.userInfo.setGameStatus({status:0,currTryPage:l.RoomMgr.roomInfo.tryPageNumObj["page"+l.RoomMgr.roomInfo.curPageIndex]}),u.UserMgr.userInfo.uploadAnswer({moved:!1,isAnswer:!1,tryTime:0}),console.log("\u5f53\u524d\u6279\u6b21\u7684\u9898\u76ee\u672a\u5b8c\u6210")):0==e.status?(a.SdkFramework.sendCocosMessage2Client(i.SdkMessageType.REQUEST_MASK_AUTHORIZE_PRIVILEGE,{show:!1}),u.UserMgr.userInfo.setGameStatus({status:0,currTryPage:l.RoomMgr.roomInfo.tryPageNumObj["page"+l.RoomMgr.roomInfo.curPageIndex]}),u.UserMgr.userInfo.uploadAnswer({moved:!1,isAnswer:!1,tryTime:0}),console.log("\u5f53\u524d\u6279\u6b21\u7684\u9898\u76ee\u672a\u5b8c\u6210")):(a.SdkFramework.sendCocosMessage2Client(i.SdkMessageType.REQUEST_MASK_AUTHORIZE_PRIVILEGE,{show:!0}),console.log("\u5f53\u524d\u6279\u6b21\u7684\u9898\u76ee\u5df2\u7ecf\u5b8c\u6210"),u.UserMgr.userInfo.setGameStatus({status:1,currTryPage:l.RoomMgr.roomInfo.tryPageNumObj["page"+l.RoomMgr.roomInfo.curPageIndex]})):(console.log("\u65b0\u52a0\u5165"),a.SdkFramework.sendCocosMessage2Client(i.SdkMessageType.REQUEST_MASK_AUTHORIZE_PRIVILEGE,{show:!1}),u.UserMgr.userInfo.setGameStatus({status:0,currTryPage:l.RoomMgr.roomInfo.tryPageNumObj["page"+l.RoomMgr.roomInfo.curPageIndex]}))}else console.log("\u6e38\u620f\u672a\u5f00\u59cb"),a.SdkFramework.sendCocosMessage2Client(i.SdkMessageType.REQUEST_MASK_AUTHORIZE_PRIVILEGE,{show:!0});l.RoomMgr.roomInfo.gameState>=n.GameState.BEGIN&&this._onHandleGameBegin()},o.prototype.start=function(){},o.prototype._registerEvent=function(){s.EVT.on("drop",this._onHandleDrop,this),s.EVT.on("cancel",this._onHandleDropCancel,this),s.EVT.on("dropWrong",this._onHandleDropWrong,this),s.EVT.on("dragItem_click",this._dragItemClick,this),s.EVT.on("dragStart",this._onHandleDragStart,this),s.EVT.on("gameBegin",this._onHandleGameBegin,this),s.EVT.on("teacher_click_game_end",this._onHandleGameEnd,this)},o.prototype._sendBaseClickSocketMsg=function(e,t){void 0===t&&(t={}),l.RoomMgr.roomInfo.gameState<n.GameState.BEGIN&&r.GameUtil.isTeacher()&&(t.msgType=e,r.GameUtil.teacherClickBase({name:t},{name:t}))},o.prototype._setIncreaseId=function(e){void 0===e&&(e=d.PanelManager.getInstance().curPanelBase.node);var t=0;(function e(o){if(o.increaseId=t++,0!==o.children.length)for(var n=0,r=o.children;n<r.length;n++)e(r[n])})(e||this.node)},o.prototype._getNodeByIncreaseId=function(e,t){if(void 0===t&&(t=d.PanelManager.getInstance().curPanelBase.node),cc.log(" getNodeByIncreaseId "),t.increaseId==e)return t;for(var o=0,n=t.children;o<n.length;o++){var r=n[o],a=this._getNodeByIncreaseId(e,r);if(a)return a}},o.prototype.onDisable=function(){cc.audioEngine.stopAllEffects(),cc.audioEngine.stopAll(),cc.audioEngine.stopMusic()},o.prototype.onDestroy=function(){s.EVT.targetOff(this)},o.prototype._onHandleDrop=function(e){},o.prototype._onHandleDropCancel=function(e){},o.prototype._onHandleDropWrong=function(e){},o.prototype._onHandleGameBegin=function(){},o.prototype._dragItemClick=function(e){},o.prototype._onHandleDragStart=function(e){r.GameUtil.playAudioEffect("sound/sfx_catch")},o.prototype._onHandleGameEnd=function(){},o.prototype._finishAnswer=function(e){void 0===e&&(e=n.SettlementAnimationType.NORMLAL),this.gameData.type!=n.GameSyncTypeEnum.DISTRIBUTE||u.UserMgr.userInfo.roleType!=n.H5RoleType.STUDENT&&u.UserMgr.userInfo.roleType!=n.H5RoleType.AIStudent||c.MessageSender.studentAnswer(e),e==n.SettlementAnimationType.NORMLAL?r.GameUtil.showSuccess():e==n.SettlementAnimationType.NO_SUCCESS||r.GameUtil.showUnusualSuccessAnimation(e)},o.prototype._setWrongNumber=function(){this.gameData.type!=n.GameSyncTypeEnum.DISTRIBUTE||u.UserMgr.userInfo.roleType!=n.H5RoleType.STUDENT&&u.UserMgr.userInfo.roleType!=n.H5RoleType.AIStudent||(u.UserMgr.userInfo.answerInfo.wrong+=1,c.MessageSender.studentWrongAnswer())},o.prototype._wrongAnswer=function(e){this.gameData.type==n.GameSyncTypeEnum.DISTRIBUTE&&l.RoomMgr.roomInfo.gameState>=n.GameState.BEGIN&&(this._setWrongNumber(),this._playWrongAudio(e))},o.prototype._rightFinishAnswer=function(e){void 0===e&&(e=n.SettlementAnimationType.NORMLAL),this.gameData.type==n.GameSyncTypeEnum.DISTRIBUTE&&l.RoomMgr.roomInfo.gameState>=n.GameState.BEGIN?(this._playRightAudio(),this._finishAnswer(e)):this._finishAnswer(e)},o.prototype._playRightAudio=function(){r.GameUtil.playAudioEffect("sound/answer/sfx_right")},o.prototype._playWrongAudio=function(e){var t=["Neg01","Neg02","Neg03","Neg04","Neg05"],o=t[p.default.random(0,t.length,!1)];e?r.GameUtil.playAudioEffect("sound/sfx_wrong"):(cc.audioEngine.stopAllEffects(),r.GameUtil.playAudioEffect("sound/answer/wrong/"+o))},o.prototype._playCombAudio=function(){cc.audioEngine.stopAllEffects(),r.GameUtil.playAudioEffect("sound/answer/comb/Ab0"+this._curSubTitleIndex)},__decorate([f({tooltip:"\u662f\u5426\u9700\u8981\u8bbe\u7f6e\u8282\u70b9Id"})],o.prototype,"isNeedSetNodeIncreaseId",void 0),o=__decorate([h],o)}(cc.Component);o.default=_,cc._RF.pop()},{"../common/log/Log":"Log","../event/EventCenter":"EventCenter","../framework/constant/GameConstant":"GameConstant","../framework/message/CgMessageFramework":"CgMessageFramework","../framework/model/RoomModel":"RoomModel","../framework/model/UserModel":"UserModel","../manager/PanelManager":"PanelManager","../plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../plugin/tuoKeYun/TuoKeYunFramework":"TuoKeYunFramework","../utils/GameUtil":"GameUtil","../utils/NumberUtil":"NumberUtil",_games:"_games"}],PanelManager:[function(e,t,o){"use strict";cc._RF.push(t,"c7b48kWCw1H+LRDreaVO30C","PanelManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../ui/PanelBase"),r=e("../common/log/Log"),a=e("../framework/network/socket/SocketManager"),i=e("../framework/network/socket/CgSocketFrameWork"),s=e("../common/component/SocketComponent"),c=e("../event/EventCenter"),u=e("../framework/model/UserModel"),l=e("../framework/model/RoomModel"),d=e("../utils/GameUtil"),p=e("../plugin/tuoKeYun/SdkMessageType"),g=e("../plugin/tuoKeYun/TuoKeYunFramework"),m=cc._decorator,h=m.ccclass,f=m.property,_=e("_games"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.commonLayer=null,t.panelLayer=null,t.maskLayer=null,t.HUDLayer=null,t.toastLayer=null,t.alertLayer=null,t.isLoadingPage=!1,t.curPanelBase=null,t}var o;return __extends(t,e),o=t,t.getInstance=function(){var e=cc.find("UICanvas");if(null===e)return r.default.error("LayerCanvas not found!"),null;var t=e.getComponent(o);return null===t?(r.default.error("PanelManager not found!"),null):t},t.prototype.initUIRootNode=function(){this.node.zIndex=1e3,cc.game.addPersistRootNode(this.node)},t.prototype.onLoad=function(){this.initUIRootNode(),this.rewriteCCNodeDispatch(),cc.game.on(cc.game.EVENT_HIDE,function(){a.SocketMgr.isConnected()&&a.SocketMgr.close(),i.default.sendMsg2Group("\u8bfe\u4ef6\u5207\u6362\u5230\u540e\u53f0"),cc.audioEngine.pauseAll()}),this.node.on(cc.Node.EventType.TOUCH_END,function(){console.log("\u53ea\u662f\u4e3a\u4e86\u6709\u4e2a\u4e8b\u4ef6\uff0c\u4e0d\u53ef\u5220\u9664\u8fd9\u4e2a\u4e8b\u4ef6")}),cc.game.on(cc.game.EVENT_SHOW,function(){if(!a.SocketMgr.isConnected()){var e=cc.find("UICanvas").getComponent(s.SocketComponent);e&&e.connect2GameServer()}i.default.sendMsg2Group("\u8bfe\u4ef6\u663e\u793a\u51fa\u6765"),cc.audioEngine.resumeAll()})},t.prototype.onDisable=function(){c.EVT.targetOff(this)},t.prototype.rewriteCCNodeDispatch=function(){var e,t=this;e=cc.Node.prototype.dispatchEvent,cc.Node.prototype.dispatchEvent=function(o){o.type==cc.Node.EventType.TOUCH_END?(t.pushAnswerData(),e.call(o.currentTarget,o)):e.call(o.currentTarget,o)}},t.prototype.pushAnswerData=function(){u.UserMgr.userInfo.answerInfo.moved||(u.UserMgr.userInfo.setOperatingTime(),u.UserMgr.userInfo.uploadAnswer({moved:!0,isAnswer:!1,tryTime:0}),u.UserMgr.userInfo.answerInfo.moved=!0)},t.prototype.loader=function(e,t,o,a){void 0===t&&(t=null),this.isLoadingPage=!0;var i=this;o||(o=l.RoomMgr.roomInfo.curPageIndex),t||(t=this.panelLayer),r.default.debug("loader  self.isLoadingPage = true pageIndex: "+o),cc.loader.loadRes(e,cc.Prefab,function(e,s){if(e)return g.SdkFramework.sendCocosException2Client("changePage","\u5207\u7b2c "+o+" \u52a0\u8f7d\u8d44\u6e90 \u5931\u8d25",e.message),r.default.error("\u5207\u7b2c "+o+" \u52a0\u8f7d\u5931\u8d25 "+e.message),i.isLoadingPage=!1,void(a&&a(o-1));d.GameUtil.stopTimeoutAni(),d.GameUtil.stopShowSuccess(),i.isLoadingPage=!1,r.default.debug("------ \u52a0\u8f7d\u5b8c\u6210\uff0c\u8bfe\u4ef6\u5f53\u524d\u9875\u6570\uff1a  "+o);for(var u=0,l=t.children;u<l.length;u++){l[u].destroy()}var m=cc.instantiate(s),h=m.getComponent(n.default);h||(h=m.addComponent(n.default));try{i.curPanelBase=h,h.pageIndex=o,m.parent=t,h._onShow(),c.EVT.emit(p.SdkMessageType.ON_PAGE_CHANGE_SUCCESS),a&&a(o)}catch(e){g.SdkFramework.sendCocosException2Client("changePage","\u5c1d\u8bd5\u5207\u7b2c "+o+" \u5931\u8d25",e),r.default.error("\u5c1d\u8bd5\u5207\u7b2c "+o+" \u5931\u8d25 "+e),i.isLoadingPage=!1,a&&a(o-1)}})},t.prototype.changeGameByPageIndex=function(e,t,o){e||(e=l.RoomMgr.roomInfo.curPageIndex||1);var n=this;t=t||this.panelLayer;var a=_.games[e-1];a&&a.name?function(r){var i="";i=r&&r.perfabUrl?r.perfabUrl:d.GameUtil.getPrefabUrlByPageName(a.name),n.loader(i,t,e,o)}.call(this,a):r.default.error("\u6ca1\u6709\u627e\u5230\u7b2c"+e+"\u9875\u7684\u914d\u7f6e\u4fe1\u606f")},__decorate([f(cc.Node)],t.prototype,"commonLayer",void 0),__decorate([f(cc.Node)],t.prototype,"panelLayer",void 0),__decorate([f(cc.Node)],t.prototype,"maskLayer",void 0),__decorate([f(cc.Node)],t.prototype,"HUDLayer",void 0),__decorate([f(cc.Node)],t.prototype,"toastLayer",void 0),__decorate([f(cc.Node)],t.prototype,"alertLayer",void 0),t=o=__decorate([h],t)}(cc.Component);o.PanelManager=y,cc._RF.pop()},{"../common/component/SocketComponent":"SocketComponent","../common/log/Log":"Log","../event/EventCenter":"EventCenter","../framework/model/RoomModel":"RoomModel","../framework/model/UserModel":"UserModel","../framework/network/socket/CgSocketFrameWork":"CgSocketFrameWork","../framework/network/socket/SocketManager":"SocketManager","../plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../plugin/tuoKeYun/TuoKeYunFramework":"TuoKeYunFramework","../ui/PanelBase":"PanelBase","../utils/GameUtil":"GameUtil",_games:"_games"}],PrePageButton:[function(e,t,o){"use strict";cc._RF.push(t,"dff5bAnWUVEHYDzKDCHoXlX","PrePageButton"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../TeacherButton"),r=cc._decorator.ccclass,a=e("../../../Script/framework/model/RoomModel"),i=e("../../../Script/framework/message/CgMessageFramework"),s=e("../../../Script/utils/GameUtil"),c=e("../../../Script/manager/PanelManager"),u=e("../../../Script/event/EventCenter"),l=e("../../../Script/plugin/tuoKeYun/SdkMessageType"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),a.RoomMgr.roomInfo.curPageIndex<=1?this.disBtn():this.bindBtnEvent()},t.prototype.onBtnClick=function(){e.prototype.onBtnClick.call(this),a.RoomMgr.roomInfo.curPageIndex<=1||s.GameUtil.isTeacher()&&(a.RoomMgr.roomInfo.curPageIndex-=1,a.RoomMgr.roomInfo.answerRecord="",i.MessageSender.messageSender.sendPageChange(a.RoomMgr.roomInfo.curPageIndex),c.PanelManager.getInstance().changeGameByPageIndex(a.RoomMgr.roomInfo.curPageIndex),u.EVT.emit(l.SdkMessageType.ON_PAGE_CHANGE,{toPage:a.RoomMgr.roomInfo.curPageIndex}))},t=__decorate([r],t)}(n.TeacherButton);o.PrePageButton=d,cc._RF.pop()},{"../../../Script/event/EventCenter":"EventCenter","../../../Script/framework/message/CgMessageFramework":"CgMessageFramework","../../../Script/framework/model/RoomModel":"RoomModel","../../../Script/manager/PanelManager":"PanelManager","../../../Script/plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../../../Script/utils/GameUtil":"GameUtil","../TeacherButton":"TeacherButton"}],ResourceManager:[function(e,t,o){"use strict";cc._RF.push(t,"dd9e9DPsFdNmYtYpY1t9qkL","ResourceManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/StringUtil"),r=e("../common/log/Log"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.DOWNLOAD_PROGRESS="DOWNLOAD_PROGRESS",t.DOWNLOAD_COMPLETE="DOWNLOAD_COMPLETE",t.DOWNLOAD_FAIL="DOWNLOAD_FAIL",t._resMap={},t._resDataMap={},t._downloadUrl="",t._spriteAtlas=new Map,t}return __extends(t,e),t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.loadArr=function(e){var t=this;e instanceof Array?e.forEach(function(e,o,n){n[o]=t._downloadUrl+cc.url.raw(e)+(""===t._downloadUrl?"":"?v="+(new Date).getTime())},this):e instanceof String&&(e=this._downloadUrl+cc.url.raw(String(e)));var r=this;cc.loader.load(e,function(e,a,i){if(i.error)console.log("\u52a0\u8f7d\u5931\u8d25\uff1a"+i.error.errorMessage);else{var s=n.default.getShortFileName(i.url);r._resMap[s]=i.url;var c=(100*e/a).toFixed(2),u={url:i.rawUrl,type:i.type,progress:c};console.log("\u52a0\u8f7d\u6210\u529f\uff1a"+i.url),t.emit(o.RES.DOWNLOAD_PROGRESS,u)}},function(n,r){if(n){for(var a=0;a<n.length;a++)cc.log("Error url ["+n[a]+"]: "+r.getError(n[a]));t.emit(o.RES.DOWNLOAD_FAIL,n)}else t.emit(o.RES.DOWNLOAD_COMPLETE,e)})},t.prototype.loadResArray=function(e,t){var n=this;cc.loader.loadResArray(e,t,function(e,t,r){var a=(100*e/t).toFixed(2),i={url:r.rawUrl,type:r.type,progress:a};n.emit(o.RES.DOWNLOAD_PROGRESS,i)},function(e,t){e?n.emit(o.RES.DOWNLOAD_FAIL,e):n.emit(o.RES.DOWNLOAD_COMPLETE,t)})},t.prototype.loadImage=function(e,t,o){r.default.debug("utils.loadUrlImage",e),e&&(e.indexOf("http")<0&&(e=cc.url.raw(e)),cc.loader.load(e,function(n,a){!n&&a instanceof cc.Texture2D?(r.default.debug("loadUrlImage success: ",e,a),t.spriteFrame=new cc.SpriteFrame(a,new cc.Rect(0,0,a.width,a.height))):r.default.debug("loadUrlImage failed: ","["+n+"]"),o&&o(n,a)}))},t.prototype.loadResAtlas=function(e,t){var o=this;cc.loader.loadRes(e,cc.SpriteAtlas,function(a,i){if(a)r.default.debug("loadResAtlas "+e+" failed!");else{var s=n.default.getFileName(e);o._spriteAtlas.set(s,i)}t&&"function"==typeof t&&t.call({},a,i)})},t.prototype.loadSpriteFrameRes=function(e,t){var o=this;cc.loader.loadRes(e,cc.SpriteFrame,function(a,i){if(!a&&i instanceof cc.SpriteFrame){r.default.debug("loadUrlImage success: ",e,i);var s=n.default.getShortFileName(e);o._resMap[s]=e,t&&"function"==typeof t&&t.call({},i)}else r.default.debug("loadUrlImage failed: ","["+a+"]")})},t.prototype.setRes=function(e,t){this._resDataMap[e]=t},t.prototype.getSpriteFrameArray=function(e){var t=n.default.getFileName(e);return this._spriteAtlas.has(t)?this._spriteAtlas.get(t):null},t.prototype.getSpriteFrame=function(e,t){var o=n.default.getFileName(e);return this._spriteAtlas.has(o)?(t=n.default.getShortFileName(t),this._spriteAtlas.get(o).getSpriteFrame(t)):(r.default.debug("res ["+t+"] not found in "+o+" atlas"),null)},t.prototype.loadData=function(e,t){cc.loader.load(cc.url.raw(e),function(o,n){o?r.default.debug("loadData error"):(r.default.debug("loadData success "+cc.url.raw(e)),t&&"function"==typeof t&&t.call({},n))})},t.prototype.get=function(e){var t=null;return 0==e.length?t:((t=cc.loader.getRes(this._resMap[e]))||(t=cc.loader.getRes(this._resMap[n.default.getShortFileName(e)]))||(t=cc.loader.getRes(e))||(t=this._resDataMap[e]),t)},t.prototype.getRes=function(e){var t=null;return 0==e.length?t:((t=this._resDataMap[e])||(t=this._resDataMap[n.default.getShortFileName(e)])||(t=cc.loader.getRes(e)),t)},Object.defineProperty(t.prototype,"downloadUrl",{set:function(e){this._downloadUrl=e},enumerable:!0,configurable:!0}),t._instance=null,t}(cc.EventTarget);o.ResourceManager=a,o.RES=a.getInstance(),cc._RF.pop()},{"../common/log/Log":"Log","../utils/StringUtil":"StringUtil"}],RoomModel:[function(e,t,o){"use strict";cc._RF.push(t,"39c8eT7D3VB95hgn0MBYo7S","RoomModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../constant/GameConstant"),r=e("../../game/data/GlobalData"),a=e("../network/socket/CgSocketFrameWork"),i=e("../../utils/GameUtil"),s=e("../message/CgMessageFramework"),c=e("../../common/log/Log"),u=e("./UserModel"),l=function(){function e(){this.roomInfo=null,this.roomInfo=new d,cc.log("cc.url._rawAssets  "+cc.url._rawAssets)}return e.getInstance=function(){return e._instance||(e._instance=new e)},e._instance=null,e}();o.default=l;var d=function(){function e(){this.userList=new Array,this.totalPage=0,this.classId=cc.url._rawAssets+"avc23456345wqdsas2345",this.classType="",this.studentList=new Array,this._gameBeginTimeStamp=0,this.answerRecord="",this._groupId="",this._curPageIndex=1,this._gameState=0,this._tryPageNumObj=new Object}return Object.defineProperty(e.prototype,"groupId",{get:function(){return this._groupId||(this.groupId=this.classId+"-"+r.GLOBAL.baseInfo.lessonId+r.GLOBAL.fileid),this._groupId},set:function(e){e&&(this._groupId=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curPageIndex",{get:function(){return this._curPageIndex},set:function(e){this._curPageIndex=e,r.GLOBAL.isLoginFinish&&(this.gameState=n.GameState.INIT,this.answerRecord=""),a.default.setGroupCommon()},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return i.GameUtil.object2Json(this)},Object.defineProperty(e.prototype,"gameBeginTimeStamp",{get:function(){return this._gameBeginTimeStamp},set:function(e){this._gameBeginTimeStamp=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameState",{get:function(){return this._gameState||0},set:function(e){this._gameState=e,e==n.GameState.BEGIN&&(this.gameBeginTimeStamp=(new Date).getTime()),a.default.setGroupCommon()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tryPageNumObj",{get:function(){return this._tryPageNumObj},set:function(e){this._tryPageNumObj=e,a.default.setGroupCommon(),u.UserMgr.userInfo.roleType==n.H5RoleType.TEACHER&&s.MessageSender.messageSender.sendCustomMessage("changeTryPage",{value:e})},enumerable:!0,configurable:!0}),e.prototype.settryPageNumObj=function(){var e=this.tryPageNumObj,t=this.curPageIndex;if(e.hasOwnProperty("page"+t)){var o=e["page"+t];e["page"+t]=o+1}else e["page"+t]=1;return this.tryPageNumObj=e,cc.log("\u5b58\u7684\u6570\u636e",e),Promise.resolve()},e.prototype.getTeacherTryPageNum=function(){var e=this.tryPageNumObj["page"+this.curPageIndex];return cc.log("\u8001\u5e08\u6570\u636e\uff1a"),cc.log(e),e||1},e.prototype.onUserJoinSuccess=function(e){for(var t=!1,o=0,n=this.userList;o<n.length;o++){var r=n[o];if(e.uid==r.uid){t=!0,r.isOnline=!0;break}}t||(e.isOnline=!0,c.default.debug("new user join group "+JSON.stringify(e)),this.userList.push(e)),a.default.setGroupCommon()},e.prototype.getSocketUserInfoBy=function(e){for(var t=0,o=this.userList;t<o.length;t++){var n=o[t];if(n.uid==e)return n}return null},e.prototype.onUserLevel=function(e){for(var t=0,o=this.userList;t<o.length;t++){var n=o[t];if(e.uid==n.uid){n.isOnline=!1;break}}a.default.setGroupCommon()},e.prototype.convertFromServerData=function(e){i.GameUtil.convertFormStringValue(e,this)},e}();o.RoomInfo=d;var p=function(){function e(){}return e.prototype.convertFromServerData=function(e){i.GameUtil.convertFormStringValue(e,this)},e.prototype.toString=function(){return i.GameUtil.object2Json(this)},e}();o.GameDataInfo=p,o.RoomMgr=l.getInstance(),cc._RF.pop()},{"../../common/log/Log":"Log","../../game/data/GlobalData":"GlobalData","../../utils/GameUtil":"GameUtil","../constant/GameConstant":"GameConstant","../message/CgMessageFramework":"CgMessageFramework","../network/socket/CgSocketFrameWork":"CgSocketFrameWork","./UserModel":"UserModel"}],SdkMessageType:[function(e,t,o){"use strict";cc._RF.push(t,"f97e2fOLm5M/4xHlkds5n/X","SdkMessageType"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.ON_PAGE_NUM="onPagenum",e.ON_LOAD_COMPLETE="onLoadComplete",e.ON_PAGE_CHANGE="onJumpPage",e.ON_CUSTOM_MSG="onFileMessage",e.ON_EXTEND_NOTICE="ExtendedNotice",e.ON_H5_MESSAGE="h5Message",e.CG_COCOS_MESSAGE="CocosMessage",e.REQUEST_MASK_AUTHORIZE_PRIVILEGE="requestMaskAuthorizePrivilege",e.REQUEST_BASE_INFO="requestBaseinfo",e.CHANGE_PAGE_SUCCESS="changPageSuccess",e.ON_PAGE_CHANGE_SUCCESS="ON_PAGE_CHANGE_SUCCESS",e.ON_COCOS_EXCEPTION_2_CLIENT="onException"}(o.SdkMessageType||(o.SdkMessageType={})),cc._RF.pop()},{}],SettlementBaseComp:[function(e,t,o){"use strict";cc._RF.push(t,"ba1e9RfxVtORorSsr6RB2IZ","SettlementBaseComp"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Script/event/EventCenter"),r=cc._decorator,a=r.ccclass,i=r.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skAnimation=null,t.animationSequence="",t.audioEffect=null,t._curIndex=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.skAnimation.node.active=!1,n.EVT.on("onJumpPage",this.onHandleJumpPage,this)},t.prototype.playAnimation=function(){var e=this;this.skAnimation.node.active=!0;var t=[].concat(this.animationSequence.split("#"));this.executeAnimation(t,function(){e.onAnimationPalyOver()}),this.audioEffect&&cc.audioEngine.playEffect(this.audioEffect,!1)},t.prototype.onAnimationPalyOver=function(){this.skAnimation.setCompleteListener(null),this._curIndex=0,this.node.parent.active=!1,n.EVT.emit("settlement_animation_playe_over",{})},t.prototype.executeAnimation=function(e,t){var o=this;if(!(this._curIndex>e.length-1)){var n=e[this._curIndex].split(","),r="true"==n[1];this.skAnimation.setCompleteListener(function(r){if(r.animation.name==n[0]){var a=e[o._curIndex+1];if(a)"true"==a[1]&&t(),o._curIndex++,o.executeAnimation(e,t);else t()}}),this.skAnimation.setAnimation(0,n[0],r)}},t.prototype.onHandleJumpPage=function(){this._curIndex=0,this.node.parent.children.forEach(function(e){e.active=!1})},__decorate([i({type:sp.Skeleton,tooltip:"\u7ed3\u7b97\u52a8\u753b\u7684\u7ec4\u4ef6"})],t.prototype,"skAnimation",void 0),__decorate([i({tooltip:"name1,\u662f\u5426\u5faa\u73af#ame1,\u662f\u5426\u5faa\u73af"})],t.prototype,"animationSequence",void 0),__decorate([i({type:cc.AudioClip,tooltip:"\u52a8\u6548\u5bf9\u5e94\u7684\u97f3\u6548"})],t.prototype,"audioEffect",void 0),t=__decorate([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../Script/event/EventCenter":"EventCenter"}],SliderPage:[function(e,t,o){"use strict";cc._RF.push(t,"474c6yGYV5GRKXQaMWq4jcD","SliderPage"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Script/event/EventCenter"),r=e("../../Script/framework/constant/GameConstant"),a=e("../../Script/framework/message/CgMessageFramework"),i=e("../../Script/framework/model/RoomModel"),s=e("../../Script/utils/GameUtil"),c=cc._decorator,u=c.ccclass,l=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetNode=null,t._initTargetNodeY=0,t}return __extends(t,e),t.prototype.start=function(){this._initTargetNodeY=this.targetNode.y||0,n.EVT.on("sliderEvent",this._slidingTargetNode,this),s.GameUtil.isTeacher()||(this.node.children[0].active=!1)},t.prototype.onSliderEvent=function(e){var t={progress:e.progress},o={name:{name:"sliderEvent"},cmds:t};i.RoomMgr.roomInfo.gameState<r.GameState.BEGIN&&s.GameUtil.isTeacher()&&a.MessageSender.messageSender.sendCustomMessage("nova.teacher.flopDrag",o),n.EVT.emit("sliderEvent",t)},t.prototype._slidingTargetNode=function(e){var t=this.targetNode.height-this.targetNode.parent.height;this.targetNode.setPosition(cc.v2(this.targetNode.x,this._initTargetNodeY+t*e.progress))},__decorate([l({type:cc.Node,tooltip:"\u9700\u8981\u6ed1\u52a8\u7684\u957f\u9875,\u6b64\u8282\u70b9\u4e0e\u7236\u8282\u70b9\u9876\u5bf9\u9f50"})],t.prototype,"targetNode",void 0),t=__decorate([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../Script/event/EventCenter":"EventCenter","../../Script/framework/constant/GameConstant":"GameConstant","../../Script/framework/message/CgMessageFramework":"CgMessageFramework","../../Script/framework/model/RoomModel":"RoomModel","../../Script/utils/GameUtil":"GameUtil"}],SocketComponent:[function(e,t,o){"use strict";cc._RF.push(t,"5eb55Og/GxIs4GHqnBgXuW5","SocketComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../framework/network/socket/SocketManager"),r=e("../../game/data/GlobalData"),a=e("../../framework/model/UserModel"),i=e("../../framework/network/socket/CgSocketFrameWork"),s=e("../../utils/StringUtil"),c=e("../log/Log"),u=e("../../utils/GameUtil"),l=cc._decorator.ccclass,d=e("../../event/EventCenter"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){d.EVT.on("socket_reconnect_success",this.onConnectedServerSuccess,this)},t.prototype.connect2GameServer=function(){var e=this;n.SocketMgr.isConnected()&&n.SocketMgr.close();var t="wss://"+r.GLOBAL.game_ip+":"+r.GLOBAL.gamePort;n.SocketMgr.connect(t,function(){e.onConnectedServerSuccess(),setTimeout(function(){n.SocketMgr.startHeartbeat("ping",5e3)},1e3)},this)},t.prototype.onConnectedServerSuccess=function(){var e=a.UserMgr.userInfo.uid,t=""+i.default.clientRoleType2Server(a.UserMgr.userInfo.roleType);a.UserMgr.userInfo.classId;!cc.sys.isNative&&cc.sys.isBrowser&&r.GLOBAL.env_debug&&(e=s.default.getUrlParam("account")||e,t=""+i.default.clientRoleType2Server(+t),a.UserMgr.userInfo.uid=e||a.UserMgr.userInfo.uid,c.default.debug("\u6210\u529f\u4e0esocket \u670d\u52a1\u5668\u5efa\u7acb\u8fde\u63a5\uff1a "+u.GameUtil.object2Json(a.UserMgr.userInfo))),n.SocketMgr.sendJson("verify",{uid:e,role:t,uname:a.UserMgr.userInfo.name},function(e){c.default.debug("\u9a8c\u8bc1\u6210\u529f")})},t.prototype.onDestroy=function(){n.SocketMgr.isConnected()&&n.SocketMgr.close(),d.EVT.targetOff(this)},t=__decorate([l()],t)}(cc.Component);o.SocketComponent=p,cc._RF.pop()},{"../../event/EventCenter":"EventCenter","../../framework/model/UserModel":"UserModel","../../framework/network/socket/CgSocketFrameWork":"CgSocketFrameWork","../../framework/network/socket/SocketManager":"SocketManager","../../game/data/GlobalData":"GlobalData","../../utils/GameUtil":"GameUtil","../../utils/StringUtil":"StringUtil","../log/Log":"Log"}],SocketManager:[function(e,t,o){"use strict";cc._RF.push(t,"7aa0dnR759FmoZOb8xQm2DX","SocketManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./WebSocket"),r=e("./CgSocketMessageType"),a=e("../../../event/EventCenter"),i=e("../../model/UserModel"),s=e("../../../common/log/Log"),c=e("./CgSocketFrameWork"),u=function(){function e(){this._ip="",this._socket=null,this._msgDict=null,this._seqId=0,this._timeOutMsgId=null,this._reConnectCount=0,this._reconnectMax=5,this._isConnected=!1,this._isConnecting=!1,this._socket=null,this._timeOutId=null,this._timeOutTime=null,this._msgDict={},this._seqId=0}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.isConnected=function(){return this._isConnected},e.prototype.sendJson=function(e,t,o,n,r){if(this._socket){if(this._isConnecting)return;var a={actionType:e,requestId:this._seqId,actionData:t||{}},i=JSON.stringify(a);o&&(this._msgDict[this._seqId]={id:e,success:o,this:n,failCallback:r,msg:i}),this._socket.send(i),this._seqId++}},e.prototype.onMessage=function(e){if("string"==typeof e){var t=void 0;try{t=JSON.parse(e)}catch(e){throw this.doFailMessage(null,"json parse err!"),"socket json "}if("ping"!=t.ActionType&&s.default.debug("socket \u6536\u5230\u6d88\u606f : "+JSON.stringify(t)),t){if(t&&t.MsgBody&&JSON.parse(t.MsgBody).params&&JSON.parse(t.MsgBody).params.role){var o=JSON.parse(t.MsgBody);o.params.role=c.default.serverRoleType2Client(o.params.role),t.MsgBody=JSON.stringify(o)}if("OK"!=t.ActionStatus?this.doFailMessage(t):t.ActionType&&this.doSuccess(t),1==t.Ack&&t.ActionType){var n=t.BackData||{};this.dispatchNetEvent(t.ActionType,n)}else if(0==t.Ack){if(!t.MsgBody)return void console.error("\u670d\u52a1\u5668\u63a8\u9001\u6d88\u606f\u6570\u636e\u5f02\u5e38 json: "+JSON.stringify(t));1001==t.MsgType?this.dispatchNetEvent(r.CG_Socket_Message_Type.CG_USER_LEAVE,t.MsgBody):("string"==typeof t.MsgBody&&(t.MsgBody=JSON.parse(t.MsgBody)),this.dispatchNetEvent(t.MsgBody.msgType,t.MsgBody.params))}}}},e.prototype.connect=function(e,t,o){this._isConnected||(t&&(this._connectCbObj={cb:t,this:o}),this._isConnecting=!0,this._timeOutNum=0,null==this._socket&&(this._socket=new n.Socket(this.onConnect,this.onMessage,this.onClose,this.onError,this)),this._ip=e,this._socket.connect(e))},e.prototype.reConnect=function(){var e=this;this._isConnecting=!0,console.log("NetWorkManager.reConnect : "+this._reConnectCount),this._isConnecting&&!this._isConnected&&(console.debug("\u5c1d\u8bd5\u91cd\u8fde:"+this._reConnectCount),this.connect(this._ip,this.reConnected,this),this._reConnectCount++,setTimeout(function(){e._isConnected||e.reConnect()},6e3))},e.prototype.startHeartbeat=function(e,t){var o=this;if(void 0===e&&(e="ping"),void 0===t&&(t=5e3),this._timeOutTime=t,e||(e="ping"),!this._timeOutId){var n=this;this._timeOutId=setInterval(function(){n._timeOutNum++,n._timeOutNum>3?(console.debug("--------  \u5fc3\u8df3\u8d85\u65f6\u6b21\u6570\uff1a",n._timeOutNum),o.dispose()):n.sendJson(e,null,function(){n._timeOutNum--},n)},t)}},e.prototype.onConnect=function(){this._isConnected=!0,this._isConnecting=!1,this._reConnectCount=0,this._seqId=0,this._connectCbObj&&(this._connectCbObj.cb.call(this._connectCbObj.this),this._connectCbObj=null)},e.prototype.dispose=function(){this._isConnected=!1,this._isConnecting=!1,this._timeOutId&&(clearInterval(this._timeOutId),this._timeOutId=null),this._socket&&this._socket.disponse(),this._socket=null,this.reConnect()},e.prototype.doFailMessage=function(e,t){if(void 0===t&&(t=null),e.RequestId&&0!=e.Ack){var o=this._msgDict[e.RequestId];null!=o&&(o.failCallback&&o.failCallback instanceof Function&&o.failCallback.call(o.this?o.this:{},e,t),delete this._msgDict[e.RequestId])}},e.prototype.doSuccess=function(e){if(e.RequestId&&0!=e.Ack){var t=this._msgDict[e.RequestId];if(null!=t){if(t.success&&t.success instanceof Function){var o=e.BackData||e.MsgBody||{};"string"==typeof o&&(o=JSON.parse(o)),t.success.call(t.this?t.this:{},o)}delete this._msgDict[e.RequestId]}}},e.prototype.dispatchNetEvent=function(e,t){"string"==typeof t&&(t=JSON.parse(t)),t.msgType=e,t.senderId&&t.senderId==i.UserMgr.userInfo.uid||a.EVT.emit(e,t)},e.prototype.onClose=function(){this.close()},e.prototype.onError=function(){this.dispose()},e.prototype.reConnected=function(){this._reConnectCount=0,this._isConnected=!0,this._isConnecting=!1,this._timeOutId||this.startHeartbeat(this._timeOutMsgId,this._timeOutTime),console.debug("\u91cd\u8fde\u6210\u529f:\u91cd\u65b0\u53d1\u9001\u4e4b\u524d\u6d88\u606f"),a.EVT.emit("socket_reconnect_success")},e.prototype.close=function(){clearInterval(this._timeOutId),this._isConnected=!1,this._isConnecting=!1,this._timeOutId&&(clearInterval(this._timeOutId),this._timeOutId=null),this._socket&&this._socket.disponse(),this._socket=null},e._instance=null,e}();o.SocketManager=u,o.SocketMgr=u.getInstance(),cc._RF.pop()},{"../../../common/log/Log":"Log","../../../event/EventCenter":"EventCenter","../../model/UserModel":"UserModel","./CgSocketFrameWork":"CgSocketFrameWork","./CgSocketMessageType":"CgSocketMessageType","./WebSocket":"WebSocket"}],StringUtil:[function(e,t,o){"use strict";cc._RF.push(t,"d8996+fmIZDpJ++D7pn0Cx2","StringUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.getShortFileName=function(t){var o=e.getFileName(t);return o.substring(0,o.lastIndexOf("."))},e.getFileName=function(e){return e.substring(e.lastIndexOf("/")+1)},e.getFileExt=function(t){var o=e.getFileName(t);return o.substring(o.lastIndexOf(".")+1,o.length)},e.getUrlParam=function(e){for(var t=window.location.search.substring(1).split("&"),o=0;o<t.length;o++){var n=t[o].split("=");if(n[0]==e)return n[1]}return null},e.padNumber=function(t,o){return void 0===o&&(o=2),e.leftPad(String(t),o,"0")},e.leftPad=function(e,t,o){if(void 0===o&&(o=" "),e.length<t){for(var n="";n.length+e.length<t;)n+=o;return n+e}return e},e.formatTimers=function(t,o){void 0===o&&(o=3);var n="",r=0,a=r=Math.floor(t/3600),i=0;r>=24&&(r-=24*(i=Math.floor(Math.floor(r/24))));var s;s=Math.floor((t-3600*a)/60);var c=Number(t-3600*a-60*s);return i>0?n+=i+"d ":o>3&&(n+="0d:"),r>0?n+=e.padNumber(r)+":":o>2&&(n+="00:"),s>0?n+=e.padNumber(s)+":":o>1&&(n+="00:"),n+=e.padNumber(c)},e.formatDate=function(e,t){t=t||"Y-M-D";var o=e?new Date(e):new Date,n=o.getFullYear(),r=u(o.getMonth()+1),a=u(o.getDate()),i=u(o.getHours()),s=u(o.getMinutes()),c=u(o.getSeconds());return t.replace(/Y|M|D|h|m|s/g,function(e){return{Y:n,M:r,D:a,h:i,m:s,s:c}[e]});function u(e){return e.toString().replace(/^(\d)$/,"0$1")}},e.isPoneAvailable=function(e){return!!/^[1][3,4,5,7,8][0-9]{9}$/.test(e)},e}();o.default=n,cc._RF.pop()},{}],TeacherButton:[function(e,t,o){"use strict";cc._RF.push(t,"ae68ewhY45OxZoNu1hwAPUF","TeacherButton"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator.ccclass,r=cc._decorator.property,a=e("../../Script/event/EventCenter"),i=e("../../Script/framework/message/CocosMessageType"),s=e("../../Script/utils/GameUtil"),c=e("../../Script/plugin/tuoKeYun/SdkMessageType"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.normalSprite=null,t.hoverSprite=null,t.disableSprite=null,t.btnSprite=null,t.turning=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.btnSprite=this.node.getComponent(cc.Sprite),this.turning=!1,this.btnSprite.spriteFrame=this.normalSprite,this.bindBtnEvent()},t.prototype.start=function(){a.EVT.on(c.SdkMessageType.ON_PAGE_CHANGE_SUCCESS,this.onLoad,this)},t.prototype.bindBtnEvent=function(){var e=this;s.GameUtil.isTeacher()?(this.node.on(cc.Node.EventType.MOUSE_ENTER,function(){e.turning||(e.btnSprite.spriteFrame=e.hoverSprite,cc.game.canvas.style.cursor="pointer")},this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,function(){e.turning||(e.btnSprite.spriteFrame=e.normalSprite,cc.game.canvas.style.cursor="default")},this),this.node.on(cc.Node.EventType.TOUCH_END,function(t){e.turning||(e.turning=!0,e.onBtnClick())},this)):this.node.active=!1},t.prototype.onBtnClick=function(){this.disBtn(),a.EVT.emit(i.CocosMessageType.on_teacher_click_func_btn)},t.prototype.onDestroy=function(){a.EVT.off(c.SdkMessageType.ON_PAGE_CHANGE,this.onLoad,this)},t.prototype.disBtn=function(){this.btnSprite.spriteFrame=this.disableSprite,this.node.targetOff(this)},t.prototype.active=function(){this.bindBtnEvent()},__decorate([r(cc.SpriteFrame)],t.prototype,"normalSprite",void 0),__decorate([r(cc.SpriteFrame)],t.prototype,"hoverSprite",void 0),__decorate([r(cc.SpriteFrame)],t.prototype,"disableSprite",void 0),t=__decorate([n],t)}(cc.Component);o.TeacherButton=u,cc._RF.pop()},{"../../Script/event/EventCenter":"EventCenter","../../Script/framework/message/CocosMessageType":"CocosMessageType","../../Script/plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../../Script/utils/GameUtil":"GameUtil"}],Teacher:[function(e,t,o){"use strict";cc._RF.push(t,"beb74dIm1RETJNQZooIB8cg","Teacher"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator.ccclass,r=cc._decorator.property,a=e("../../Script/framework/model/UserModel"),i=e("../../Script/manager/PanelManager"),s=e("../../Script/common/log/Log"),c=e("../../Script/framework/model/RoomModel"),u=e("../../Script/event/EventCenter"),l=e("../../Script/framework/network/socket/CgSocketMessageType"),d=e("../../Script/utils/StringUtil"),p=e("../../Script/framework/constant/GameConstant"),g=e("./TeacherButton"),m=e("../../Script/framework/message/CocosMessageType"),h=e("../../Script/utils/GameUtil"),f=e("../../Script/plugin/tuoKeYun/SdkMessageType"),_=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.pageRichLbl=null,e.timeLbl=null,e.timestamp=0,e.buttonsPathMap=new Map,e}return __extends(o,t),o.prototype.onLoad=function(){a.UserMgr.userInfo.roleType==p.H5RoleType.TEACHER&&(u.EVT.on(f.SdkMessageType.ON_PAGE_CHANGE_SUCCESS,this.onHandleChangePage,this),u.EVT.on(m.CocosMessageType.on_teacher_click_func_btn,this.initBtns,this)),this.buttonsPathMap.set("begin",cc.find("btns/begin",this.node))},o.prototype.onEnable=function(){this.init(),this.pageRichLbl.string="<color=#585858>( </color><color=#585858>"+c.RoomMgr.roomInfo.curPageIndex+"</color><color=#585858>/"+c.RoomMgr.roomInfo.totalPage+" )</color>",this.timestamp=0,this.timeLbl=cc.find("bg/time/time_txt",this.node).getComponent(cc.Label),this.initBtns(),this.pageRichLbl.node.active=h.GameUtil.isTeacher()},o.prototype.init=function(){s.default.info("Teacher.init ----");var e=this;if(1!==a.UserMgr.userInfo.getToolPart()?(cc.find("btns",this.node).active=!1,cc.find("pageCount",this.node).active=!1):(cc.find("btns",this.node).active=!0,cc.find("pageCount",this.node).active=!0),4!==a.UserMgr.userInfo.getToolPart()){s.default.info("Teacher.init ----eeeeeeeee");var t=i.PanelManager.getInstance().node;if(s.default.info("node  node  node  node "+t.name),t.getComponent(cc.Widget)){s.default.info("Teacher.init ----111111222222abc");var o=cc.scaleTo(.1,1),n=cc.place(0,0);i.PanelManager.getInstance().panelLayer.runAction(cc.sequence(o,n)),t.getComponent(cc.Widget).updateAlignment()}setTimeout(function(){cc.view.setDesignResolutionSize(3036,1366,cc.ResolutionPolicy.FIXED_WIDTH);var t=new Event("resize");window.dispatchEvent(t),s.default.debug("\u8001\u5e08\u521d\u59cb\u5316\u5b8c\u6bd5 "),e.node.opacity=255},10)}},o.prototype.update=function(e){this.timestamp+=e,this.timeLbl.string=d.default.formatTimers(Math.ceil(this.timestamp))},o.prototype.onHandleChangePage=function(e){this.pageRichLbl.string="<color=#585858>( </color><color=#585858>"+c.RoomMgr.roomInfo.curPageIndex+"</color><color=#585858>/"+c.RoomMgr.roomInfo.totalPage+" )</color>",this.timestamp=0,this.initBtns()},o.prototype.initBtns=function(){var t=e("_games").games[c.RoomMgr.roomInfo.curPageIndex-1],o=c.RoomMgr.roomInfo.gameState>=p.GameState.BEGIN;s.default.info("Teacher.init:  pageConfigInfo "+JSON.stringify(t)),s.default.info("isGameBegin "+o),s.default.info("GameUtil.isTeacher()  + "+h.GameUtil.isTeacher()),this.buttonsPathMap.forEach(function(e,n){e.active=t.type==p.GameSyncTypeEnum.DISTRIBUTE&&h.GameUtil.isTeacher();var r=e.getComponent(g.TeacherButton);e.active&&("begin"==n&&(o?r.disBtn():r.active()),"end"==n&&(o?r.active():r.disBtn()))})},o.prototype.onDestroy=function(){u.EVT.off(l.CG_Socket_Message_Type.CG_CHANGE_PAGE,this.onHandleChangePage,this),u.EVT.targetOff(this)},__decorate([r(cc.RichText)],o.prototype,"pageRichLbl",void 0),o=__decorate([n],o)}(cc.Component);o.Teacher=_,cc._RF.pop()},{"../../Script/common/log/Log":"Log","../../Script/event/EventCenter":"EventCenter","../../Script/framework/constant/GameConstant":"GameConstant","../../Script/framework/message/CocosMessageType":"CocosMessageType","../../Script/framework/model/RoomModel":"RoomModel","../../Script/framework/model/UserModel":"UserModel","../../Script/framework/network/socket/CgSocketMessageType":"CgSocketMessageType","../../Script/manager/PanelManager":"PanelManager","../../Script/plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../../Script/utils/GameUtil":"GameUtil","../../Script/utils/StringUtil":"StringUtil","./TeacherButton":"TeacherButton",_games:"_games"}],TheItemAnimationEffect:[function(e,t,o){"use strict";cc._RF.push(t,"49571uByhhPhZzSK4r5jO9U","TheItemAnimationEffect"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc.Enum({None:"0",Scale:"1",Blink:"2",Shake:"3",FadeIn:"4",FadeOut:"5",Move:"6"}),r=cc._decorator,a=r.ccclass,i=r.property,s=r.inspector,c=r.playOnFocus,u=r.executeInEditMode,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._preview=0,t._nodeStart={x:0,y:0},t._nodeEnd={x:0,y:0},t.actionType=n.Shake,t.actionNode=null,t.delayTime=0,t.actionTime=.5,t.shakeStrength=3,t.blinkCount=5,t.scaleSize=.8,t.moveBeganPosX=0,t.moveBeganPosY=0,t.moveEndPosX=0,t.moveEndPosY=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"preview",{get:function(){return this._preview},set:function(e){this._record(),this.runAction()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodeStart",{get:function(){return this._nodeStart},set:function(e){this._changeStart()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodeEnd",{get:function(){return this._nodeEnd},set:function(e){this._changeEnd()},enumerable:!0,configurable:!0}),t.prototype.onFocusInEditor=function(){},t.prototype.onLostFocusInEditor=function(){},t.prototype._record=function(){},t.prototype._recover=function(){},t.prototype.onLoad=function(){},t.prototype.start=function(){this.actionNode||(this.actionNode=this.node)},t.prototype._changeStart=function(){this.moveBeganPosX=this.actionNode.x,this.moveBeganPosY=this.actionNode.y},t.prototype._changeEnd=function(){this.moveEndPosX=this.actionNode.x,this.moveEndPosY=this.actionNode.y},t.prototype.runAction=function(e,t){var o=this;if(e&&(this.actionNode=e),this.actionType===n.None)this._actionOver();else if(this.actionTime>0){var r=this._genAction(this.actionType);if(r){var a=[];this.delayTime>0&&a.push(cc.delayTime(this.delayTime)),a.push(r),a.push(cc.callFunc(function(){o._actionOver(t)}));var i=cc.sequence(a);this.actionNode.stopAllActions(),this.actionNode.runAction(i)}}else console.log("\u6307\u5b9a\u7684\u52a8\u753b\u65f6\u95f4\u4e3a0,\u8df3\u8fc7\u8be5\u52a8\u753b!")},t.prototype._actionOver=function(e){e&&e(),console.log("action over")},t.prototype._genAction=function(e){var t=this,o=null;if(e===n.FadeOut)this.actionNode.opacity=255,o=cc.fadeOut(this.actionTime);else if(e===n.FadeIn)this.actionNode.opacity=0,o=cc.fadeIn(this.actionTime);else if(e===n.Shake){for(var r=[],a=[{strength:1,max:10},{strength:2,max:12},{strength:3,max:15},{strength:4,max:20},{strength:5,max:25}],i=0,s=0;s<a.length;s++){var c=a[s];if(c.strength.toString()===this.shakeStrength.toString()){i=c.max;break}}var u;u=Math.floor(this.actionTime/.05);var l=this.actionNode.getPosition();if(u>0&&i>0){for(s=0;s<u;s++){var d=l.x+this._randomPos(i),p=l.y+this._randomPos(i),g=cc.moveTo(.05,cc.v2(d,p));r.push(g)}r.push(cc.callFunc(function(){t.actionNode.setPosition(l)})),o=cc.sequence(r)}else console.log("\u672a\u67e5\u627e\u5230\u6643\u52a8\u7684\u914d\u7f6e!")}else e===n.Blink?o=cc.blink(this.actionTime,this.blinkCount):e===n.Scale?o=cc.scaleTo(this.actionTime,this.scaleSize):e===n.Move&&(this.actionNode.setPosition(this.moveBeganPosX||0,this.moveBeganPosY||0),o=cc.moveTo(this.actionTime,this.moveEndPosX||0,this.moveEndPosY||0));return o},t.prototype._randomByMaxValue=function(e){return Math.floor(Math.random()*e)},t.prototype._randomPos=function(e){return this._randomByMaxValue(2)%2==0?this._randomByMaxValue(e):-this._randomByMaxValue(e)},__decorate([i({type:n,displayName:"\u52a8\u753b\u7c7b\u578b"})],t.prototype,"actionType",void 0),__decorate([i({type:cc.Node})],t.prototype,"actionNode",void 0),__decorate([i({visible:!0})],t.prototype,"preview",null),__decorate([i({visible:!0})],t.prototype,"nodeStart",null),__decorate([i({visible:!0})],t.prototype,"nodeEnd",null),__decorate([i({displayName:"\u5ef6\u8fdf\u65f6\u95f4",tooltip:"\u5355\u4f4d:\u79d2"})],t.prototype,"delayTime",void 0),__decorate([i({displayName:"\u52a8\u753b\u65f6\u95f4",tooltip:"\u5355\u4f4d:\u79d2"})],t.prototype,"actionTime",void 0),__decorate([i({displayName:"\u9707\u52a8\u5f3a\u5ea6",tooltip:"\u5f3a\u5ea6\u8d8a\u9ad8,\u632f\u5e45\u8d8a\u5927"})],t.prototype,"shakeStrength",void 0),__decorate([i({displayName:"\u95ea\u70c1\u6b21\u6570",tooltip:""})],t.prototype,"blinkCount",void 0),__decorate([i({displayName:"\u7f29\u653e\u6bd4\u4f8b",tooltip:""})],t.prototype,"scaleSize",void 0),__decorate([i({displayName:"X",tooltip:""})],t.prototype,"moveBeganPosX",void 0),__decorate([i({displayName:"Y",tooltip:""})],t.prototype,"moveBeganPosY",void 0),__decorate([i({displayName:"X",tooltip:""})],t.prototype,"moveEndPosX",void 0),__decorate([i({displayName:"Y",tooltip:""})],t.prototype,"moveEndPosY",void 0),t=__decorate([a,u,c,s("packages://myPackage/inspector/dialog/dialog.js")],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],TheItem:[function(e,t,o){"use strict";cc._RF.push(t,"10237bLuxFH5JQDIvBgnWq0","TheItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../manager/PanelManager"),r=e("../../framework/model/UserModel"),a=e("../../framework/constant/GameConstant"),i=e("../../event/EventCenter"),s=e("../../framework/model/RoomModel"),c=e("../../utils/GameUtil"),u=e("../../framework/message/CgMessageFramework"),l=cc._decorator,d=l.ccclass,p=l.property,g=l.executeInEditMode,m=-1024,h=-576,f=1024,y=576,S=cc.Enum({NORMAL:0,HOVER:1,PRESSED:2,DISABLED:3});o.EventTypeEnum=cc.Enum({Both:0,Drag:1,Click:2});var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eventType=o.EventTypeEnum.Drag,t.items=[],t.wrongItems=[],t.itemsParent=[],t.wrongItemsParent=[],t.retain=!1,t.backOnCanelOrDoWrong=!0,t.backAnimation=!0,t.shakeWithWrong=!0,t.isParentAction=!1,t.makeUnactive4Student=!1,t.stuHideAndTeacherShowShadow=!1,t.checkaraePercent=0,t.dropIn=!1,t.dropPosition=cc.Vec2.ZERO,t.isChangeOnDrop=!0,t.beginMoveOffset=5,t.tag="",t.zoomScale=1.2,t._interactable=!0,t._enableAutoGrayEffect=!1,t.isShowEventProp=!0,t.onclick=new cc.Component.EventHandler,t.drop=new cc.Component.EventHandler,t.customDrophandler=new cc.Component.EventHandler,t.cancel=new cc.Component.EventHandler,t.dropWrong=new cc.Component.EventHandler,t.dragstart=new cc.Component.EventHandler,t.dragmove=new cc.Component.EventHandler,t.attrs={},t._attrs={},t.preAttrs={},t.increaseId=0,t.parentIncreaseId=-1,t.tree=null,t.histroyParent=[],t.preShouldDropParent=null,t._isFirstOp=!0,t._cloneNode=null,t._isClick=!0,t._waitTime=70,t._scaleTime=0,t._transitionFinished=!0,t._fromScale=cc.Vec2.ZERO,t._toScale=cc.Vec2.ZERO,t._pressed=!1,t._hovered=!1,t._moveing=!1,t._originalScale=cc.Vec2.ZERO,t._duration=.1,t._sprite=null,t.currentParent=null,t.shakeStrength=3,t.actionTime=.5,t}return __extends(t,e),Object.defineProperty(t.prototype,"interactable",{get:function(){return this._interactable},set:function(e){this._interactable=e,this._updateDisabledState()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableAutoGrayEffect",{get:function(){return this._enableAutoGrayEffect},set:function(e){this._enableAutoGrayEffect=e,this._updateDisabledState()},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.start=function(){this.init()},t.prototype.init=function(){this._sprite=this._getTargetSprite(),this.setCCState(),this._updateDisabledState(),this.initItemsAndWrongItems(),this._originalScale.x=this.node.scaleX,this._originalScale.y=this.node.scaleY,this.increaseId=this.node.increaseId,this.preShouldDropParent=this.node.parent,this.tree=n.PanelManager.getInstance().curPanelBase.node,0==this.node.zIndex&&this._createZindex(),r.UserMgr.userInfo.roleType!==a.H5RoleType.TEACHER&&this._addEventListenner(),this.makeUnactive4Student&&r.UserMgr.userInfo.roleType!==a.H5RoleType.TEACHER&&(this.node.active=!1),this.stuHideAndTeacherShowShadow&&(r.UserMgr.userInfo.roleType==a.H5RoleType.TEACHER?this.node.opacity=100:this.node.opacity=0)},t.prototype.setCCState=function(){cc.Sprite.prototype.setState=function(e){var t;(this._state=this._state||cc.Sprite.State.NORMAL,this._state!=e)&&(e==cc.Sprite.State.GRAY?(t=cc.Material.getBuiltinMaterial("2d-gray-sprite"),t=cc.Material.getInstantiatedMaterial(t,this)):(t=cc.Material.getBuiltinMaterial("2d-sprite",this),(t=cc.Material.getInstantiatedMaterial(t,this)).define("USE_TEXTURE",!0)),this._state=e,this.setMaterial(0,t))},cc.Sprite.prototype.getState=function(){return this._state||cc.Sprite.State.NORMAL}},t.prototype.initItemsAndWrongItems=function(){var e=this;this.itemsParent.forEach(function(t){e.items=e.items.concat(t.children)}),this.wrongItemsParent.forEach(function(t){e.wrongItems=e.wrongItems.concat(t.children)}),this.items=_.uniqBy(this.items.filter(function(t){return t&&t!=e.node}),"uuid"),this.wrongItems=_.uniqBy(this.wrongItems.filter(function(t){return t&&t!=e.node}),"uuid");var t=this.items.find(function(t){return e.wrongItems.find(function(e){return e.uuid==t.uuid})});t&&(cc.error("items\u4e0ewrongItems\u4e2d\u5b58\u5728\u5982\u4e0b\u76f8\u540c\u7684\u8282\u70b9\uff1a"),cc.error(t))},t.prototype.delegate4children=function(){this.node.children.forEach(function(e){e.getComponent("TheItem")})},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,_.throttle(this._onTouchMoved,this._waitTime,{trailing:!1}),this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchEnded,this),this.node.off(cc.Node.EventType.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this._onMouseMoveOut,this)},t.prototype.onDestroy=function(){i.EVT.targetOff(this)},t.prototype._onTouchBegan=function(e){this.interactable&&(this._dragStart(),e.stopPropagation())},t.prototype._onTouchMoved=function(e){if(this.eventType!=o.EventTypeEnum.Click&&this.interactable){e.stopPropagation();var t=e.touch.getStartLocation(),n=e.touch.getLocation();if(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)<Math.pow(this.beginMoveOffset,2))this._isClick=!0;else{this._isClick=!1;var r=this.node.parent.convertToNodeSpaceAR(n);this._dragMove(r)}}},t.prototype._onTouchEnded=function(e){this.interactable&&(this._isClick?this._triggerClick():this._isClick||this._dragEnd(),e.stopPropagation())},t.prototype._dragStart=function(){if(this._isFirstOp&&(this.attrs=this.getNodeOriginalAttributes(),this._attrs=this.getNodeOriginalAttributes(),this._originalScale.x=this.node.scaleX,this._originalScale.y=this.node.scaleY,this._isFirstOp=!1),this._pressed=!0,this._moveing=!1,this._updateState(),this._isClick=!0,this.preAttrs=this.getNodeOriginalAttributes(),this.eventType!=o.EventTypeEnum.Click){var e=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),t=this.tree.convertToNodeSpaceAR(e);this.currentParent=this.node.parent,this.node.parent=this.tree,this.node.setPosition(t),this.node.zIndex=1e3}this.showDragStartActionAndSendMsg()},t.prototype._dragMove=function(e){if(this.eventType!==o.EventTypeEnum.Click){this._creaRetainNode(),this._moveing=!0;var t=this.node.parent.convertToWorldSpaceAR(cc.v2(e)),n=this.tree.convertToNodeSpaceAR(t);n.x>m&&n.x<f&&(this.node.x=e.x),n.y>h&&n.y<y&&(this.node.y=e.y);var r={name:{name:"flopDragMove"},cmds:{increaseId:this.increaseId,pos:e}};this._syncDragMessageWithGameState(r),this.eventType!==o.EventTypeEnum.Click&&(this.dragmove.target?cc.Component.EventHandler.emitEvents([this.dragmove],this.node,this):i.EVT.emit("dragMove",this.node))}},t.prototype._dragEnd=function(){this._pressed=!1,this._moveing=!1,this._updateState();var e={name:{name:"flopDragEnd"},cmds:{increaseId:this.increaseId,pos:{x:this.node.x,y:this.node.y}}};this._syncDragMessageWithGameState(e),this.computeRet(1)},t.prototype._triggerClick=function(){this._pressed=!1,this._moveing=!1,this._updateState();var e={name:{name:"click"},cmds:{increaseId:this.increaseId}};this._syncClickMessageWithGameState(e),this.node.parent=this.preAttrs.parent,this.node.position=this.preAttrs.position,this.node.zIndex=this.preAttrs.zIndex,this.computeRet(0)},t.prototype.computeRet=function(e){void 0===e&&(e=0);var t=!1;if(this.items.length){var n=this.judgeCollisionArea(this.increaseId,this.items),r={dragNode:this.node,dropNode:n.max.node,all:n.all,component:this};if(n.max&&n.max.area/(r.dragNode.width*r.dragNode.height)>this.checkaraePercent/100){if(t=!0,1==e){if(this.eventType===o.EventTypeEnum.Click)return;return this.customDrophandler.target?this._emitEventHandler(this.customDrophandler,r)?(this.onDrop(r),void(this.preShouldDropParent=r.dropNode)):(this.onCancel(r),void(this.preShouldDropParent=this.node.parent)):(this.onDrop(r),void(this.preShouldDropParent=r.dropNode))}if(0==e){if(this.eventType===o.EventTypeEnum.Drag)return;this.onclick.target?cc.Component.EventHandler.emitEvents([this.onclick],this.node,Object.assign(r,{type:"drop"}),this):i.EVT.emit("dragItem_click",this.node)}}}if(!t)if(this.wrongItems.length){var a=this.judgeCollisionArea(this.increaseId,this.wrongItems);r={dragNode:this.node,dropNode:a.max.node,all:a.all,component:this};if(a.all.length>0&&a.max){if(1==e){if(this.eventType===o.EventTypeEnum.Click)return;this.onDropWrong(r)}if(0==e){if(this.eventType===o.EventTypeEnum.Drag)return;this.onclick.target?cc.Component.EventHandler.emitEvents([this.onclick],this.node,this):i.EVT.emit("dragItem_click",this.node,Object.assign(r,{type:"dropWrong"}))}}else{if(1==e){if(this.eventType===o.EventTypeEnum.Click)return;this.onCancel(r)}if(0==e){if(this.eventType===o.EventTypeEnum.Drag)return;this.onclick.target?cc.Component.EventHandler.emitEvents([this.onclick],this.node,this):i.EVT.emit("dragItem_click",this.node,Object.assign(r,{type:"dropWrong"}))}}}else{r={dragNode:this.node,dropNode:null,component:this};if(1==e){if(this.eventType===o.EventTypeEnum.Click)return;this.onCancel(r)}else if(this.onclick.target){if(this.eventType===o.EventTypeEnum.Drag)return;cc.Component.EventHandler.emitEvents([this.onclick],this.node,this)}else{if(this.eventType===o.EventTypeEnum.Drag)return;i.EVT.emit("dragItem_click",this.node)}}},t.prototype.onDrop=function(e){this.dropSelf2ParentInZero(e.dropNode),this.eventType!==o.EventTypeEnum.Click&&(this.drop.target?cc.Component.EventHandler.emitEvents([this.drop],e,this):i.EVT.emit("drop",e))},t.prototype.onDropWrong=function(e){var t=this;if(this.shakeWithWrong){var n=e.dropNode;this.dropIn&&this._dropSelf2ParentInZero(n),this.isParentAction?this.shakeWithParent(!0):this.shakeSelf(!0)}else this.backOrDestroyNodeWithConfig();t.eventType!==o.EventTypeEnum.Click&&(t.dropWrong.target?cc.Component.EventHandler.emitEvents([t.dropWrong],e,t):i.EVT.emit("dropWrong",e))},t.prototype.shakeSelf=function(e){var t=this;void 0===e&&(e=!0),e?this._shake(this.node,function(){t.backOrDestroyNodeWithConfig()}):this._shake(this.node)},t.prototype.shakeWithParent=function(e){var t=this;void 0===e&&(e=!0),e?this._shake(this.node.parent,function(){t.backOrDestroyNodeWithConfig()}):this._shake(this.node.parent)},t.prototype.backOrDestroyNodeWithConfig=function(){this._destroytOnCancelOrDoWrong(),this._backOnCancel()},t.prototype.onCancel=function(e){this._destroytOnCancelOrDoWrong(),this._backOnCancel(),this.eventType!==o.EventTypeEnum.Click&&(this.cancel.target?cc.Component.EventHandler.emitEvents([this.cancel],e,this):i.EVT.emit("cancel",e))},t.prototype.dropSelf2ParentInZero=function(e){if(this.dropIn){if(this.isChangeOnDrop){var t=e.children.filter(function(e){return e.getComponent("TheItem")});t.length&&(this.retain?t[0].destroy():t[0].getComponent("TheItem").back())}this._dropSelf2ParentInZero(e)}},t.prototype._dropSelf2ParentInZero=function(e){this.node.parent=e,this.node.setPosition(this.dropPosition)},t.prototype._creaRetainNode=function(){if(this.retain&&!this._moveing){var e=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),t=this.currentParent.convertToNodeSpaceAR(e);this._cloneNode=cc.instantiate(this.node),this._cloneNode.getComponent("TheItem").parentIncreaseId=this.increaseId,this._cloneNode.increaseId=this._cloneNode.getComponent("TheItem").increaseId=this.increaseId+"c",this._cloneNode.parent=this.currentParent,this._cloneNode.scaleX=this._originalScale.x,this._cloneNode.scaleY=this._originalScale.y,this._cloneNode.zIndex=this.node.zIndex,this.node.removeFromParent(!1),this.tree.addChild(this.node),this._cloneNode.setPosition(t),this.node.zIndex=99,this._cloneNode.zIndex=this._attrs.zIndex,this.retain=!1}},t.prototype._destroytOnCancelOrDoWrong=function(){this.attrs.retain&&this.backOnCanelOrDoWrong&&this.back()},t.prototype._backOnCancel=function(){!this.retain&&this.backOnCanelOrDoWrong&&this.back()},t.prototype.showDragStartActionAndSendMsg=function(){var e={dragNode:this.node,retainNode:this._cloneNode,component:this},t={name:{name:"flopDragStart"},cmds:{increaseId:this.increaseId}};this._syncDragMessageWithGameState(t),this.eventType!==o.EventTypeEnum.Click&&(this.dragstart.target?cc.Component.EventHandler.emitEvents([this.dragstart],e,this):i.EVT.emit("dragStart",e))},t.prototype._syncDragMessageWithGameState=function(e){s.RoomMgr.roomInfo.gameState<a.GameState.BEGIN&&c.GameUtil.isTeacher()&&u.MessageSender.messageSender.sendCustomMessage("nova.teacher.flopDrag",e)},t.prototype._syncClickMessageWithGameState=function(e){s.RoomMgr.roomInfo.gameState<a.GameState.BEGIN&&c.GameUtil.isTeacher()&&u.MessageSender.messageSender.sendCustomMessage("nova.teacher.flopDrag",e)},t.prototype.getPosNode2Node=function(e,t){},t.prototype._emitEventHandler=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=e.target;if(cc.isValid(n)){var r=cc.js._getClassById(e._componentId),a=n.getComponent(r);if(cc.isValid(a))if("function"==typeof(e=a[e.handler]))return null!=e.customEventData&&""!==e.customEventData&&(t=t.slice()).push(e.customEventData),e.apply(a,t)}},t.prototype._createZindex=function(){this.node.parent.children.forEach(function(e,t){e.zIndex=t})},t.prototype._creaWorldPoints=function(){},t.prototype.judgeCollisionArea=function(e,t){var o=this,n=t.filter(function(e){return!!e.active}).map(function(e){var t,n,r,a,i=e.increaseId,s=o.node,c=s.parent.convertToWorldSpaceAR(s.position),u=e.parent.convertToWorldSpaceAR(e.position),l=s.width,d=s.height;s.angle%360!=90&&s.angle%360!=270||(l=s.height,d=s.width);var p={x:c.x,y:c.y,xx:l+c.x,yy:d+c.y},g={x:u.x,y:u.y,xx:e.width+u.x,yy:e.height+u.y},m=[{x:p.x,y:p.y},{x:p.xx,y:p.yy},{x:g.x,y:g.y},{x:g.xx,y:g.yy}];if(Math.abs(u.x-c.x)<e.width/2+l/2&&Math.abs(u.y-c.y)<e.height/2+d/2){m[0].x>m[1].x&&(t=[m[1],m[0]],m[0]=t[0],m[1]=t[1]),m[2].x>m[3].x&&(n=[m[3],m[2]],m[2]=n[0],m[3]=n[1]);var h=Math.max.call(null,m[0].x,m[2].x),f=Math.min.call(null,m[1].x,m[3].x)-h;m[0].y>m[1].y&&(r=[m[1],m[0]],m[0]=r[0],m[1]=r[1]),m[2].y>m[3].y&&(a=[m[3],m[2]],m[2]=a[0],m[3]=a[1]);var _=Math.max.call(null,m[0].y,m[2].y),y=Math.min.call(null,m[1].y,m[3].y)-_;return{node:e,increaseId:i,area:Math.abs(f*y)}}return{node:e,increaseId:i,area:0}}).filter(function(e){return e.area>0});return{all:n,max:n.length?n.reduce(function(e,t){return t.area>e.area?t:e}):{node:null,increaseId:-1,area:0}}},t.prototype._zoomUp=function(){this._originalScale&&(this._fromScale.x=this._originalScale.x,this._fromScale.y=this._originalScale.y,this._toScale.x=this._originalScale.x*this.zoomScale,this._toScale.y=this._originalScale.y*this.zoomScale,this._scaleTime=0,this._transitionFinished=!1)},t.prototype._zoomBack=function(){if(this._originalScale){var e=this.node;this._fromScale.x=e.scaleX,this._fromScale.y=e.scaleY,this._toScale.x=this._originalScale.x,this._toScale.y=this._originalScale.y,this._scaleTime=0,this._transitionFinished=!1}},t.prototype._onMouseMoveIn=function(){!this._pressed&&this.interactable&&(this._hovered||(this._hovered=!0,this._updateState()))},t.prototype._onMouseMoveOut=function(){this._hovered&&(this._hovered=!1,this._updateState())},t.prototype._updateState=function(){var e=this._getButtonState();this._updateScaleTransition(e),this._updateDisabledState()},t.prototype._updateScaleTransition=function(e){e===S.PRESSED?this._zoomUp():this._zoomBack()},t.prototype._resetState=function(){this._pressed=!1,this._hovered=!1;var e=this.node;e.scaleX=this._originalScale.x,e.scaleY=this._originalScale.y,this._transitionFinished=!0},t.prototype._updateDisabledState=function(){if(this._sprite){if(this.enableAutoGrayEffect&&!this.interactable)return void this._sprite.setState(cc.Sprite.State.GRAY);this._sprite.setState(cc.Sprite.State.NORMAL)}},t.prototype._getTargetSprite=function(){return this.node.getComponent(cc.Sprite)},t.prototype._getButtonState=function(){return this._pressed?S.PRESSED:this._hovered?S.HOVER:S.NORMAL},t.prototype.update=function(e){if(0!=this.zoomScale){var t=this.node;if(!this._transitionFinished){this._scaleTime+=e;var o=1;this._duration>0&&(o=this._scaleTime/this._duration),o>=1&&(o=1,this._transitionFinished=!0),t.scaleX=this._fromScale.lerp(this._toScale,o).x,t.scaleY=this._fromScale.lerp(this._toScale,o).y}}},t.prototype._addEventListenner=function(){i.EVT.on("flopDragStart",function(e){e.increaseId==this.increaseId&&this._dragStart()},this),i.EVT.on("flopDragMove",function(e){e.increaseId==this.node.increaseId&&this._dragMove(e.pos)},this),i.EVT.on("flopDragEnd",function(e){e.increaseId==this.node.increaseId&&(this.node.setPosition(e.pos),this._dragEnd())},this),i.EVT.on("click",function(e){e.increaseId==this.node.increaseId&&this._triggerClick()},this)},t.prototype.getNodeOriginalAttributes=function(){return{group:this.node.group,position:this.node.position,angle:this.node.angle,eulerAngles:this.node.eulerAngles,scaleX:this.node.scaleX,scaleY:this.node.scaleY,skewX:this.node.skewX,skewY:this.node.skewY,opacity:this.node.opacity,color:this.node.color,anchorX:this.node.anchorX,anchorY:this.node.anchorY,width:this.node.width,height:this.node.height,zIndex:this.node.zIndex,parent:this.node.parent,retain:this.retain}},t.prototype.back2OriginPosition=function(){var e=this;if(s.RoomMgr.roomInfo.gameState>=a.GameState.BEGIN&&this.backAnimation){this.interactable=!1;var t=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),o=this.attrs.parent.convertToNodeSpaceAR(t);this.node.position=o,this.node.runAction(cc.sequence(cc.moveTo(.1,this.attrs.position),cc.callFunc(function(){e.interactable=!0,e._attrs.retain&&(e.node.destroy(),e._cloneNode=null)})))}else this._attrs.retain?(this.node.destroy(),this._cloneNode=null):this.node.position=this.attrs.position},t.prototype.reset=function(){this._isFirstOp||(this.back2OriginPosition(),this.node.parent=this.attrs.parent,this.node.group=this.attrs.group,this.node.angle=this.attrs.angle,this.node.eulerAngles=this.attrs.eulerAngles,this.node.scaleX=this.attrs.scaleX,this.node.scaleY=this.attrs.scaleY,this.node.skewX=this.attrs.skewX,this.node.skewY=this.attrs.skewY,this.node.opacity=this.attrs.opacity,this.node.color=this.attrs.color,this.node.anchorX=this.attrs.anchorX,this.node.anchorY=this.attrs.anchorY,this.node.width=this.attrs.width,this.node.height=this.attrs.height,this.node.zIndex=this.attrs.zIndex,this.node.parent=this.attrs.parent,this.node.getComponent("TheItem").retain=this.attrs.retain,this.preShouldDropParent=this.node.parent)},t.prototype.back=function(){this.reset()},t.prototype.backWithPosition=function(){if(this._attrs.retain)this.node.destroy(),this._cloneNode=null;else{if(this._isFirstOp)return;this.back2OriginPosition(),this.node.parent=this.attrs.parent,this.node.zIndex=this.attrs.zIndex}},t.prototype.dropSelf=function(e){void 0===e&&(e=this.dropPosition),this.node.parent=this.preShouldDropParent,this.node.setPosition(e)},t.prototype._shake=function(e,t){var o=this;void 0===e&&(e=this.node);for(var n=null,r=[],a=[{strength:1,max:10},{strength:2,max:12},{strength:3,max:15},{strength:4,max:20},{strength:5,max:25}],i=0,s=0;s<a.length;s++){var c=a[s];if(c.strength.toString()===this.shakeStrength.toString()){i=c.max;break}}var u;u=Math.floor(this.actionTime/.05);var l=e.getPosition();if(this.interactable=!1,u>0&&i>0){for(s=0;s<u;s++){var d=l.x+this._randomPos(i),p=l.y+this._randomPos(i),g=cc.moveTo(.05,cc.v2(d,p));r.push(g)}r.push(cc.callFunc(function(){e.setPosition(l),o.interactable=!0,t&&t()})),n=cc.sequence(r)}e.runAction(n)},t.prototype._randomPos=function(e){return this._randomByMaxValue(2)%2==0?this._randomByMaxValue(e):-this._randomByMaxValue(e)},t.prototype._randomByMaxValue=function(e){return Math.floor(Math.random()*e)},__decorate([p({type:cc.Enum(o.EventTypeEnum),displayName:"eventType"})],t.prototype,"eventType",void 0),__decorate([p({type:[cc.Node],tooltip:"\u53ef\u4ee5\u53d1\u751f\u78b0\u649e\u68c0\u6d4b\u7684\u8282\u70b9\uff0c\u6b64\u65f6\u88ab\u62d6\u62fd\u7684\u8282\u70b9\u4f1a\u548c\u6570\u7ec4\u91cc\u6240\u6709\u8282\u70b9\u8fdb\u884c\u78b0\u649e\u9762\u79ef\u7684\u68c0\u6d4b",visible:function(){return this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"items",void 0),__decorate([p({type:[cc.Node],tooltip:"\u80fd\u591f\u89e6\u53d1\u9519\u8bef\u53cd\u9988\u65f6\uff0c\u9700\u8981\u4e00\u4e9b\u8282\u70b9\u4fe1\u606f\uff0c\u8fd9\u91cc\u653e\u80fd\u591f\u89e6\u53d1DropWrong\u7684\u8282\u70b9",visible:function(){return this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"wrongItems",void 0),__decorate([p({type:[cc.Node],tooltip:"\u6570\u7ec4\u5185\u8282\u70b9\u7684\u5b50\u8282\u70b9\u4f1a\u88ab\u653e\u5165items\u5185",visible:function(){return this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"itemsParent",void 0),__decorate([p({type:[cc.Node],tooltip:"\u6570\u7ec4\u5185\u8282\u70b9\u7684\u5b50\u8282\u70b9\u4f1a\u88ab\u653e\u5165wrongItems\u5185",visible:function(){return this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"wrongItemsParent",void 0),__decorate([p({tooltip:"\u662f\u5426\u4fdd\u7559\u539f\u62d6\u62fd\u9879",displayName:"retain",visible:function(){return this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"retain",void 0),__decorate([p({tooltip:"\u5f53cancel\u6216\u8005dropwrong\u65f6\uff0c\u62d6\u62fd\u8282\u70b9\u56de\u5230\u521d\u59cb\u7684\u4f4d\u7f6e\u3002\u5f53dropwrong\u4e3atrue&&shakeWithWrong\u4e3atrue\u65f6\uff0c\u4f1a\u505a\u5b8c\u9519\u8bef\u52a8\u753b\u540e\u8fd4\u56de\u5230\u521d\u59cb\u4f4d\u7f6e\u3002",displayName:"backOnCanelOrDoWrong",visible:function(){return this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"backOnCanelOrDoWrong",void 0),__decorate([p({tooltip:"\u62d6\u62fd\u8282\u70b9\u56de\u5230\u521d\u59cb\u7684\u4f4d\u7f6e,\u662f\u5426\u5e26\u6709\u52a8\u753b,\u672a\u5f00\u59cb\u6e38\u620f\u65f6\u65e0\u52a8\u753b",displayName:"backAnimation",visible:function(){return this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"backAnimation",void 0),__decorate([p({tooltip:"dropWrong\u65f6\u662f\u5426\u6267\u884c\u9519\u8bef\u52a8\u753b",displayName:"shakeWithWrong",visible:function(){return this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"shakeWithWrong",void 0),__decorate([p({tooltip:"\u6267\u884c\u52a8\u753b\u662f\u672c\u8eab\u5219\u52fe\u9009\uff0c\u662f\u5176\u7236\u8282\u70b9\u5219\u4e0d\u52fe\u9009",displayName:"isParentAction",visible:function(){return this.eventType!==o.EventTypeEnum.Click&&this.shakeWithWrong}})],t.prototype,"isParentAction",void 0),__decorate([p({tooltip:"\u5b66\u751f\u7aef\u4e0d\u663e\u793a",displayName:"makeUnactive4Student"})],t.prototype,"makeUnactive4Student",void 0),__decorate([p({tooltip:"\u5b66\u751f\u7aef\u9690\u85cf\u6309\u94ae\uff0c\u8001\u5e08\u7aef\u534a\u900f\u660e\u663e\u793a",displayName:"stuHideAndTeacherShowShadow"})],t.prototype,"stuHideAndTeacherShowShadow",void 0),__decorate([p({type:cc.Integer,tooltip:"\u9762\u79ef\u767e\u5206\u6bd4\uff08\u78b0\u649e\u7684\u9762\u79ef/dragNode\u7684\u9762\u79ef\uff09",displayName:"checkaraePercent",visible:function(){return this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"checkaraePercent",void 0),__decorate([p({tooltip:"\u5f53drop\u7684\u65f6\u5019\u662f\u5426\u5c06dragnode\u653e\u5230dropnode\u91cc\u9762",displayName:"dropIn",visible:function(){return this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"dropIn",void 0),__decorate([p({tooltip:"\u653e\u7f6e\u7684\u5750\u6807",displayName:"dropPosition",visible:function(){return this.eventType!==o.EventTypeEnum.Click&&this.dropIn}})],t.prototype,"dropPosition",void 0),__decorate([p({tooltip:"\u5728retain\u65f6\u5220\u9664drop\u533a\u57df\u7684\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9\uff0c\u975eretain\u65f6drag\u8282\u70b9\u653e\u5165\uff0c\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9\u8fd4\u56de\u521d\u59cb\u4f4d\u7f6e",visible:function(){return this.dropIn}})],t.prototype,"isChangeOnDrop",void 0),__decorate([p({type:cc.Integer,tooltip:"\u70b9\u51fb\u4e0e\u62d6\u62fd\u5224\u5b9a\u7684\u8bef\u5dee\u503c\uff0c\u5373\u5f53\u624b\u6296\u65f6\uff0c\u6296\u7684\u5e45\u5ea6\u591a\u5927\u624d\u5f00\u59cb\u7b97\u62d6\u62fd",displayName:"beginMoveOffset",visible:function(){return this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"beginMoveOffset",void 0),__decorate([p({tooltip:"\u989d\u5916\u7684\u6570\u636e\u53ef\u4ee5\u5b58\u5230\u8fd9\u91cc",displayName:"tag"})],t.prototype,"tag",void 0),__decorate([p({tooltip:!1})],t.prototype,"zoomScale",void 0),__decorate([p()],t.prototype,"_interactable",void 0),__decorate([p({tooltip:!1})],t.prototype,"interactable",null),__decorate([p()],t.prototype,"_enableAutoGrayEffect",void 0),__decorate([p({tooltip:!1})],t.prototype,"enableAutoGrayEffect",null),__decorate([p({tooltip:"\u662f\u5426\u663e\u793a\u51fd\u6570\u53e5\u67c4"})],t.prototype,"isShowEventProp",void 0),__decorate([p({type:cc.Component.EventHandler,displayName:"onclick",visible:function(){return this.isShowEventProp&&this.eventType!==o.EventTypeEnum.Drag}})],t.prototype,"onclick",void 0),__decorate([p({type:cc.Component.EventHandler,displayName:"drop",visible:function(){return this.isShowEventProp&&this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"drop",void 0),__decorate([p({type:cc.Component.EventHandler,displayName:"beforeDrop",tooltip:"\u81ea\u5b9a\u4e49\u7684drop\u51fd\u6570\uff0c\u5f53\u8fd9\u4e2a\u51fd\u6570\u8fd4\u56de\u503c\u4e3atrue\u7684\u65f6\u5019\uff0c\u4f1a\u8fdb\u5165drop\uff0c\u5426\u5219\u8fdb\u5165cancel",visible:function(){return this.isShowEventProp&&this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"customDrophandler",void 0),__decorate([p({type:cc.Component.EventHandler,displayName:"cancel",visible:function(){return this.isShowEventProp&&this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"cancel",void 0),__decorate([p({type:cc.Component.EventHandler,displayName:"dropWrong",visible:function(){return this.isShowEventProp&&this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"dropWrong",void 0),__decorate([p({type:cc.Component.EventHandler,displayName:"dragstart",visible:function(){return this.isShowEventProp&&this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"dragstart",void 0),__decorate([p({type:cc.Component.EventHandler,displayName:"dragmove",visible:function(){return this.isShowEventProp&&this.eventType!==o.EventTypeEnum.Click}})],t.prototype,"dragmove",void 0),t=__decorate([d,g],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../../event/EventCenter":"EventCenter","../../framework/constant/GameConstant":"GameConstant","../../framework/message/CgMessageFramework":"CgMessageFramework","../../framework/model/RoomModel":"RoomModel","../../framework/model/UserModel":"UserModel","../../manager/PanelManager":"PanelManager","../../utils/GameUtil":"GameUtil"}],TipPanel:[function(e,t,o){"use strict";cc._RF.push(t,"c50c4B7iLJJvKsDamsmdm59","TipPanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property,i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return __extends(t,e),t.prototype.start=function(){},__decorate([a(cc.Label)],t.prototype,"label",void 0),__decorate([a],t.prototype,"text",void 0),t=__decorate([r],t)}(cc.Component);o.default=i,cc._RF.pop()},{}],TransitionScale:[function(e,t,o){"use strict";cc._RF.push(t,"e756c+ltrdOI4h4yCWCeYaD","TransitionScale"),Object.defineProperty(o,"__esModule",{value:!0});var n,r=cc.misc,a=cc._decorator,i=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zoomScale=1.2,t.duration=.1,t.time=0,t._pressed=!1,t._transitionFinished=!0,t._fromScale=0,t._toScale=0,t._originalScale=0,t}return __extends(t,e),t.prototype.start=function(){this._originalScale=this.node.scale},t.prototype.onHandleTouchBegin=function(e){e==this.node.increaseId&&(this._pressed=!0,this._updateState())},t.prototype.onHandleTouchMove=function(e){e==this.node.increaseId&&(this._fromScale=this._originalScale,this._toScale=this._originalScale*this.zoomScale,this._transitionFinished=!1)},t.prototype.onHandleTouchEnded=function(e){e==this.node.increaseId&&(this._pressed=!1,this._updateState())},t.prototype.onHandleTouchCancel=function(e){e==this.node.increaseId&&(this._pressed=!1,this._updateState())},t.prototype.update=function(e){if(!this._transitionFinished){var t=this.node;this.time+=e;var o=1;this.duration>0&&(o=this.time/this.duration),o>=1&&(o=1,this._transitionFinished=!0),t.scale=r.lerp(this._fromScale,this._toScale,o)}},t.prototype._updateState=function(){var e=this._getButtonState();this._applyTransition(e)},t.prototype._getButtonState=function(){return this._pressed?n.PRESSED:n.NORMAL},t.prototype._applyTransition=function(e){this._updateScaleTransition(e)},t.prototype._updateScaleTransition=function(e){e===n.PRESSED?this._zoomUp():this._zoomBack()},t.prototype._zoomUp=function(){this._fromScale=this._originalScale,this._toScale=this._originalScale*this.zoomScale,this.time=0,this._transitionFinished=!1},t.prototype._zoomBack=function(){this._fromScale=this.node.scale,this._toScale=this._originalScale,this.time=0,this._transitionFinished=!1},t=__decorate([i],t)}(cc.Component));o.default=s,function(e){e[e.NORMAL=0]="NORMAL",e[e.HOVER=1]="HOVER",e[e.PRESSED=2]="PRESSED",e[e.DISABLED=3]="DISABLED"}(n||(n={})),cc._RF.pop()},{}],TuoKeYunFramework:[function(e,t,o){"use strict";cc._RF.push(t,"7b8fbwbLlxIeorsMOuvGCR4","TuoKeYunFramework"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./TuoKeYunSdk"),r=e("../../framework/network/handler/TuoKeYunSdkMessageHandler"),a=e("../../framework/model/UserModel"),i=e("./SdkMessageType"),s=e("../../framework/constant/GameConstant"),c=e("../../common/log/Log"),u=e("../../utils/GameUtil"),l=e("../../game/data/GlobalData"),d=function(){function e(){this._sdk=null,this._sdk=new n.TuoKeYunSdk(r.TuoKeYunHandler.onMessage,r.TuoKeYunHandler)}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.teacherClickBase=function(e){(u.GameUtil.isTeacher()||l.GLOBAL.env_debug)&&this.sendCustomMessage("nova.teacher.clickBase",e)},e.prototype.sendCocosException2Client=function(e,t,o){void 0===t&&(t=""),void 0===o&&(o="");var n={message:e,intro:t,detail:o};this.sendJson(i.SdkMessageType.ON_COCOS_EXCEPTION_2_CLIENT,n)},e.prototype.sendCustomMessage=function(e,t){var o={actType:e,data:t||{}};a.UserMgr.userInfo.roleType==s.H5RoleType.STUDENT||a.UserMgr.userInfo.roleType==s.H5RoleType.AIStudent?(o.data.senderId=a.UserMgr.userInfo.uid,this.sendFileStuMessage(e,o)):this.sendJson(i.SdkMessageType.ON_CUSTOM_MSG,{handleData:o})},e.prototype.sendFileStuMessage=function(e,t,o,n,r){void 0===o&&(o=1),void 0===n&&(n=!0),void 0===r&&(r="__allExceptSender");var a={handleData:{actType:e,data:t||{}},type:o,save:n,target:r};this.sendJson(i.SdkMessageType.ON_H5_MESSAGE,a)},e.prototype.sendJson=function(e,t){this._sdk?(t.method=e,t.senderId=a.UserMgr.userInfo.uid,this._sdk.sendMsg(t)):cc.error("this._sdk is null")},e.prototype.sendTotalPageNum=function(e){this.sendJson(i.SdkMessageType.ON_PAGE_NUM,{totalPages:e})},e.prototype.sendLoadComplete=function(){if(a.UserMgr.userInfo.roleType!=s.H5RoleType.UNDEFINED){var e={coursewareRatio:3036/1366,offsetData:null},t={isOffset:!0,offsetX:494/3036,offsetY:107/1366,scaleX:2048/3036,scaleY:1152/1366,offsetDirectionX:1,offsetDirectionY:1};a.UserMgr.userInfo.roleType!=s.H5RoleType.STUDENT&&a.UserMgr.userInfo.roleType!=s.H5RoleType.AIStudent||(t.offsetDirectionX=0,t.offsetDirectionY=0,e.coursewareRatio=2048/1152),e.offsetData=t,this.sendJson(i.SdkMessageType.ON_LOAD_COMPLETE,e)}else c.default.error("\u53d1\u9001 loadComplete \u65f6  \u8fd8\u6ca1\u6709\u83b7\u53d6\u5230\u7528\u6237\u7684\u8eab\u4efd\u4fe1\u606f")},e.prototype.sendCocosMessage2Client=function(e,t){this.sendFileStuMessage(e,t,0,!1)},e.prototype.sendPageChange=function(e){a.UserMgr.userInfo.roleType==s.H5RoleType.TEACHER&&(c.default.debug("\u53d1\u9001\u7ffb\u9875 \uff1a "+e),this.sendJson(i.SdkMessageType.ON_PAGE_CHANGE,{toPage:e}))},e.prototype.sendPageChangeSuccess=function(e){a.UserMgr.userInfo.roleType!=s.H5RoleType.TEACHER&&this.sendJson("onPageSuccess",{page:e})},e._instance=null,e}();o.default=d,o.SdkFramework=d.getInstance(),cc._RF.pop()},{"../../common/log/Log":"Log","../../framework/constant/GameConstant":"GameConstant","../../framework/model/UserModel":"UserModel","../../framework/network/handler/TuoKeYunSdkMessageHandler":"TuoKeYunSdkMessageHandler","../../game/data/GlobalData":"GlobalData","../../utils/GameUtil":"GameUtil","./SdkMessageType":"SdkMessageType","./TuoKeYunSdk":"TuoKeYunSdk"}],TuoKeYunSdkMessageHandler:[function(e,t,o){"use strict";cc._RF.push(t,"a63ecuTtYdH+JkSkBagA/65","TuoKeYunSdkMessageHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../common/log/Log"),r=e("../../model/UserModel"),a=e("../../../plugin/tuoKeYun/SdkMessageType"),i=e("../../../event/EventCenter"),s=e("../../../game/data/GlobalData"),c=e("../../message/CocosMessageType"),u=function(){function e(){}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.onMessage=function(e){for(;"string"==typeof e;)e=JSON.parse(e);var t=e;if(n.default.info("TuoKeYunSdkMessageHandler.onMessage : "+JSON.stringify(e)),t.sendUserId&&t.sendUserId==r.UserMgr.userInfo.uid&&t.method!=a.SdkMessageType.ON_LOAD_COMPLETE)n.default.debug("\u5982\u679c\u662f\u81ea\u5df1\u4e3b\u52a8\u53d1\u9001\u7684\u6d88\u606f\u5219\u4e0d\u9700\u8981\u5904\u7406!!!");else{var o=t.method,i=null;o==a.SdkMessageType.ON_CUSTOM_MSG||" msg.method == CGMessageType.ON_H5_MESSAGE"!=t.method&&t.handleData?(o=t.handleData.actType,i=t.handleData.data,t.handleData.data.data&&(i=t.handleData.data.data)):i=t,this.dispatchEvent(o,i)}},e.prototype.dispatchEvent=function(e,t){switch(n.default.debug("\u6536\u5230sdk \u6d88\u606f : "+e+"  --: -- "+JSON.stringify(t)),e){case"baseinfo":this.onHandleBaseInfo(t)}i.EVT.emit(e,t)},e.prototype.onHandleBaseInfo=function(e){e?(n.default.debug("onHandleBaseInfo  \uff1a "+JSON.stringify(e)),s.GLOBAL.baseInfo.clientId=e.clientId,s.GLOBAL.baseInfo.cv=e.cv,s.GLOBAL.baseInfo.env=+e.env,s.GLOBAL.baseInfo.lessonId=e.lessonId,s.GLOBAL.baseInfo.role=e.role,s.GLOBAL.baseInfo.token=e.token,s.GLOBAL.baseInfo.business=e.business,r.UserMgr.userInfo.roleType=e.role,r.UserMgr.userInfo.uid=e.userId,r.UserMgr.userInfo.lessonId=+e.lessonId,i.EVT.emit(c.CocosMessageType.on_handle_base_info)):n.default.error("baseInfo \u5f02\u5e38:  "+JSON.stringify(e))},e._instance=null,e}();o.TuoKeYunSdkMessageHandler=u,o.TuoKeYunHandler=u.getInstance(),cc._RF.pop()},{"../../../common/log/Log":"Log","../../../event/EventCenter":"EventCenter","../../../game/data/GlobalData":"GlobalData","../../../plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../../message/CocosMessageType":"CocosMessageType","../../model/UserModel":"UserModel"}],TuoKeYunSdk:[function(e,t,o){"use strict";cc._RF.push(t,"b24384fUoFM3KNV/h835it6","TuoKeYunSdk"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../common/log/Log"),r=function(){function e(e,t){this.m_obj=t,this.m_onMessage=e,this.registerEvent()}return e.prototype.registerEvent=function(){var e=this;window.addEventListener("message",function(t){var o=JSON.stringify(t.data);e.onMessage(o)})},e.prototype.onMessage=function(e){n.default.debug("++++  nova-sdk.onMessage: "+JSON.stringify(e)),this.m_onMessage&&this.m_onMessage.call(this.m_obj,e)},e.prototype.sendMsg=function(e,t){void 0===t&&(t="*");var o=JSON.stringify(e);n.default.debug("tuo_ke_yun_sdk: sendJson "+JSON.stringify(o)),window.parent.postMessage(o,t)},e}();o.TuoKeYunSdk=r,cc._RF.pop()},{"../../common/log/Log":"Log"}],UserModel:[function(e,t,o){"use strict";cc._RF.push(t,"da8c6PTvm5B37rmoGUpPEYj","UserModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/data/GlobalData"),r=e("../../utils/NumberUtil"),a=e("../../utils/GameUtil"),i=e("../http/api"),s=e("../network/socket/CgSocketFrameWork"),c=e("../../plugin/tuoKeYun/TuoKeYunFramework"),u=e("../../plugin/tuoKeYun/SdkMessageType"),l=e("../constant/GameConstant"),d=function(){function e(){this.name="18-"+r.default.random(0,1e3),this._roleType=-1,this.uid="a100"+Date.now(),this.avatar="",this._classId="",this.classType="",this.lessonId=0,this.env="",this.cv="",this.clientId="",this.isLoginFinish=!1,this._curGameInfo="",this.answerInfo={status:!1,wrong:0,startTime:0,endTime:0,showTime:0,operatingTime:0,gameEndTime:0,moved:!1,isAnswer:!1}}return Object.defineProperty(e.prototype,"roleType",{get:function(){return this._roleType},set:function(e){this._roleType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classId",{get:function(){return this._classId},set:function(e){this._classId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupId",{get:function(){return g.RoomMgr.roomInfo.groupId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curGameInfo",{get:function(){return this._curGameInfo},set:function(e){(""!=e||n.GLOBAL.isLoginFinish)&&("string"!=typeof e&&(e=JSON.stringify(e)),this._curGameInfo=e)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){var e={uid:this.uid,name:this.name,classId:this._classId,classType:this.classType,lessonId:this.lessonId,env:this.env,cv:this.cv,clientId:this.clientId,roleType:this.roleType,curGameInfo:this._curGameInfo};return JSON.stringify(e)},e.prototype.convertFromServerData=function(e){if(e.curGameInfo){var t=e.curGameInfo;"string"==typeof t&&(t=JSON.parse(t)),t.uid==this.uid&&(this._curGameInfo=t)}},e.prototype.setGameStatus=function(e){this.answerInfo.status=e.status,console.debug("wuqd --- setGameStatus : "+JSON.stringify(e)),a.GameUtil.setStore("gamestatus",e)},e.prototype.uploadAnswer=function(e){var t=void 0===e?{}:e,o=t.moved,n=void 0===o||o,r=t.isAnswer,a=void 0===r||r,s=t.tryTime,c=void 0===s?this._getDurTime():s;i.upLoadStudentAnswerInfo({tryTime:c,moved:n,isAnswer:a})},e.prototype.uploadRankDataWhenFinish=function(){this.answerInfo.isAnswer=!0;var e=this._getDurTime();this.answerInfo.status=!0,this.answerInfo.endTime=Date.now();var t={uid:this.uid,status:this.answerInfo.status,wrong:this.answerInfo.wrong,time:e};n.GLOBAL.env_debug?s.default.sendMsg2Group("nova.student.answer",t):(c.SdkFramework.sendCocosMessage2Client(u.SdkMessageType.REQUEST_MASK_AUTHORIZE_PRIVILEGE,{show:!0}),c.SdkFramework.sendFileStuMessage("nova.student.answer",t)),this.uploadAnswer()},e.prototype.uploadRankDataWhenWrongAnswer=function(){this.answerInfo.isAnswer=!0;var e=this._getDurTime(),t={uid:this.uid,status:this.answerInfo.status,wrong:this.answerInfo.wrong,time:e};n.GLOBAL.env_debug?s.default.sendMsg2Group("nova.student.wrongAnswer",t):c.SdkFramework.sendFileStuMessage("nova.student.wrongAnswer",t),this.uploadAnswer()},e.prototype._getDurTime=function(){var e=this.answerInfo.startTime,t=0;if(this.answerInfo.status)t=this.answerInfo.endTime;else{if(g.RoomMgr.roomInfo.gameState<l.GameState.BEGIN)return 0;t=Date.now()}var o=Math.ceil((t-e)/1e3);return o<0&&(o=0),o},e.prototype.getDeviceType=function(){var e=navigator.userAgent;return e.indexOf("Android")>0?3:e.indexOf("iPhone")>0?4:e.indexOf("iPad")>0?1:2},e.prototype.getToolPart=function(){return a.GameUtil.isTeacher()?1:n.GLOBAL.env_debug?1:this._roleType==l.H5RoleType.PATROL||this._roleType==l.H5RoleType.REVIEW?2:this._roleType==l.H5RoleType.STUDENT&&n.GLOBAL.serverConfig.isAlignware?3:this._roleType==l.H5RoleType.STUDENT||this._roleType==l.H5RoleType.AIStudent?4:void 0},e.prototype.clearAnswerInfo=function(){this.answerInfo.status=!1,this.answerInfo.moved=!1,this.answerInfo.wrong=0,this.answerInfo.isAnswer=!1,this.answerInfo.startTime=0,this.answerInfo.endTime=0,this.answerInfo.operatingTime=0,this.answerInfo.gameEndTime=0,this.answerInfo.showTime=0},e.prototype.setStartTime=function(){this.answerInfo.startTime=Date.now()},e.prototype.setShowTime=function(){this.answerInfo.showTime=Date.now()},e.prototype.setOperatingTime=function(){this.answerInfo.operatingTime=Date.now()},e.prototype.setGameEndTime=function(){this.answerInfo.gameEndTime=Date.now()},e}();o.UserInfo=d;var p=function(){function e(){this.userInfo=new d,this.token=""}return e.getInstance=function(){return e._instance||(e._instance=new e)},e._instance=null,e}();o.default=p,o.UserMgr=p.getInstance();var g=e("./RoomModel");cc._RF.pop()},{"../../game/data/GlobalData":"GlobalData","../../plugin/tuoKeYun/SdkMessageType":"SdkMessageType","../../plugin/tuoKeYun/TuoKeYunFramework":"TuoKeYunFramework","../../utils/GameUtil":"GameUtil","../../utils/NumberUtil":"NumberUtil","../constant/GameConstant":"GameConstant","../http/api":"api","../network/socket/CgSocketFrameWork":"CgSocketFrameWork","./RoomModel":"RoomModel"}],WebSocket:[function(e,t,o){"use strict";cc._RF.push(t,"1c55e2kycJP/KKq01IPsW+X","WebSocket"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../game/data/GlobalData"),r=function(){function e(e,t,o,n,r){this.m_onClose=o,this.m_onMessage=t,this.m_onConnect=e,this.m_onError=n,this.m_obj=r,this.m_ws=null}return e.prototype.connect=function(e){if(null==this.m_ws){var t=void 0;0!=e.indexOf("ws")&&(e="wss://"+e),console.debug("\u8fde\u63a5\u670d\u52a1\u5668 ip : ",e),console.debug("\u8fde\u63a5\u670d\u52a1\u5668 GLOBAL.game_ip: ",n.GLOBAL.game_ip),(t=new WebSocket(e)).onopen=this.onOpen.bind(this),t.onclose=this.onClose.bind(this),t.onmessage=this.onMessage.bind(this),t.onerror=this.onError.bind(this),this.m_ws=t}},e.prototype.send=function(e){this.m_ws&&this.m_ws.readyState==WebSocket.OPEN&&(JSON.parse(e).actionType,this.m_ws.send(e))},e.prototype.onOpen=function(e){void 0===e&&(e=null),console.debug("\u8fde\u63a5\u7f51\u7edc:\u6210\u529f:"),this.m_onConnect&&this.m_onConnect.call(this.m_obj)},e.prototype.onClose=function(e){console.debug("socket:onClose  \u670d\u52a1\u5668\u4e3b\u52a8\u65ad\u5f00\u8fde\u63a5 "+JSON.stringify(e)),this.close(),this.m_onClose&&this.m_onClose.call(this.m_obj)},e.prototype.onError=function(e){console.debug("socket:\u8fde\u63a5\u51fa\u9519"),this.m_onError&&this.m_onError.call(this.m_obj)},e.prototype.onMessage=function(e){this.m_onMessage&&this.m_onMessage.call(this.m_obj,e.data)},e.prototype.close=function(){this.m_ws&&(console.error("----------- socket.close :\u670d\u52a1\u5668\u4e3b\u52a8\u65ad\u5f00\u8fde\u63a5"),this.m_ws.close())},e.prototype.disponse=function(){console.debug("socket:disponse \u5ba2\u6237\u7aef\u624b\u52a8\u65ad\u5f00\u8fde\u63a5"),this.m_ws&&(this.m_ws.readyState==WebSocket.OPEN&&this.m_ws.close(),this.m_ws.onopen=this.m_ws.onclose=this.m_ws.onmessage=this.m_ws.onerror=null),this.m_ws=null,this.m_onClose=null,this.m_onMessage=null,this.m_onConnect=null,this.m_onError=null,this.m_obj=null},e}();o.Socket=r,cc._RF.pop()},{"../../../game/data/GlobalData":"GlobalData"}],_games:[function(e,t,o){"use strict";cc._RF.push(t,"91223CyiUBDZKimdF2IeAo3","_games"),t.exports.games=[e("game_01"),e("game_monsterWithRoad"),e("game_step2")],cc._RF.pop()},{game_01:"game_01",game_monsterWithRoad:"game_monsterWithRoad",game_step2:"game_step2"}],answerItem:[function(e,t,o){"use strict";cc._RF.push(t,"1a541x3T4VJT6QWy+9so9eQ","answerItem"),Object.defineProperty(o,"__esModule",{value:!0});var n,r=cc._decorator,a=r.ccclass,i=r.property;(function(e){e.OFF_LINE="OFF_LINE",e.NOT_READY="NOT_READY",e.READY="READY",e.DOING="DOING",e.DONE="DONE"})(n||(n={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankicon=null,t.statusIcon=null,t.status=n.NOT_READY,t.uid="hello",t.ranking=null,t.username=null,t.errorNum=null,t.completeTime=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.init=function(e){0==e.wrong?this.errorNum.node.active=!1:this.errorNum.node.active=!0,e.isOnline&&e.isLoaded&&(this.node.color=cc.color(255,255,255,255)),e.isComplete?this.completeTime.node.active=!0:this.completeTime.node.active=!1,this.rankicon.spriteFrame=e.rankicon,this.statusIcon.spriteFrame=e.statusIcon,this.uid=e.uid,this.username.string=e.name,this.errorNum.string=e.wrong,this.completeTime.string=e.time},__decorate([i(cc.Sprite)],t.prototype,"rankicon",void 0),__decorate([i(cc.Sprite)],t.prototype,"statusIcon",void 0),__decorate([i],t.prototype,"status",void 0),__decorate([i],t.prototype,"uid",void 0),__decorate([i(cc.Label)],t.prototype,"ranking",void 0),__decorate([i(cc.Label)],t.prototype,"username",void 0),__decorate([i(cc.Label)],t.prototype,"errorNum",void 0),__decorate([i(cc.Label)],t.prototype,"completeTime",void 0),t=__decorate([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],answerList:[function(e,t,o){"use strict";cc._RF.push(t,"0054c7GtF1O74XS8SpEFg6i","answerList"),Object.defineProperty(o,"__esModule",{value:!0});var n,r=e("../../Script/framework/model/UserModel"),a=e("../../Script/framework/constant/GameConstant"),i=e("../../Script/framework/model/RoomModel"),s=e("../../Script/framework/network/socket/CgSocketFrameWork"),c=e("../../Script/event/EventCenter"),u=e("../../Script/plugin/tuoKeYun/SdkMessageType");(function(e){e[e.NORMAL=2]="NORMAL",e[e.UNLOAD=1]="UNLOAD",e[e.OFFLINE=0]="OFFLINE"})(n||(n={}));var l=cc._decorator,d=l.ccclass,p=l.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankicons=[null],t.statusIcons=[null,null,null],t.rankNode=null,t.raitoLabel=null,t.item=null,t.studentList=[],t.onlineList=[],t.showStudentList=[],t.userList=new Array,t.completeList=[],t.timerS=Date.now(),t}return __extends(t,e),t.prototype.onLoad=function(){r.UserMgr.userInfo.roleType!=a.H5RoleType.STUDENT&&r.UserMgr.userInfo.roleType!=a.H5RoleType.AIStudent&&this.reset()},t.prototype.start=function(){r.UserMgr.userInfo.roleType!=a.H5RoleType.STUDENT&&r.UserMgr.userInfo.roleType!=a.H5RoleType.AIStudent&&(this.resetTime(),this.addEvent())},t.prototype.reset=function(){this.initList(),this.createRows(),this.createRatio()},t.prototype.resetTime=function(){this.timerS=Date.now()},t.prototype.initList=function(){i.RoomMgr.roomInfo.answerRecord?this.userList=JSON.parse(JSON.stringify(JSON.parse(i.RoomMgr.roomInfo.answerRecord))):(this.userList=JSON.parse(JSON.stringify(i.RoomMgr.roomInfo.userList)),this.userList.forEach(function(e){e.wrong=0,e.time=0,e.isComplete=!1,e.isLoaded=!1})),this.studentList=this.userList.filter(function(e){return e.role==a.H5RoleType.STUDENT||e.role==a.H5RoleType.AIStudent}),this.showStudentList=this.studentList,this.onlineList=this.studentList.filter(function(e){return e.isOnline}),this.completeList=this.onlineList.filter(function(e){return e.isComplete})},t.prototype._refreshList=function(){this.studentList=this.userList.filter(function(e){return e.role==a.H5RoleType.STUDENT||e.role==a.H5RoleType.AIStudent}),this.showStudentList=this.studentList,this.onlineList=this.studentList.filter(function(e){return e.isOnline}),this.completeList=this.onlineList.filter(function(e){return e.isComplete})},t.prototype.refreshRenderList=function(e){var t=this.studentList.find(function(t){return t.uid==e.uid});t?t.isOnline=e.isOnline:this.userList.push({wrong:0,time:0,uid:e.uid,name:e.name,role:a.H5RoleType.STUDENT,isOnline:!0,isComplete:!1,isLoaded:!1}),this._refreshList()},t.prototype.createRatio=function(){this.raitoLabel.string=this.completeList.length+"/"+this.onlineList.length},t.prototype.createRows=function(){var e=this;if(this.showStudentList.length){this.rankNode.removeAllChildren(!0);var t={rankicon:null,statusIcon:this.statusIcons[0],wrong:0,time:0,uid:0,name:"\u9ed8\u8ba4",isComplete:!1,isOnline:!0},o=0;_.sortBy(this.showStudentList,[function(e){return!e.isOnline},function(e){return!e.isLoaded},function(e){return!e.isComplete},"time","wrong","name"]).forEach(function(n){n.isOnline?n.isLoaded?t.statusIcon=e.statusIcons[2]:t.statusIcon=e.statusIcons[1]:t.statusIcon=e.statusIcons[0],n.isComplete&&o<3&&(n.rankicon=e.rankicons[o],o++);var r=cc.instantiate(e.item);r.getComponent("answerItem").init(_.extend(t,n)),r.parent=e.rankNode,n.rankicon=null}),i.RoomMgr.roomInfo.answerRecord=JSON.stringify(this.userList),s.default.setGroupCommon()}},t.prototype.refreshListAndCreateRows=function(e){this.refreshRenderList(e),this.createRows(),this.createRatio()},t.prototype.modifyRowsByStudentAnswer=function(e){var t=this.userList.find(function(t){return t.uid==e.uid});(t=_.assignIn(t,e)).isComplete=e.status},t.prototype.modifyRowsByLoadedMsg=function(e){var t=this.userList.find(function(t){return t.uid==e.uid});t=_.assignIn(t,e)},t.prototype.addEvent=function(){var e=this;c.EVT.on("JOIN_GROUP_SUCCESS",function(t){t.isOnline=!0,e.refreshListAndCreateRows(t)}),c.EVT.on("CG_USER_LEAVE",function(t){t.isOnline=!1,e.refreshListAndCreateRows(t)}),c.EVT.on("changPageSuccess",function(t){var o=t.senderId,n=t.pageIndex;i.RoomMgr.roomInfo.curPageIndex==n?e.modifyRowsByLoadedMsg({uid:o,isLoaded:!0}):(e.modifyRowsByLoadedMsg({uid:o,isLoaded:!1}),cc.log("\u4e0d\u540c\u7684\u9875\u9762")),e._refreshList(),e.createRows(),e.createRatio()}),c.EVT.on("nova.student.wrongAnswer",this.onHandleStudentAnswer,this),c.EVT.on("nova.student.answer",this.onHandleStudentAnswer,this),c.EVT.on(u.SdkMessageType.ON_PAGE_CHANGE,this.reset,this),c.EVT.on("gameBegin",this.resetTime,this)},t.prototype.onHandleStudentAnswer=function(e){this.modifyRowsByStudentAnswer(e),this._refreshList(),this.createRows(),this.createRatio()},__decorate([p([cc.SpriteFrame])],t.prototype,"rankicons",void 0),__decorate([p([cc.SpriteFrame])],t.prototype,"statusIcons",void 0),__decorate([p(cc.Node)],t.prototype,"rankNode",void 0),__decorate([p(cc.Label)],t.prototype,"raitoLabel",void 0),__decorate([p(cc.Prefab)],t.prototype,"item",void 0),t=__decorate([d],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../Script/event/EventCenter":"EventCenter","../../Script/framework/constant/GameConstant":"GameConstant","../../Script/framework/model/RoomModel":"RoomModel","../../Script/framework/model/UserModel":"UserModel","../../Script/framework/network/socket/CgSocketFrameWork":"CgSocketFrameWork","../../Script/plugin/tuoKeYun/SdkMessageType":"SdkMessageType"}],api:[function(e,t,o){"use strict";cc._RF.push(t,"3bb54g/uGlJw4ExRW8ZGsXT","api"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./request"),r=e("./requestParams"),a=e("../model/RoomModel"),i=e("../constant/GameConstant"),s=e("../../utils/GameUtil"),c=e("./storageType"),u=e("../model/UserModel"),l=e("../../game/data/GlobalData");o.setData2Server=function(e){return n.post("student/data/datahandle",Object.assign(e,{sign:1}))},o.getDataFromServer=function(e){return n.post("student/data/datahandle",Object.assign(e,{sign:2}))},o.getIsAlignWareFromDeviceType=function(){return n.post("student/data/switch",{},{clientid:r.getClientid()})},o.upLoadStudentAnswerInfo=function(t){var o=t.stuId,s=void 0===o?u.UserMgr.userInfo.uid:o,c=t.lessonId,d=void 0===c?u.UserMgr.userInfo.lessonId:c,p=t.tryPage,g=void 0===p?a.RoomMgr.roomInfo.curPageIndex:p,m=t.tryCount,h=void 0===m?u.UserMgr.userInfo.answerInfo.wrong:m,f=t.isRight,_=void 0===f?u.UserMgr.userInfo.answerInfo.status:f,y=t.tryPageNum,S=void 0===y?a.RoomMgr.roomInfo.getTeacherTryPageNum():y,v=t.totalPage,I=void 0===v?a.RoomMgr.roomInfo.totalPage:v,E=t.tryTime,T=t.moved,C=t.isAnswer,M=t.startTime,N=void 0===M?u.UserMgr.userInfo.answerInfo.startTime:M,L=t.endTime,R=void 0===L?u.UserMgr.userInfo.answerInfo.endTime:L,b=t.gameEndTime,k=void 0===b?u.UserMgr.userInfo.answerInfo.gameEndTime:b,O=t.sourceId,P=void 0===O?l.GLOBAL.fileid:O,A=t.operatingTime,G=void 0===A?u.UserMgr.userInfo.answerInfo.operatingTime:A,w=t.showTime,D=void 0===w?u.UserMgr.userInfo.answerInfo.showTime:w;if(i.H5RoleType.STUDENT==u.UserMgr.userInfo.roleType||i.H5RoleType.AIStudent==u.UserMgr.userInfo.roleType){var U=e("_games").games[a.RoomMgr.roomInfo.curPageIndex-1],B=0,x=0,F=0;return B=void 0===U.answerType?i.AnswerTypeEnum.HAVE:Number(U.answerType),x=void 0===U.knowledgeType?i.KnowledgeTypeEnum.RELEVANT:Number(U.knowledgeType),F=void 0===U.courseStep?i.CourseStepEnum.NORMLAL:Number(U.courseStep),n.post(r.getBaseURL(1)+"statistics/cwAnswerActionServer/answerinput",{stuId:s,lessonId:d,tryPage:g,tryTime:E,tryCount:h,tryPageNum:S,totalPage:I,moved:Number(T),isAnswer:Number(C),isRight:Number(_),sourceId:P,operatingTime:G,startTime:N,gameEndTime:k,endTime:R,showTime:D,answerType:B,knowledgeType:x,courseStep:F})}},o.upLoadPageConfig=function(){var t=e("_games").games;t.forEach(function(e,t){e._tryPage=t+1});var o=t.filter(function(e){return e.type&&e.type==i.GameSyncTypeEnum.DISTRIBUTE}),a={};a.lessonId=u.UserMgr.userInfo.lessonId,a.totalPage=o.length,a.sourceId=l.GLOBAL.fileid;var s=o.map(function(e,t){var o={};return o.tryPage=e._tryPage,o.order=t+1,void 0===e.answerType?o.answerType=i.AnswerTypeEnum.HAVE:o.answerType=Number(e.answerType),void 0===e.knowledgeType?o.knowledgeType=i.KnowledgeTypeEnum.RELEVANT:o.knowledgeType=Number(e.knowledgeType),void 0===e.courseStep?o.courseStep=i.CourseStepEnum.NORMLAL:o.courseStep=Number(e.courseStep),o});return a.list=s,n.post(r.getBaseURL(1)+"statistics/cwAnswerActionServer/courseWareQuestion",a)},o.getStudentList=function(e){var t=(void 0===e?{}:e).lessonId,o=void 0===t?u.UserMgr.userInfo.lessonId:t;return n.post("student/lesson/studentlist",{lessonId:o})},o.getStudentInfo=function(e){var t=void 0===e?{}:e,o=t.stuId,r=void 0===o?u.UserMgr.userInfo.uid:o,a=t.lessonId,i=void 0===a?u.UserMgr.userInfo.lessonId:a;return n.post("student/user/userinfo",{stuId:r,lessonId:i})},o.getTeacherInfo=function(e){var t=void 0===e?{}:e,o=t.teaId,r=void 0===o?u.UserMgr.userInfo.uid:o,a=t.lessonId,i=void 0===a?u.UserMgr.userInfo.lessonId:a;return n.post("teacher/user/userinfo",{teaId:r,lessonId:i})},o.getRoomInfo=function(e){return n.post("teacher/user/userinfo",{roomId:e})},o.sendLogs=function(e,t){if(void 0===t&&(t=!1),(u.UserMgr.userInfo.roleType==i.H5RoleType.TEACHER||u.UserMgr.userInfo.roleType==i.H5RoleType.STUDENT)&&0!=l.GLOBAL.env_debug){var o={userId:u.UserMgr.userInfo.uid,fromId:200,role:u.UserMgr.userInfo.roleType,os:u.UserMgr.userInfo.clientId,appVersion:u.UserMgr.userInfo.cv,time:Date.now(),userName:u.UserMgr.userInfo.name,detail:"",remark:"",pageIndex:a.RoomMgr.roomInfo.curPageIndex};"string"==typeof e?o.detail=e:"object"==typeof e&&(o=Object.assign({},o,e));var d=s.GameUtil.getStore(c.storageType.LOGS);if(t&&d)return n.post(r.getBaseURL(1)+"msg/logs/send/front_log",{logs:JSON.parse(d).logs}),s.GameUtil.removeStore(c.storageType.LOGS),Promise.resolve("\u53d1\u9001\u4e00\u7ec4\u65e5\u5fd7");if(d){var p=JSON.parse(d).logs;if(p.push(JSON.stringify(o)),p.length>=50)return n.post(r.getBaseURL(1)+"msg/logs/send/front_log",{logs:JSON.parse(d).logs}),s.GameUtil.removeStore(c.storageType.LOGS),Promise.resolve("\u53d1\u9001\u4e00\u7ec4\u65e5\u5fd7");g={logs:p};return s.GameUtil.setStore(c.storageType.LOGS,g),Promise.resolve("\u65b0\u589e\u4e00\u6761\u65e5\u5fd7")}var g={logs:[JSON.stringify(o)]};return s.GameUtil.setStore(c.storageType.LOGS,g),Promise.resolve("\u65b0\u589e\u4e00\u6761\u65e5\u5fd7")}},o.sendLog=function(e){u.UserMgr.userInfo.roleType!=i.H5RoleType.TEACHER&&u.UserMgr.userInfo.roleType!=i.H5RoleType.STUDENT||0!=l.GLOBAL.env_debug&&n.get(r.getBaseURL(1)+"msg/logs/send/front_log",{s:window.btoa(window.encodeURIComponent(JSON.stringify(e)))})},cc._RF.pop()},{"../../game/data/GlobalData":"GlobalData","../../utils/GameUtil":"GameUtil","../constant/GameConstant":"GameConstant","../model/RoomModel":"RoomModel","../model/UserModel":"UserModel","./request":"request","./requestParams":"requestParams","./storageType":"storageType",_games:"_games"}],axios:[function(e,t,o){(function(e){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(t,"ec43fglSJpHYr4EKi3vn/Uf","axios"),function(e,r){"object"==(void 0===o?"undefined":n(o))&&"object"==(void 0===t?"undefined":n(t))?t.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==(void 0===o?"undefined":n(o))?o.axios=r():(void 0).axios=r()}(0,function(){return function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){e.exports=o(1)},function(e,t,o){function n(e){var t=new i(e),o=a(i.prototype.request,t);return r.extend(o,i.prototype,t),r.extend(o,t),o}var r=o(2),a=o(3),i=o(5),s=o(6),c=n(s);c.Axios=i,c.create=function(e){return n(r.merge(s,e))},c.Cancel=o(23),c.CancelToken=o(24),c.isCancel=o(20),c.all=function(e){return Promise.all(e)},c.spread=o(25),e.exports=c,e.exports.default=c},function(e,t,o){function r(e){return"[object Array]"===l.call(e)}function a(e){return null!==e&&"object"==n(e)}function i(e){return"[object Function]"===l.call(e)}function s(e,t){if(null!==e&&void 0!==e)if("object"!=n(e)&&(e=[e]),r(e))for(var o=0,a=e.length;o<a;o++)t.call(null,e[o],o,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var c=o(3),u=o(4),l=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:function(e){return"[object ArrayBuffer]"===l.call(e)},isBuffer:u,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===l.call(e)},isFile:function(e){return"[object File]"===l.call(e)},isBlob:function(e){return"[object Blob]"===l.call(e)},isFunction:i,isStream:function(e){return a(e)&&i(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:s,merge:function e(){function t(t,r){"object"==n(o[r])&&"object"==n(t)?o[r]=e(o[r],t):o[r]=t}for(var o={},r=0,a=arguments.length;r<a;r++)s(arguments[r],t);return o},extend:function(e,t,o){return s(t,function(t,n){e[n]=o&&"function"==typeof t?c(t,o):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){e.exports=function(e,t){return function(){for(var o=new Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];return e.apply(t,o)}}},function(e,t){function o(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function n(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&o(e.slice(0,0))}e.exports=function(e){return null!=e&&(o(e)||n(e)||!!e._isBuffer)}},function(e,t,o){function n(e){this.defaults=e,this.interceptors={request:new i,response:new i}}var r=o(6),a=o(2),i=o(17),s=o(18);n.prototype.request=function(e){"string"==typeof e&&(e=a.merge({url:arguments[0]},arguments[1])),(e=a.merge(r,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[s,void 0],o=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)o=o.then(t.shift(),t.shift());return o},a.forEach(["delete","get","head","options"],function(e){n.prototype[e]=function(t,o){return this.request(a.merge(o||{},{method:e,url:t}))}}),a.forEach(["post","put","patch"],function(e){n.prototype[e]=function(t,o,n){return this.request(a.merge(n||{},{method:e,url:t,data:o}))}}),e.exports=n},function(t,o,n){function r(e,t){!a.isUndefined(e)&&a.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a=n(2),i=n(7),s={"Content-Type":"application/x-www-form-urlencoded"},c={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=n(8):void 0!==e&&(t=n(8)),t}(),transformRequest:[function(e,t){return i(t,"Content-Type"),a.isFormData(e)||a.isArrayBuffer(e)||a.isBuffer(e)||a.isStream(e)||a.isFile(e)||a.isBlob(e)?e:a.isArrayBufferView(e)?e.buffer:a.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):a.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};a.forEach(["delete","get","head"],function(e){c.headers[e]={}}),a.forEach(["post","put","patch"],function(e){c.headers[e]=a.merge(s)}),t.exports=c},function(e,t,o){var n=o(2);e.exports=function(e,t){n.forEach(e,function(o,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=o,delete e[n])})}},function(e,t,o){var n=o(2),r=o(9),a=o(12),i=o(13),s=o(14),c=o(10),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||o(15);e.exports=function(e){return new Promise(function(t,l){var d=e.data,p=e.headers;n.isFormData(d)&&delete p["Content-Type"];var g=new XMLHttpRequest,m="onreadystatechange",h=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in g||s(e.url)||(g=new window.XDomainRequest,m="onload",h=!0,g.onprogress=function(){},g.ontimeout=function(){}),e.auth){var f=e.auth.username||"",_=e.auth.password||"";p.Authorization="Basic "+u(f+":"+_)}if(g.open(e.method.toUpperCase(),a(e.url,e.params,e.paramsSerializer),!0),g.timeout=e.timeout,g[m]=function(){if(g&&(4===g.readyState||h)&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))){var o="getAllResponseHeaders"in g?i(g.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?g.response:g.responseText,status:1223===g.status?204:g.status,statusText:1223===g.status?"No Content":g.statusText,headers:o,config:e,request:g};r(t,l,n),g=null}},g.onerror=function(){l(c("Network Error",e,null,g)),g=null},g.ontimeout=function(){l(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",g)),g=null},n.isStandardBrowserEnv()){var y=o(16),S=(e.withCredentials||s(e.url))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;S&&(p[e.xsrfHeaderName]=S)}if("setRequestHeader"in g&&n.forEach(p,function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete p[t]:g.setRequestHeader(t,e)}),e.withCredentials&&(g.withCredentials=!0),e.responseType)try{g.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&g.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){g&&(g.abort(),l(e),g=null)}),void 0===d&&(d=null),g.send(d)})}},function(e,t,o){var n=o(10);e.exports=function(e,t,o){var r=o.config.validateStatus;o.status&&r&&!r(o.status)?t(n("Request failed with status code "+o.status,o.config,null,o.request,o)):e(o)}},function(e,t,o){var n=o(11);e.exports=function(e,t,o,r,a){var i=new Error(e);return n(i,t,o,r,a)}},function(e,t){e.exports=function(e,t,o,n,r){return e.config=t,o&&(e.code=o),e.request=n,e.response=r,e}},function(e,t,o){function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var r=o(2);e.exports=function(e,t,o){if(!t)return e;var a;if(o)a=o(t);else if(r.isURLSearchParams(t))a=t.toString();else{var i=[];r.forEach(t,function(e,t){null!==e&&void 0!==e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),i.push(n(t)+"="+n(e))}))}),a=i.join("&")}return a&&(e+=(-1===e.indexOf("?")?"?":"&")+a),e}},function(e,t,o){var n=o(2),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,o,a,i={};return e?(n.forEach(e.split("\n"),function(e){if(a=e.indexOf(":"),t=n.trim(e.substr(0,a)).toLowerCase(),o=n.trim(e.substr(a+1)),t){if(i[t]&&r.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([o]):i[t]?i[t]+", "+o:o}}),i):i}},function(e,t,o){var n=o(2);e.exports=n.isStandardBrowserEnv()?function(){function e(e){var t=e;return o&&(r.setAttribute("href",t),t=r.href),r.setAttribute("href",t),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}var t,o=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");return t=e(window.location.href),function(o){var r=n.isString(o)?e(o):o;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},function(e,t){function o(){this.message="String contains an invalid character"}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.prototype=new Error,o.prototype.code=5,o.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,r,a=String(e),i="",s=0,c=n;a.charAt(0|s)||(c="=",s%1);i+=c.charAt(63&t>>8-s%1*8)){if((r=a.charCodeAt(s+=.75))>255)throw new o;t=t<<8|r}return i}},function(e,t,o){var n=o(2);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,o,r,a,i){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(o)&&s.push("expires="+new Date(o).toGMTString()),n.isString(r)&&s.push("path="+r),n.isString(a)&&s.push("domain="+a),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,o){function n(){this.handlers=[]}var r=o(2);n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=n},function(e,t,o){function n(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var r=o(2),a=o(19),i=o(20),s=o(6),c=o(21),u=o(22);e.exports=function(e){return n(e),e.baseURL&&!c(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return n(e),t.data=a(t.data,t.headers,e.transformResponse),t},function(t){return i(t)||(n(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,o){var n=o(2);e.exports=function(e,t,o){return n.forEach(o,function(o){e=o(e,t)}),e}},function(e,t){e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t){e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t){function o(e){this.message=e}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,e.exports=o},function(e,t,o){function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var o=this;e(function(e){o.reason||(o.reason=new r(e),t(o.reason))})}var r=o(23);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n(function(t){e=t}),cancel:e}},e.exports=n},function(e,t){e.exports=function(e){return function(t){return e.apply(null,t)}}}])}),cc._RF.pop()}).call(this,e("_process"))},{_process:2}],commonScript:[function(e,t,o){"use strict";cc._RF.push(t,"c0cdazMW25Hs7Z5pGBYt09r","commonScript"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Script/utils/GameUtil"),r=cc._decorator,a=r.ccclass,i=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onClickShow=function(e){n.GameUtil.playAudioEffect("sound/sfx_catch"),e.opacity=255},t=__decorate([a],t)}(cc.Component));o.default=i,cc._RF.pop()},{"../../../Script/utils/GameUtil":"GameUtil"}],errorType:[function(e,t,o){"use strict";cc._RF.push(t,"31c0etstH1LDrl2eN39FUlS","errorType"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.STATE_CODE_OUT_OF_RANGE="\u8bf7\u6c42\u5df2\u53d1\u51fa\uff0c\u670d\u52a1\u5668\u4ee5\u72b6\u6001\u4ee3\u7801\u54cd\u5e94 \u8d85\u51fa\u4e862xx\u7684\u8303\u56f4",e.No_RESPONSE="\u8bf7\u6c42\u8d85\u65f6(\u5927\u6982\u7387)\u6216\u8005\u88ab\u53d6\u6d88\uff08\u5c0f\u6982\u7387\uff09",e.SOME_ERROR="\u5728\u8bbe\u7f6e\u89e6\u53d1\u9519\u8bef\u7684\u8bf7\u6c42\u65f6\u53d1\u751f\u4e86\u4e00\u4e9b\u4e8b\u60c5",e.RESPONE_ERROR="\u54cd\u5e94\u65e0code \u8bf8\u5982\u8def\u7531\u9519\u8bef\u7b49\u7b49",e.RESPONE_ABNORMAL="\u54cd\u5e94\u7684code != 0"}(o.ErrorType||(o.ErrorType={})),cc._RF.pop()},{}],game_01:[function(e,t,o){"use strict";cc._RF.push(t,"7df28bUjRpA9Jfpy+K4Ea8a","game_01"),t.exports={name:"game_01"},cc._RF.pop()},{}],game_monsterWithRoad:[function(e,t,o){"use strict";cc._RF.push(t,"d24f9iCn69LcYV4nV5Agehq","game_monsterWithRoad");var n=e("../../../Script/framework/constant/GameConstant");e("constants");t.exports={name:"game_monsterWithRoad",type:n.GameSyncTypeEnum.DISTRIBUTE,answerType:n.AnswerTypeEnum.HAVE,knowledgeType:n.KnowledgeTypeEnum.RELEVANT,courseStep:n.CourseStepEnum.NORMLAL,mapData:{"node-1":[1,2],"node-2":[3,4],"node-2-back":[4,3,2],"node-3":[3,6],"node-4":[7],"node-5":[8,9],"node-5-back":[8,5]}},cc._RF.pop()},{"../../../Script/framework/constant/GameConstant":"GameConstant",constants:1}],game_step2:[function(e,t,o){"use strict";cc._RF.push(t,"1484chDwOlHZJkIsH4dJtA5","game_step2"),t.exports={name:"game_step2",elements:[]},cc._RF.pop()},{}],prefab_06_timeout:[function(e,t,o){"use strict";cc._RF.push(t,"089daqcVSNKWZLcIYEiGdPo","prefab_06_timeout"),cc.Class({extends:cc.Component,properties:{version:"2.1.1",spine1:{default:null,type:cc.Node}},onLoad:function(){}}),cc._RF.pop()},{}],requestParams:[function(e,t,o){"use strict";cc._RF.push(t,"ecbe2FSVOZE341L8BO615d/","requestParams"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/data/GlobalData"),r=e("../../plugin/tuoKeYun/IBaseInfo");o.getBaseURL=function(e){void 0===e&&(e=0);var t=+n.GLOBAL.baseInfo.env,o="";if(0==e)switch(t){case 0:o="https://api-test.100daishu.com/";break;case 1:o="https://api.100daishu.com/";break;case 2:o="https://api-pre.100daishu.com/"}else if(1==e){var a=n.GLOBAL.baseInfo.business==r.businessEnum.yyclass?"ai-":"";switch(t){case 0:o="https://"+a+"gateway-test.100daishu.com/";break;case 1:o="https://"+a+"gateway.100daishu.com/";break;case 2:o="https://"+a+"gateway-pre.100daishu.com/"}}return o},o.getClientid=function(){var e=navigator.userAgent;return e.indexOf("Android")>0||e.indexOf("Adr")>-1?3:e.indexOf("iPhone")>0?4:e.indexOf("iPad")>0?1:2},cc._RF.pop()},{"../../game/data/GlobalData":"GlobalData","../../plugin/tuoKeYun/IBaseInfo":"IBaseInfo"}],request:[function(e,t,o){"use strict";cc._RF.push(t,"e7917dZG8dIdpfrqBAtwB2N","request"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./axios"),r=e("./requestParams"),a=e("./errorType"),i=e("../../game/data/GlobalData"),s=e("../../common/log/Log"),c=e("./api");n.default.defaults.baseURL=r.getBaseURL(),n.default.defaults.timeout=15e3,n.default.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)}),n.default.interceptors.response.use(function(e){var t=e.config.data;if(200!==e.status){l(e.data,e.request.responseURL,a.ErrorType.STATE_CODE_OUT_OF_RANGE,t);var o={success:!1,data:"",errorInfo:e.data};return Promise.reject(o)}if(void 0===e.data.code){l(e.data,e.request.responseURL,a.ErrorType.RESPONE_ERROR,t);o={success:!1,data:"",errorInfo:e.data};return Promise.reject(o)}if(0!=e.data.code){l("fail",e.request.responseURL,a.ErrorType.RESPONE_ABNORMAL,t);o={success:!1,data:"",errorInfo:e.data};return Promise.reject(o)}if(0==e.data.code){e.request.responseURL.includes("msg/logs/send")||d("success",e.request.responseURL,"\u8bf7\u6c42\u6210\u529f",t);var n={success:!0,data:e.data.data,errorInfo:""};return Promise.resolve(n)}},function(e){return e.message.includes("timeout")&&l(e.message,e.config.url,a.ErrorType.No_RESPONSE,""),Promise.reject(e)}),o.get=function(e,t,o){return new Promise(function(r,a){n.default.get(e,{params:t,headers:o}).then(function(e){r(e.data)}).catch(function(e){a(e),cc.error(e)})})},o.post=function(e,t,o){void 0===o&&(o={}),Object.assign(o,{Authorization:i.GLOBAL.baseInfo.token});var r=t;return e.includes("gateway")?Object.assign(o,{"Content-Type":"application/json"}):(r=u(t),Object.assign(o,{"Content-Type":"application/x-www-form-urlencoded"})),s.default.info("request.post headers:   "+JSON.stringify(o)),new Promise(function(t,a){n.default.post(e,r,{headers:o}).then(function(e){t(e)}).catch(function(e){a(e),s.default.error(e)})})};var u=function(e){var t="";for(var o in e)t+=encodeURIComponent(o)+"="+encodeURIComponent(e[o])+"&";return t},l=function(e,t,o,n){var r=t.split("?")[0];s.default.info("params2FormData "+e,r,o),c.sendLogs({msg:e,URL:r,msgText:o,params:n})},d=function(e,t,o,n){var r=t.split("?")[0];c.sendLogs({msg:e,URL:r,msgText:o,params:n})};o.setBaseURL=function(){n.default.defaults.baseURL=r.getBaseURL()},cc._RF.pop()},{"../../common/log/Log":"Log","../../game/data/GlobalData":"GlobalData","./api":"api","./axios":"axios","./errorType":"errorType","./requestParams":"requestParams"}],settlementAni:[function(e,t,o){"use strict";cc._RF.push(t,"f2d71gHaUhF4KHDjbsbstPX","settlementAni"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Script/plugin/tuoKeYun/SdkMessageType"),r=e("../../Script/event/EventCenter"),a=cc._decorator,i=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fightingAni=null,t.zaizaiAni=null,t.youyouAni=null,t.goodAni=null,t}return __extends(t,e),t.prototype.onLoad=function(){r.EVT.on(n.SdkMessageType.ON_PAGE_CHANGE,this.closeSettlementAni,this)},t.prototype.playSettlementAni=function(e){switch(this.node.parent=cc.find("UICanvas/HUDLayer"),e=e||"youyouAni"){case"fightingAni":this.fightingAni.active=!0;var t=this.fightingAni.getComponent(sp.Skeleton);t.setCompleteListener(function(e){"Fighting"==e.animation.name&&t.setAnimation(0,"Fighting_idle",!0)}),t.setAnimation(0,"Fighting",!1);break;case"goodAni":this.goodAni.active=!0;var o=this.goodAni.getComponent(sp.Skeleton);o.setCompleteListener(function(e){"Good_fankui"==e.animation.name&&o.setAnimation(0,"GOOD_guangxunhuan",!0)}),o.setAnimation(0,"Good_fankui",!1);break;case"youyouAni":this.youyouAni.active=!0;var n=this.youyouAni.getComponent(sp.Skeleton);n.setCompleteListener(function(e){"nizhenbang"==e.animation.name&&n.setAnimation(0,"xunhuan",!0)}),n.setAnimation(0,"nizhenbang",!1);break;case"zaizaiAni":this.zaizaiAni.active=!0;var r=this.zaizaiAni.getComponent(sp.Skeleton);r.setCompleteListener(function(e){"zz_open"==e.animation.name&&r.setAnimation(0,"xunhuan",!0)}),r.setAnimation(0,"zz_open",!1)}},t.prototype.closeSettlementAni=function(){this.node.children.forEach(function(e){e.active=!1})},__decorate([s(cc.Node)],t.prototype,"fightingAni",void 0),__decorate([s(cc.Node)],t.prototype,"zaizaiAni",void 0),__decorate([s(cc.Node)],t.prototype,"youyouAni",void 0),__decorate([s(cc.Node)],t.prototype,"goodAni",void 0),t=__decorate([i],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../Script/event/EventCenter":"EventCenter","../../Script/plugin/tuoKeYun/SdkMessageType":"SdkMessageType"}],storageType:[function(e,t,o){"use strict";cc._RF.push(t,"6cdcbvas99I+Z8SpUc0enYR","storageType"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.LOGS="LOGS"}(o.storageType||(o.storageType={})),cc._RF.pop()},{}],use_reversed_rotateBy:[function(e,t,o){"use strict";cc._RF.push(t,"62b02l/h59NKIB2pLJx49iz","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t,o){"use strict";cc._RF.push(t,"60477MeQGBB77mLM0qi0KOJ","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}],"use_v2.1.x_cc.Action":[function(e,t,o){"use strict";cc._RF.push(t,"5dc02Ij495BTIflM85Gh1uh","use_v2.1.x_cc.Action"),cc.macro.ROTATE_ACTION_CCW=!0,cc._RF.pop()},{}],xuanzhong:[function(e,t,o){"use strict";cc._RF.push(t,"fededKjy2BGWJCuUyyYrJ9/","xuanzhong"),cc.Class({extends:cc.Component,properties:{chooseFrame:cc.SpriteFrame},onLoad:function(){this.showAni()},showAni:function(e){var t=this;e=e||!0,this.node.runAction(cc.sequence(cc.blink(3,4),cc.callFunc(function(){t.node.active=e,t.node.opacity=255})))},start:function(){}}),cc._RF.pop()},{}]},{},["SliderPage","FoGuangComp","InputBoxComponent","NumerocKeypad","xuanzhong","answerItem","answerList","prefab_06_timeout","ISettlementComp","SettlementBaseComp","settlementAni","InitTeacher","Teacher","TeacherButton","FirstPageButton","GameBeginButton","GameEndButton","LastPageButton","NextPageButton","PrePageButton","GameInitComponent","HidleForStudentComponent","IItem","NormalButtonClickAudioComponent","SocketComponent","TheItem","TheItemAnimationEffect","TransitionScale","GameLoadConfigDownloadStep","GameLoadConnectSocket","GameLoadHttpDataStep","GameLoadInitDataStep","GameLoadResDownloadStep","GameLoadStep","GameLoadTestInitDataStep","GameLoader","Log","LogAppender","Logger","EventCenter","GameCoreEvent","GameConstant","HttpMgr","api","axios","errorType","request","requestParams","storageType","CgMessageFramework","CocosMessageType","RoomModel","UserModel","CocosMessageHandler","LoginHandler","TuoKeYunSdkMessageHandler","CgSocketFrameWork","CgSocketMessageType","SocketManager","WebSocket","GlobalData","LoadingScene","PanelManager","ResourceManager","IBaseInfo","SdkMessageType","TuoKeYunFramework","TuoKeYunSdk","CompA","CompB","PanelBase","GameUtil","NumberUtil","StringUtil","_games","use_reversed_rotateBy","use_v2.1-2.2.1_cc.Toggle_event","use_v2.1.x_cc.Action","commonScript","GamePanel01","game_01","GamePanel_monsterWithRoad","game_monsterWithRoad","MonsterManager_panel4","TipPanel","ClassOver","game_step2"]);