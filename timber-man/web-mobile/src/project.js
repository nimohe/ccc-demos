window.__require=function e(t,r,o){function n(i,a){if(!r[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var p="function"==typeof __require&&__require;if(!a&&p)return p(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var u=r[i]={exports:{}};t[i][0].call(u.exports,function(e){return n(t[i][1][e]||e)},u,u.exports,e,t,r,o)}return r[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<o.length;i++)n(o[i]);return n}({AudioManager:[function(e,t,r){"use strict";cc._RF.push(t,"7bf2beW5C5MJo+tJiLuJVkk","AudioManager");var o=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,r,o){var n,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(c<3?n(i):c>3?n(t,r,i):n(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var c=e("../data/GameData"),i=cc._decorator,a=i.ccclass,s=i.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.audioArray=[],t}var r;return o(t,e),r=t,t.prototype.start=function(){cc.log("all audio--\x3e",this.audioArray),c.default.bgAudioClip=this.bg,c.default.audioArr=this.audioArray},t.prototype.playEffect=function(e,t,o){var n;void 0===e&&(e=null),void 0===t&&(t=!1),void 0===o&&(o=!1);for(var i=0;i<c.default.audioArr.length;i++)(n=c.default.audioArr[i]).name==e&&(o?(r.audioID[e]=cc.audioEngine.playEffect(n,t),cc.log("audio:",r.audioID)):cc.audioEngine.playEffect(n,t))},t.prototype.pauseEffect=function(e){cc.audioEngine.pauseEffect(e)},t.prototype.bgmPlay=function(){cc.audioEngine.playMusic(c.default.bgAudioClip,!0)},t.prototype.bgmStop=function(){cc.audioEngine.stopMusic()},t.instance=new r,t.SD_CUT="cut",t.SD_DEATH="death",t.SD_BGM="theme",t.audioID={},n([s({type:cc.AudioClip})],t.prototype,"bg",void 0),n([s({type:cc.AudioClip})],t.prototype,"audioArray",void 0),t=r=n([a],t)}(cc.Component);r.default=p,cc._RF.pop()},{"../data/GameData":"GameData"}],GameByNimo:[function(e,t,r){"use strict";cc._RF.push(t,"5cae1pLlj1DNIqGOszyO3tz","GameByNimo");var o=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,r,o){var n,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(c<3?n(i):c>3?n(t,r,i):n(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var c=e("./manager/SwitchSceneManager"),i=cc._decorator,a=i.ccclass,s=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){var e=this;this.ssm=this.node.getComponent(c.default),cc.tween(this.node).delay(1).to(.5,{opacity:0}).call(function(){e.nextScene()}).start()},t.prototype.nextScene=function(){this.ssm.switchScene(c.default.SCENE_GAME)},t=n([a],t)}(cc.Component));r.default=s,cc._RF.pop()},{"./manager/SwitchSceneManager":"SwitchSceneManager"}],GameData:[function(e,t,r){"use strict";cc._RF.push(t,"2eb08C68nFO15IP8hdTFpih","GameData"),Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(){}return e.STATE_NORMAL="normal",e.STATE_LEFT="left",e.STATE_RIGHT="right",e.bestScore=0,e.scoreVal=0,e.gameIsOver=!1,e}();r.default=o,cc._RF.pop()},{}],GameOverPanel:[function(e,t,r){"use strict";cc._RF.push(t,"e8ebebZZhlMK4rHweAAcvU8","GameOverPanel");var o=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,r,o){var n,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(c<3?n(i):c>3?n(t,r,i):n(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var c=e("../data/GameData"),i=cc._decorator,a=i.ccclass,s=i.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scoreLabel=null,t.bestScoreLabel=null,t}return o(t,e),t.prototype.onLoad=function(){cc.log("game over init"),this.scoreLabel.string="0",this.node.opacity=0,c.default.bestScore=parseInt(cc.sys.localStorage.getItem("bestScore")||0),cc.tween(this.node).to(.5,{opacity:255}).start()},t.prototype.setScore=function(e,t){cc.log("score--",e),this.callback=t,this.scoreLabel.string=e.toString(),e>c.default.bestScore&&(c.default.bestScore=e,cc.sys.localStorage.setItem("bestScore",c.default.bestScore)),this.bestScoreLabel.string=c.default.bestScore.toString()},t.prototype.restartBtnClick=function(){this.callback()},n([s(cc.Label)],t.prototype,"scoreLabel",void 0),n([s(cc.Label)],t.prototype,"bestScoreLabel",void 0),t=n([a],t)}(cc.Component);r.default=p,cc._RF.pop()},{"../data/GameData":"GameData"}],GameScene:[function(e,t,r){"use strict";cc._RF.push(t,"64918xg+Y9ElpLKFDtQmliZ","GameScene");var o=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,r,o){var n,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(c<3?n(i):c>3?n(t,r,i):n(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var c=e("./ui/TreeNode"),i=e("./ui/Tree"),a=e("./ui/Role"),s=e("./data/GameData"),p=e("./ui/GameOverPanel"),u=e("./ui/TimeBar"),l=e("./manager/AudioManager"),f=e("./manager/SwitchSceneManager"),h=cc._decorator,d=h.ccclass,y=h.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.infoLabel=null,t.role=null,t.die=null,t.scoreLabel=null,t.gameOverPanelPrefab=null,t.timeBar=null,t.tapTip=null,t.roleLeftPosX=-270,t.roleRightPosX=270,t.roleIsAlive=!0,t.scoreVal=0,t}var r;return o(t,e),r=t,t.prototype.resize=function(){var e=cc.winSize.width/cc.winSize.height<=1.65;this.node.getComponent(cc.Canvas);cc.log("resize\uff0cisNotFit",e,cc.winSize.width,cc.winSize.height,cc.winSize.width/cc.winSize.height)},t.prototype.start=function(){cc.find("Canvas").on("resize",this.resize.bind(this)),this.resize(),s.default.gameIsOver=!1,this.scoreLabel.string=this.scoreVal.toString(),this.die.active=!1,this.timeBar.active=!0,this.roleState=r.ROLE_STATE_LEFT,this.roleScript=this.node.getChildByName("role").getComponent(a.default),this.node.on(cc.Node.EventType.TOUCH_END,this.screenTouchEndHandler,this),cc.log("sys:",cc.sys.platform),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDownHandler,this),this.timeBarScript=this.timeBar.getComponent(u.default),this.timeBar.once(u.default.TIME_OVER,this.gameOver,this)},t.prototype.onKeyDownHandler=function(e){if(!s.default.gameIsOver){if(this.tapTip.active)return this.tapTip.active=!1,void(this.timeBarScript.working=!0);this.timeBarScript.working=!0;var t=e.keyCode;37==t?(this.roleState=r.ROLE_STATE_LEFT,this.role.x=this.roleLeftPosX,this.roleScript.playAnimate(this.roleState),this.startGame()):39==t&&(this.roleState=r.ROLE_STATE_RIGHT,this.role.x=this.roleRightPosX,this.roleScript.playAnimate(this.roleState),this.startGame())}},t.prototype.screenTouchEndHandler=function(e){if(!s.default.gameIsOver){if(this.tapTip.active)return this.tapTip.active=!1,void(this.timeBarScript.working=!0);var t,o=e.getTouches()[0];t=0==this.calculatePosIsLeft(o.getLocationX())?"left":"right",cc.log(t),this.infoLabel&&(this.infoLabel.string=t),"left"==t?(this.roleState=r.ROLE_STATE_LEFT,this.role.x=this.roleLeftPosX):"right"==t&&(this.roleState=r.ROLE_STATE_RIGHT,this.role.x=this.roleRightPosX),this.roleScript.playAnimate(this.roleState),this.startGame()}},t.prototype.startGame=function(){if(cc.audioEngine.isMusicPlaying()||l.default.instance.bgmPlay(),l.default.instance.playEffect(l.default.SD_CUT),this.roleIsAlive){this.treeScript=this.getComponent(i.default);this.treeScript.getFirstTreeNode().getComponent(c.default);this.roleIsAlive=this.treeScript.removeFirstTreeNode(this.roleState),this.roleIsAlive?(this.scoreVal++,s.default.scoreVal=this.scoreVal,this.scoreLabel.string=this.scoreVal.toString(),this.timeBarScript.addTime(this.scoreVal)):(s.default.gameIsOver=!0,this.gameOver())}},t.prototype.createGameOverPanel=function(){this.gameOverPanelNode=cc.instantiate(this.gameOverPanelPrefab),this.node.addChild(this.gameOverPanelNode),this.gameOverPanelScript=this.gameOverPanelNode.getComponent(p.default),cc.log(this,s.default.scoreVal),this.gameOverPanelScript.setScore(this.scoreVal,this.restartGame.bind(this))},t.prototype.gameOver=function(){this.createGameOverPanel(),l.default.instance.playEffect(l.default.SD_DEATH),this.timeBar.active=!1,this.die.active=!0,this.role.active=!1,this.roleState==s.default.STATE_LEFT?this.die.x=this.role.x+80:this.roleState==s.default.STATE_RIGHT&&(this.die.x=this.role.x-80)},t.prototype.calculatePosIsLeft=function(e){return cc.winSize.width/2<e},t.prototype.restartGame=function(){cc.log(cc.director.getScene()),cc.director.loadScene(f.default.SCENE_GAME)},t.prototype.update=function(e){},t.ROLE_STATE_LEFT="left",t.ROLE_STATE_RIGHT="right",n([y(cc.Label)],t.prototype,"infoLabel",void 0),n([y(cc.Node)],t.prototype,"role",void 0),n([y(cc.Node)],t.prototype,"die",void 0),n([y(cc.Label)],t.prototype,"scoreLabel",void 0),n([y(cc.Prefab)],t.prototype,"gameOverPanelPrefab",void 0),n([y(cc.Node)],t.prototype,"timeBar",void 0),n([y(cc.Node)],t.prototype,"tapTip",void 0),t=r=n([d],t)}(cc.Component);r.default=_,cc._RF.pop()},{"./data/GameData":"GameData","./manager/AudioManager":"AudioManager","./manager/SwitchSceneManager":"SwitchSceneManager","./ui/GameOverPanel":"GameOverPanel","./ui/Role":"Role","./ui/TimeBar":"TimeBar","./ui/Tree":"Tree","./ui/TreeNode":"TreeNode"}],Role:[function(e,t,r){"use strict";cc._RF.push(t,"9e6d1fW0thO+oCq/UKMwkjD","Role");var o=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,r,o){var n,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(c<3?n(i):c>3?n(t,r,i):n(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var c=e("../data/GameData"),i=cc._decorator,a=i.ccclass,s=i.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftSpFrame=null,t.rightSpFrame=null,t.normalSpFrame=null,t.state="",t}return o(t,e),t.prototype.start=function(){this.state=c.default.STATE_NORMAL,this.currSp=this.node.getComponent(cc.Sprite),this.currSp.spriteFrame=this.normalSpFrame},t.prototype.playAnimate=function(e){e==c.default.STATE_LEFT?(this.currSp.node.scaleX=.8,this.changeStyle(e),this.resetRoleUI()):e==c.default.STATE_RIGHT&&(this.currSp.node.scaleX=-.8,this.changeStyle(c.default.STATE_LEFT),this.resetRoleUI())},t.prototype.resetRoleUI=function(){var e=this;setTimeout(function(){e.changeStyle(c.default.STATE_NORMAL),clearTimeout(void 0)},100)},t.prototype.changeStyle=function(e){switch(e){case c.default.STATE_NORMAL:this.currSp.spriteFrame=this.normalSpFrame;break;case c.default.STATE_LEFT:this.currSp.spriteFrame=this.leftSpFrame;break;case c.default.STATE_RIGHT:this.currSp.spriteFrame=this.rightSpFrame}},n([s(cc.SpriteFrame)],t.prototype,"leftSpFrame",void 0),n([s(cc.SpriteFrame)],t.prototype,"rightSpFrame",void 0),n([s(cc.SpriteFrame)],t.prototype,"normalSpFrame",void 0),t=n([a],t)}(cc.Component);r.default=p,cc._RF.pop()},{"../data/GameData":"GameData"}],StartScene:[function(e,t,r){"use strict";cc._RF.push(t,"e1656VyFbdHzoWnQ6POWmVJ","StartScene");var o=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,r,o){var n,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(c<3?n(i):c>3?n(t,r,i):n(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var c=e("./manager/SwitchSceneManager"),i=cc._decorator,a=i.ccclass,s=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){},t.prototype.switchToGameScene=function(){this.node.getComponent(c.default).switchScene(c.default.SCENE_GAMEBYNIMO)},t=n([a],t)}(cc.Component));r.default=s,cc._RF.pop()},{"./manager/SwitchSceneManager":"SwitchSceneManager"}],SwitchSceneManager:[function(e,t,r){"use strict";cc._RF.push(t,"f138936YbBPzaQwd/DTI1Bj","SwitchSceneManager");var o=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,r,o){var n,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(c<3?n(i):c>3?n(t,r,i):n(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startScene=null,t.gameScene=null,t.gameByNimo=null,t}return o(t,e),t.prototype.start=function(){},t.prototype.switchScene=function(e){cc.director.loadScene(e)},t.SCENE_GAME="gameScene",t.SCENE_START="startScene",t.SCENE_GAMEBYNIMO="gameByNimo",n([a(cc.SceneAsset)],t.prototype,"startScene",void 0),n([a(cc.SceneAsset)],t.prototype,"gameScene",void 0),n([a(cc.SceneAsset)],t.prototype,"gameByNimo",void 0),t=n([i],t)}(cc.Component);r.default=s,cc._RF.pop()},{}],TimeBar:[function(e,t,r){"use strict";cc._RF.push(t,"99f6ddnEvlMkLWFhCMmXaeG","TimeBar");var o=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,r,o){var n,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(c<3?n(i):c>3?n(t,r,i):n(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var c=e("../data/GameData"),i=cc._decorator,a=i.ccclass,s=i.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bar=null,t.barBg=null,t.currentLevel=1,t._working=!1,t}var r;return o(t,e),r=t,Object.defineProperty(t.prototype,"working",{get:function(){return this._working},set:function(e){this._working=e},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.bar.width=136},t.prototype.update=function(e){0!=this._working&&(c.default.gameIsOver||(this.bar.width>0?this.bar.width-=1*(.6+.1*this.currentLevel):(c.default.gameIsOver=!0,cc.log("time over"),this.node.dispatchEvent(new cc.Event.EventCustom(r.TIME_OVER,!0)))))},t.prototype.addTime=function(e){e%20==1&&this.currentLevel++,this.bar.width>272||(this.bar.width+=12)},t.TIME_OVER="time_over",n([s(cc.Node)],t.prototype,"bar",void 0),n([s(cc.Node)],t.prototype,"barBg",void 0),t=r=n([a],t)}(cc.Component);r.default=p,cc._RF.pop()},{"../data/GameData":"GameData"}],TreeNode:[function(e,t,r){"use strict";cc._RF.push(t,"341a70TWLhND6TgmCOVja0S","TreeNode");var o=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,r,o){var n,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(c<3?n(i):c>3?n(t,r,i):n(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.branchBody=null,t.branchLeft=null,t.branchRight=null,t}var r;return o(t,e),r=t,t.prototype.start=function(){},t.prototype.resetUI=function(){this.branchLeft.node.active=!0,this.branchRight.node.active=!0},t.prototype.setStyle=function(e){switch(this.currType=e,e){case r.TYPE_NORMAL:this.branchLeft.node.active=!1,this.branchRight.node.active=!1;break;case r.TYPE_RIGHT:this.branchLeft.node.active=!1;break;case r.TYPE_LEFT:this.branchRight.node.active=!1}},t.TYPE_NORMAL="normal",t.TYPE_LEFT="left",t.TYPE_RIGHT="right",n([a(cc.Sprite)],t.prototype,"branchBody",void 0),n([a(cc.Sprite)],t.prototype,"branchLeft",void 0),n([a(cc.Sprite)],t.prototype,"branchRight",void 0),t=r=n([i],t)}(cc.Component);r.default=s,cc._RF.pop()},{}],Tree:[function(e,t,r){"use strict";cc._RF.push(t,"30a93pG+89MdZUPQ2+kcnRs","Tree");var o=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,r,o){var n,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(c<3?n(i):c>3?n(t,r,i):n(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var c=e("./TreeNode"),i=e("../data/GameData"),a=cc._decorator,s=a.ccclass,p=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container=null,t.treeNodePrefab=null,t.START_POS_Y=-295,t.nodeHeight=0,t.treeNodeArr=[],t.treeTypeArr=[],t}return o(t,e),t.prototype.start=function(){cc.log("init tree",i.default.treeNodeHeight),this.treeNodePool=new cc.NodePool;for(var e=0;e<20;e++)this.treeTypeArr.push(this.getBranchType());this.checkTreeTypeData(this.treeTypeArr);for(var t=0;t<this.treeTypeArr.length;t++){var r=this.treeTypeArr[t];this.createTreeNode(t,r)}},t.prototype.createTreeNode=function(e,t){var r=cc.instantiate(this.treeNodePrefab);this.treeNodePool.put(r),this.treeNodeArr.push(r),this.container.addChild(r);var o=r.getComponent(c.default);0==this.nodeHeight&&(this.nodeHeight=o.branchBody.node.height),r.y=this.START_POS_Y+o.branchBody.node.height*e,o.setStyle(t)},t.prototype.getRandom=function(){return Math.floor(2*Math.random())},t.prototype.checkTreeTypeData=function(e){for(var t=0;t<e.length;t++)if(t<e.length){var r,o,n,i,a=e[t],s=e[t+1];r=a==c.default.TYPE_RIGHT&&s==c.default.TYPE_RIGHT,o=a==c.default.TYPE_LEFT&&s==c.default.TYPE_LEFT,n=a==c.default.TYPE_LEFT&&s==c.default.TYPE_RIGHT,i=a==c.default.TYPE_RIGHT&&s==c.default.TYPE_LEFT,(r||o||n||i)&&(e[t+1]=c.default.TYPE_NORMAL)}},t.prototype.getBranchType=function(){return this.treeTypeArr.length<=2?c.default.TYPE_NORMAL:10*this.getRandom()<7?10*this.getRandom()<5?c.default.TYPE_LEFT:c.default.TYPE_RIGHT:c.default.TYPE_NORMAL},t.prototype.getFirstTreeNode=function(){return this.treeNodeArr[0]},t.prototype.checkRoleInput=function(e){var t=this.treeTypeArr[0];return t==c.default.TYPE_NORMAL||e!=t},t.prototype.removeFirstTreeNode=function(e){var t,r=this;if(!(t=this.checkRoleInput(e)))return t;var o,n=this.treeNodeArr[0];this.treeNodeArr.splice(0,1),this.treeTypeArr.splice(0,1);for(var a=0;a<this.treeNodeArr.length;a++){this.treeNodeArr[a].y=this.START_POS_Y+this.nodeHeight*a}if(n.zIndex=this.container.children.length,e==i.default.STATE_LEFT?o=1.2*cc.winSize.width:e==i.default.STATE_RIGHT&&(o=-1.2*cc.winSize.width),cc.tween(n).to(.4,{x:o,angle:180}).call(function(){cc.log("call remove"),r.container.removeChild(n)}).start(),!(t=this.checkRoleInput(e)))return t;var s=this.treeNodeArr[this.treeNodeArr.length-1].y,p=cc.instantiate(this.treeNodePrefab);this.container.addChild(p),p.y=s,this.treeNodeArr.push(p);var u=p.getComponent(c.default),l=this.treeTypeArr[this.treeTypeArr.length-1],f=this.getBranchType();return this.checkAddTypeCanUse(l,f)||(f=c.default.TYPE_NORMAL),this.treeTypeArr.push(f),u.setStyle(f),t},t.prototype.checkAddTypeCanUse=function(e,t){var r,o,n,i,a=e,s=t,p=!0;return r=a==c.default.TYPE_RIGHT&&s==c.default.TYPE_RIGHT,o=a==c.default.TYPE_LEFT&&s==c.default.TYPE_LEFT,n=a==c.default.TYPE_LEFT&&s==c.default.TYPE_RIGHT,i=a==c.default.TYPE_RIGHT&&s==c.default.TYPE_LEFT,(r||o||n||i)&&(p=!1),p},n([p(cc.Node)],t.prototype,"container",void 0),n([p(cc.Prefab)],t.prototype,"treeNodePrefab",void 0),t=n([s],t)}(cc.Component);r.default=u,cc._RF.pop()},{"../data/GameData":"GameData","./TreeNode":"TreeNode"}],use_reversed_rotateBy:[function(e,t,r){"use strict";cc._RF.push(t,"559398cV91Euann2H1+VqkY","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}]},{},["GameByNimo","GameScene","StartScene","GameData","AudioManager","SwitchSceneManager","GameOverPanel","Role","TimeBar","Tree","TreeNode","use_reversed_rotateBy"]);